import{c as F,a as i,g as ot,t as b,l as At}from"../chunks/disclose-version.ZoaYz1AU.js";import{o as bt,p as kt,f as D,a as yt,g as a,d as It,t as K,a5 as R,J as s,s as o,c as d,a4 as q,r as l,a3 as et}from"../chunks/runtime.DaB_8cOj.js";import{s as at}from"../chunks/render.DpEwyGnv.js";import{a as Dt,i as L,p as S}from"../chunks/if.BRCK-0uq.js";import{e as X,i as rt}from"../chunks/context_helpers.B8hPR0aD.js";import{c as xt}from"../chunks/svelte-component.BFICl9vf.js";import{s as it}from"../chunks/style.Bk7ejTAN.js";import{t as Mt,s as Pt}from"../chunks/index.Bt4uqa_Y.js";import{l as Lt}from"../chunks/shared.CxuSi5mU.js";import{s as lt,p as Ct}from"../chunks/props.tfL6ot4I.js";import{C as Et}from"../chunks/Code.DozXpeGJ.js";import{A as zt}from"../chunks/Alert.Boycbxsc.js";import{T as Rt}from"../chunks/Tome_Content.DZqlrUNB.js";import{g as qt}from"../chunks/tome.CPO_0OER.js";import{D as j}from"../chunks/Dialog.D5ffDNx3.js";import{T as St}from"../chunks/Tome_Link.BBmpiNyb.js";import{M as Bt}from"../chunks/Mdn_Link.D0ZrQ25x.js";import{s as Nt}from"../chunks/attributes.BPvofiUC.js";import{e as Ot}from"../chunks/svelte-element.BVmCkY3n.js";function wt(e,t,_){if(e.multiple)return jt(e,t);for(var u of e.options){var c=Z(u);if(Dt(c,t)){u.selected=!0;return}}(!_||t!==void 0)&&(e.selectedIndex=-1)}function Yt(e,t){bt(()=>{var _=new MutationObserver(()=>{var u=e.__value;wt(e,u)});return _.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{_.disconnect()}})}function ht(e,t,_=t){var u=!0;Lt(e,"change",()=>{var c;if(e.multiple)c=[].map.call(e.querySelectorAll(":checked"),Z);else{var p=e.querySelector(":checked");c=p&&Z(p)}_(c)}),bt(()=>{var c=t();if(wt(e,c,u),u&&c===void 0){var p=e.querySelector(":checked");p!==null&&(c=Z(p),_(c))}e.__value=c,u=!1}),Yt(e)}function jt(e,t){for(var _ of e.options)_.selected=~t.indexOf(Z(_))}function Z(e){return"__value"in e?e.__value:e.value}function Ft(e,t){kt(t,!0);var _=F(),u=D(_);X(u,18,()=>t.dialogs,c=>c,(c,p,B)=>{var E=It(()=>a(B)===t.dialogs.length-1);j(c,lt({get onclose(){return t.onclose}},()=>p.dialog_props,{get index(){return a(B)},get active(){return a(E)},children:(H,J)=>{var k=F(),z=D(k);L(z,()=>t.children,Q=>{var Y=F(),U=D(Y);Nt(U,()=>t.children,()=>p),i(Q,Y)},Q=>{var Y=F(),U=D(Y);xt(U,()=>p.Component,(W,nt)=>{nt(W,lt(()=>p.props))}),i(Q,Y)}),i(H,k)},$$slots:{default:!0}}))}),i(e,_),yt()}const Ht=(e,t,_)=>({Component:e,props:t,dialog_props:_}),mt=["centered","page"];function Jt(e,t){const _=Ct(t,"tag",3,"span");var u=F(),c=D(u);Ot(c,_,!1,(p,B)=>{K(()=>{it(p,"font-size",t.size,void 0,!0),it(p,"padding",t.padding,void 0,!0)});var E=ot();K(()=>at(E,t.text)),i(B,E)}),i(e,u)}var Ut=(e,t)=>s(t,!0),Wt=(e,t)=>s(t,!0),Gt=(e,t)=>s(t,!0),Kt=(e,t)=>s(t,!0),Qt=(e,t)=>t(5),Vt=b(`<section><p>A modal that overlays the entire page. Uses <!> to allow usage from any
			component without inheriting styles.</p> <aside>⚠️ This will change to use and align APIs with the builtin <!>. API</aside></section> <section><!></section> <section><button type="button" class="mb_lg">open a dialog</button> <button type="button" class="mb_lg">open a dialog that overflows vertically</button> <button type="button" class="mb_lg">open a dialog with <code>layout="page"</code> instead of the default <code>layout='centered'</code></button> <button type="button" class="mb_lg">open a dialog containing another dialog</button> <button type="button" class="mb_lg">open many dialogs</button></section>`,1),Xt=b('<div class="pane p_xl box"><h1>attention</h1> <p>this is a dialog</p> <button type="button">ok</button></div>'),Zt=b("<p>this is a dialog that overflows vertically</p>"),te=b('<div class="pane p_xl"><h1>attention</h1> <!> <button type="button">close</button></div>'),ee=b("<option> </option>"),oe=b(`<p>This is a <code>Dialog</code> with <code>layout="<select></select>"</code>.</p> <p>Instead of being centered by default, the dialog's contents are aligned to the top of
						the page and grow downward. It's useful when the dialog's contents change in height.</p>`,1),ae=b("<option> </option>"),ne=b(`<p>This is a <code>Dialog</code> with <code>layout="<select></select>"</code>, the default value.</p> <p>It's often the best choice, but it can be undesirable in some situations, like when the
						height of the content changes as the user does things, leading to a janky experience.</p>`,1),re=(e,t)=>t(),ie=(e,t)=>t(),le=(e,t,_)=>t(_),se=b('<p><button type="button">✕</button> new stuff appears <!></p>'),_e=b('<div class="pane p_xl width_md"><!> <p><button type="button">add item</button> <button type="button">remove all</button></p> <!> <button type="button">close</button></div>'),ce=(e,t)=>s(t,!0),de=b('<div class="pane p_xl"><h1>dialog 1</h1> <p>dialogs can open more dialogs</p> <button type="button">open another dialog</button></div>'),ve=(e,t)=>s(t,!0),ue=b('<div class="pane p_xl"><h1>dialog 2</h1> <p>this dialog can open more dialogs</p> <p>this is the second dialog</p> <button type="button">open another dialog</button></div>'),pe=(e,t)=>s(t,!1),fe=(e,t,_,u)=>{s(t,S(s(_,S(s(u,!1)))))},ge=b('<div class="pane p_xl"><h1>3 dialogs!</h1> <button type="button">close dialog</button></div> <div class="pane p_xl"><h1>and another <code>.pane</code></h1> <button type="button">close all dialogs</button></div>',1),he=b('<div class="pane"><!></div>'),me=b("<!> <!> <!> <!> <!> <!> <!> <!>",1);function Be(e,t){kt(t,!0);const u=qt("Dialog");let c=R(!1),p=R(!1),B=R(!1),E=R(!1),H=R(!1),J=R(!1),k=R("page"),z=R(S([]));const Q=v=>{s(z,S(a(z).filter(g=>g!==v)))},Y=()=>{s(z,S(a(z).concat({})))},U=()=>{s(z,S([]))};let W=R(S([]));const nt=v=>{const g=f=>"!".repeat(v*3-f*3);s(W,S(Array.from({length:v},(f,n)=>Ht(Jt,{text:g(n),size:"var(--size_xl4)",padding:"var(--space_sm) var(--space_lg)"}))))};var st=me(),_t=D(st);Rt(_t,{tome:u,children:(v,g)=>{var f=Vt(),n=D(f),r=d(n),y=o(d(r));St(y,{name:"Teleport"}),q(),l(r);var h=o(r,2),x=o(d(h));Bt(x,{path:"Web/HTML/Element/dialog"}),q(),l(h),l(n);var C=o(n,2),G=d(C);Et(G,{content:`<button onclick={() => (opened = true)}>
	open a dialog
</button>
{#if opened}
	<Dialog onclose={() => (opened = false)}>
		{#snippet children(close)}
			<div class="pane p_xl box">
				<h1>attention</h1>
				<p>this is a dialog</p>
				<button onclick={close}>ok</button>
			</div>
		{/snippet}
	</Dialog>
{/if}`}),l(C);var tt=o(C,2),$=d(tt);$.__click=[Ut,c];var w=o($,2);w.__click=[Wt,p];var T=o(w,2);T.__click=[Gt,B];var A=o(T,2);A.__click=[Kt,E];var I=o(A,2);I.__click=[Qt,nt],l(tt),i(v,f)},$$slots:{default:!0}});var ct=o(_t,2);L(ct,()=>a(c),v=>{j(v,{onclose:()=>s(c,!1),children:(f,n=et)=>{var r=Xt(),y=o(d(r),4);y.__click=function(...h){var x;(x=n())==null||x.apply(this,h)},l(r),i(f,r)},$$slots:{children:!0}})});var dt=o(ct,2);L(dt,()=>a(p),v=>{j(v,{onclose:()=>s(p,!1),children:(f,n=et)=>{var r=te(),y=o(d(r),2);X(y,16,()=>({length:120}),rt,(x,C)=>{var G=Zt();i(x,G)});var h=o(y,2);h.__click=function(...x){var C;(C=n())==null||C.apply(this,x)},l(r),i(f,r)},$$slots:{children:!0}})});var vt=o(dt,2);L(vt,()=>a(B),v=>{j(v,{onclose:()=>(s(B,!1),U()),get layout(){return a(k)},children:(f,n=et)=>{var r=_e(),y=d(r);L(y,()=>a(k)==="page",$=>{var w=oe(),T=D(w),A=o(d(T),3),I=o(d(A));X(I,21,()=>mt,rt,(M,m)=>{var P=ee(),N={},O=d(P);l(P),K(()=>{N!==(N=a(m))&&(P.value=(P.__value=a(m))==null?"":a(m)),at(O,a(m))}),i(M,P)}),l(I),q(),l(A),q(),l(T),q(2),ht(I,()=>a(k),M=>s(k,M)),i($,w)},$=>{var w=F(),T=D(w);L(T,()=>a(k)==="centered",A=>{var I=ne(),M=D(I),m=o(d(M),3),P=o(d(m));X(P,21,()=>mt,rt,(N,O)=>{var V=ae(),gt={},Tt=d(V);l(V),K(()=>{gt!==(gt=a(O))&&(V.value=(V.__value=a(O))==null?"":a(O)),at(Tt,a(O))}),i(N,V)}),l(P),q(),l(m),q(),l(M),q(2),ht(P,()=>a(k),N=>s(k,N)),i(A,I)},A=>{zt(A,{status:"error",children:(I,M)=>{q();var m=ot();K(()=>at(m,`eek a bug! unknown layout "${a(k)??""}"`)),i(I,m)},$$slots:{default:!0}})},!0),i($,w)});var h=o(y,2),x=d(h);x.__click=[re,Y];var C=o(x,2);C.__click=[ie,U],l(h);var G=o(h,2);X(G,16,()=>a(z),$=>$,($,w)=>{var T=se(),A=d(T);A.__click=[le,Q,w];var I=o(A,2);L(I,()=>a(k)==="page",M=>{var m=ot("gracefully");i(M,m)},M=>{var m=F(),P=D(m);L(P,()=>a(k)==="centered",N=>{var O=ot("ungracefully");i(N,O)},null,!0),i(M,m)}),l(T),Mt(3,T,()=>Pt),i($,T)});var tt=o(G,2);tt.__click=function(...$){var w;(w=n())==null||w.apply(this,$)},l(r),K(()=>C.disabled=!a(z).length),i(f,r)},$$slots:{children:!0}})});var ut=o(vt,2);L(ut,()=>a(E),v=>{j(v,{onclose:()=>s(E,!1),children:(g,f)=>{var n=de(),r=o(d(n),4);r.__click=[ce,H],l(n),i(g,n)},$$slots:{default:!0}})});var pt=o(ut,2);L(pt,()=>a(H),v=>{j(v,{onclose:()=>s(H,!1),children:(g,f)=>{var n=ue(),r=o(d(n),6);r.__click=[ve,J],l(n),i(g,n)},$$slots:{default:!0}})});var ft=o(pt,2);L(ft,()=>a(J),v=>{j(v,{onclose:()=>s(J,!1),children:(g,f)=>{var n=ge(),r=D(n);it(r,"margin-bottom","var(--space_xl3)");var y=o(d(r),2);y.__click=[pe,J],l(r);var h=o(r,2),x=o(d(h),2);x.__click=[fe,E,H,J],l(h),i(g,n)},$$slots:{default:!0}})});var $t=o(ft,2);Ft($t,{get dialogs(){return a(W)},onclose:()=>{s(W,S(a(W).slice(0,-1)))},children:(g,f=et)=>{var n=he(),r=d(n);xt(r,()=>f().Component,(y,h)=>{h(y,lt(()=>f().props))}),l(n),i(g,n)},$$slots:{children:!0}}),i(e,st),yt()}At(["click"]);export{Be as component};
