import{l as qt,c as Z,a as l,k as it,t as y,m as Ct}from"../chunks/BVHb_Il8.js";import{m as yt,aO as zt,p as xt,f as j,a as wt,g as _,u as Rt,t as G,X as B,a2 as ht,s as o,c as s,Y as d,V as N,r as n,T as rt}from"../chunks/KxkgHfFn.js";import{s as st}from"../chunks/BS3qJFfO.js";import{i as M}from"../chunks/DS0sZ1G2.js";import{e as tt,i as Yt}from"../chunks/CGz3JggW.js";import{c as Tt}from"../chunks/D0aUjpj7.js";import{t as Ot,s as Bt}from"../chunks/B2JJZEki.js";import{s as dt,p as Nt}from"../chunks/TRjZVCas.js";import{C as jt}from"../chunks/kRT7KGBF.js";import{A as Ft}from"../chunks/Ds3k55tL.js";import{T as Ht}from"../chunks/CzKwTOie.js";import{g as Ut}from"../chunks/BSAS3wBa.js";import{D as W}from"../chunks/iA2FHYKE.js";import{T as Vt}from"../chunks/CLj9B3mj.js";import{M as Wt}from"../chunks/DXOs1df3.js";import{s as Xt,a as Gt,S as Jt}from"../chunks/Cy2-dw9e.js";import{e as Kt}from"../chunks/Dfg1UJo1.js";function At(e,t,c){if(e.multiple)return Zt(e,t);for(var f of e.options){var v=et(f);if(zt(v,t)){f.selected=!0;return}}(!c||t!==void 0)&&(e.selectedIndex=-1)}function Qt(e,t){yt(()=>{var c=new MutationObserver(()=>{var f=e.__value;At(e,f)});return c.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{c.disconnect()}})}function mt(e,t,c=t){var f=!0;qt(e,"change",v=>{var b=v?"[selected]":":checked",w;if(e.multiple)w=[].map.call(e.querySelectorAll(b),et);else{var T=e.querySelector(b)??e.querySelector("option:not([disabled])");w=T&&et(T)}c(w)}),yt(()=>{var v=t();if(At(e,v,f),f&&v===void 0){var b=e.querySelector(":checked");b!==null&&(v=et(b),c(v))}e.__value=v,f=!1}),Qt(e)}function Zt(e,t){for(var c of e.options)c.selected=~t.indexOf(et(c))}function et(e){return"__value"in e?e.__value:e.value}function te(e,t){xt(t,!0);var c=Z(),f=j(c);tt(f,18,()=>t.dialogs,v=>v,(v,b,w)=>{const T=Rt(()=>_(w)===t.dialogs.length-1);W(v,dt({get onclose(){return t.onclose}},()=>b.dialog_props,{get index(){return _(w)},get active(){return _(T)},children:(E,X)=>{var x=Z(),S=j(x);{var lt=q=>{var P=Z(),J=j(P);Xt(J,()=>t.children,()=>b),l(q,P)},_t=q=>{var P=Z(),J=j(P);Tt(J,()=>b.Component,(ot,at)=>{at(ot,dt(()=>b.props))}),l(q,P)};M(S,q=>{t.children?q(lt):q(_t,!1)})}l(E,x)},$$slots:{default:!0}}))}),l(e,c),wt()}const ee=(e,t,c)=>({Component:e,props:t,dialog_props:c}),kt=["centered","page"];function oe(e,t){const c=Nt(t,"tag",3,"span");var f=Z(),v=j(f);Kt(v,c,!1,(b,w)=>{let T;G(()=>T=Gt(b,T,{style:"",[Jt]:{"font-size":t.size,padding:t.padding}}));var E=it();G(()=>st(E,t.text)),l(w,E)}),l(e,f)}var ae=(e,t)=>d(t,!0),ne=(e,t)=>d(t,!0),re=(e,t)=>d(t,!0),ie=(e,t)=>d(t,!0),se=(e,t)=>t(5),le=y(`<section><p>A modal that overlays the entire page. Uses <!> to allow usage from any
			component without inheriting styles.</p> <aside>⚠️ This will change to use and align APIs with the builtin <!>. API</aside></section> <section><!></section> <section><button type="button" class="mb_lg">open a dialog</button> <button type="button" class="mb_lg">open a dialog that overflows vertically</button> <button type="button" class="mb_lg">open a dialog with <code>layout="page"</code> instead of the default <code>layout='centered'</code></button> <button type="button" class="mb_lg">open a dialog containing another dialog</button> <button type="button" class="mb_lg">open many dialogs</button></section>`,1),_e=y('<div class="box"><div class="pane p_xl box"><h1>attention</h1> <p>this is a dialog</p> <button type="button">ok</button></div></div>'),de=y("<p>this is a dialog that overflows vertically</p>"),ce=y('<div class="box"><div class="pane p_xl"><h1>attention</h1> <!> <button type="button">close</button></div></div>'),ve=y("<option> </option>"),ue=y(`<p>This is a <code>Dialog</code> with <code>layout="<select></select>"</code>.</p> <p>Instead of being centered by default, the dialog's contents are aligned to the top of
							the page and grow downward. It's useful when the dialog's contents change in height.</p>`,1),pe=y("<option> </option>"),fe=y(`<p>This is a <code>Dialog</code> with <code>layout="<select></select>"</code>, the default value.</p> <p>It's often the best choice, but it can be undesirable in some situations, like when
							the height of the content changes as the user does things, leading to a janky
							experience.</p>`,1),ge=(e,t)=>t(),be=(e,t)=>t(),he=(e,t,c)=>t(c),me=y('<p><button type="button">✕</button> new stuff appears <!></p>'),ke=y('<div class="box"><div class="pane p_xl width_md"><!> <p><button type="button">add item</button> <button type="button">remove all</button></p> <!> <button type="button">close</button></div></div>'),ye=(e,t)=>d(t,!0),xe=y('<div class="box"><div class="pane p_xl"><h1>dialog 1</h1> <p>dialogs can open more dialogs</p> <button type="button">open another dialog</button></div></div>'),we=(e,t)=>d(t,!0),Te=y('<div class="box"><div class="pane p_xl"><h1>dialog 2</h1> <p>this dialog can open more dialogs</p> <p>this is the second dialog</p> <button type="button">open another dialog</button></div></div>'),Ae=(e,t)=>d(t,!1),Ie=(e,t,c,f)=>{d(t,d(c,d(f,!1),!0),!0)},$e=y('<div class="box gap_xl3"><div class="pane p_xl"><h1>3 dialogs!</h1> <button type="button">close dialog</button></div> <div class="pane p_xl"><h1>and another <code>.pane</code></h1> <button type="button">close all dialogs</button></div></div>'),De=y('<div class="pane p_md width_md mx_auto"><!></div>'),Me=y("<!> <!> <!> <!> <!> <!> <!> <!>",1);function We(e,t){xt(t,!0);const f=Ut("Dialog");let v=B(!1),b=B(!1),w=B(!1),T=B(!1),E=B(!1),X=B(!1),x=B("page"),S=B(ht([]));const lt=a=>{d(S,_(S).filter(h=>h!==a),!0)},_t=()=>{d(S,_(S).concat({}),!0)},q=()=>{d(S,[],!0)};let P=B(ht([]));const J=a=>{const h=g=>"!".repeat(a*3-g*3);d(P,Array.from({length:a},(g,r)=>ee(oe,{text:h(r),size:"var(--size_xl4)",padding:"var(--space_sm) var(--space_lg)"})),!0)};var ot=Me(),at=j(ot);Ht(at,{tome:f,children:(a,h)=>{var g=le(),r=j(g),i=s(r),u=o(s(i));Vt(u,{name:"Teleport"}),N(),n(i);var m=o(i,2),C=o(s(m));Wt(C,{path:"Web/HTML/Element/dialog"}),N(),n(m),n(r);var A=o(r,2),z=s(A);jt(z,{content:`<button onclick={() => (opened = true)}>
	open a dialog
</button>
{#if opened}
	<Dialog onclose={() => (opened = false)}>
		{#snippet children(close)}
			<div class="box">
				<div class="pane p_xl box">
					<h1>attention</h1>
					<p>this is a dialog</p>
					<button onclick={close}>ok</button>
				</div>
			</div>
		{/snippet}
	</Dialog>
{/if}`}),n(A);var F=o(A,2),K=s(F);K.__click=[ae,v];var Q=o(K,2);Q.__click=[ne,b];var nt=o(Q,2);nt.__click=[re,w];var k=o(nt,2);k.__click=[ie,T];var D=o(k,2);D.__click=[se,J],n(F),l(a,g)},$$slots:{default:!0}});var ct=o(at,2);{var It=a=>{W(a,{onclose:()=>d(v,!1),children:(g,r=rt)=>{var i=_e(),u=s(i),m=o(s(u),4);m.__click=function(...C){var A;(A=r())==null||A.apply(this,C)},n(u),n(i),l(g,i)},$$slots:{default:!0}})};M(ct,a=>{_(v)&&a(It)})}var vt=o(ct,2);{var $t=a=>{W(a,{onclose:()=>d(b,!1),children:(g,r=rt)=>{var i=ce(),u=s(i),m=o(s(u),2);tt(m,16,()=>({length:120}),Yt,(A,z)=>{var F=de();l(A,F)});var C=o(m,2);C.__click=function(...A){var z;(z=r())==null||z.apply(this,A)},n(u),n(i),l(g,i)},$$slots:{default:!0}})};M(vt,a=>{_(b)&&a($t)})}var ut=o(vt,2);{var Dt=a=>{W(a,{onclose:()=>(d(w,!1),q()),get layout(){return _(x)},children:(g,r=rt)=>{var i=ke(),u=s(i),m=s(u);{var C=k=>{var D=ue(),R=j(D),H=o(s(R),3),I=o(s(H));tt(I,20,()=>kt,$=>$,($,Y)=>{var p=ve(),L={},O=s(p,!0);n(p),G(()=>{L!==(L=Y)&&(p.value=(p.__value=Y)??""),st(O,Y)}),l($,p)}),n(I),N(),n(H),N(),n(R),N(2),mt(I,()=>_(x),$=>d(x,$)),l(k,D)},A=(k,D)=>{{var R=I=>{var $=fe(),Y=j($),p=o(s(Y),3),L=o(s(p));tt(L,20,()=>kt,O=>O,(O,U)=>{var V=pe(),bt={},St=s(V,!0);n(V),G(()=>{bt!==(bt=U)&&(V.value=(V.__value=U)??""),st(St,U)}),l(O,V)}),n(L),N(),n(p),N(),n(Y),N(2),mt(L,()=>_(x),O=>d(x,O)),l(I,$)},H=I=>{Ft(I,{status:"error",children:($,Y)=>{N();var p=it();G(()=>st(p,`eek a bug! unknown layout "${_(x)??""}"`)),l($,p)},$$slots:{default:!0}})};M(k,I=>{_(x)==="centered"?I(R):I(H,!1)},D)}};M(m,k=>{_(x)==="page"?k(C):k(A,!1)})}var z=o(m,2),F=s(z);F.__click=[ge,_t];var K=o(F,2);K.__click=[be,q],n(z);var Q=o(z,2);tt(Q,16,()=>_(S),k=>k,(k,D)=>{var R=me(),H=s(R);H.__click=[he,lt,D];var I=o(H,2);{var $=p=>{var L=it("gracefully");l(p,L)},Y=(p,L)=>{{var O=U=>{var V=it("ungracefully");l(U,V)};M(p,U=>{_(x)==="centered"&&U(O)},L)}};M(I,p=>{_(x)==="page"?p($):p(Y,!1)})}n(R),Ot(3,R,()=>Bt),l(k,R)});var nt=o(Q,2);nt.__click=function(...k){var D;(D=r())==null||D.apply(this,k)},n(u),n(i),G(()=>K.disabled=!_(S).length),l(g,i)},$$slots:{default:!0}})};M(ut,a=>{_(w)&&a(Dt)})}var pt=o(ut,2);{var Mt=a=>{W(a,{onclose:()=>d(T,!1),children:(h,g)=>{var r=xe(),i=s(r),u=o(s(i),4);u.__click=[ye,E],n(i),n(r),l(h,r)},$$slots:{default:!0}})};M(pt,a=>{_(T)&&a(Mt)})}var ft=o(pt,2);{var Pt=a=>{W(a,{onclose:()=>d(E,!1),children:(h,g)=>{var r=Te(),i=s(r),u=o(s(i),6);u.__click=[we,X],n(i),n(r),l(h,r)},$$slots:{default:!0}})};M(ft,a=>{_(E)&&a(Pt)})}var gt=o(ft,2);{var Lt=a=>{W(a,{onclose:()=>d(X,!1),children:(h,g)=>{var r=$e(),i=s(r),u=o(s(i),2);u.__click=[Ae,X],n(i);var m=o(i,2),C=o(s(m),2);C.__click=[Ie,T,E,X],n(m),n(r),l(h,r)},$$slots:{default:!0}})};M(gt,a=>{_(X)&&a(Lt)})}var Et=o(gt,2);te(Et,{get dialogs(){return _(P)},onclose:()=>{d(P,_(P).slice(0,-1),!0)},children:(h,g=rt)=>{var r=De(),i=s(r);Tt(i,()=>g().Component,(u,m)=>{m(u,dt(()=>g().props))}),n(r),l(h,r)},$$slots:{default:!0}}),l(e,ot),wt()}Ct(["click"]);export{We as component};
