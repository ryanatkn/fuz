import{b as k,a,f as c,q as ye,t as m,s as e,c as i}from"../chunks/disclose-version.8cXmPj91.js";import{i as Te,p as Ae,a as Ie,a4 as f,g as v,d as ze,t as V,F as j,n as s,J as se}from"../chunks/runtime.tEJefHBO.js";import{s as le,d as Ce}from"../chunks/render.C1K3rtSi.js";import{i as Re,p as X}from"../chunks/proxy.DYJKBxXC.js";import{i as L}from"../chunks/if.CTp5gYEz.js";import{e as te,i as ce}from"../chunks/each.D9qf_eYe.js";import{c as De}from"../chunks/svelte-component.DjTNNYy_.js";import{s as de}from"../chunks/style.iv2mhl8q.js";import{t as Se,s as Be}from"../chunks/index.BsS6wkAM.js";import{l as Fe}from"../chunks/shared.Dm01VJrZ.js";import{s as ve,p as Ne}from"../chunks/props.B6XUCPZJ.js";import{u as Me,s as Pe,a as xe}from"../chunks/store.D_tGndAz.js";import{w as Oe}from"../chunks/index.CosmF22N.js";import{C as Ye}from"../chunks/Code.BzCvvdEf.js";import{A as je}from"../chunks/Alert.DDId_qGW.js";import{T as He}from"../chunks/Tome_Detail.Dh6A_FIj.js";import{g as Je}from"../chunks/tome.BiCC_aSq.js";import{D as U}from"../chunks/Dialog.B38fTjfo.js";import{T as Ue}from"../chunks/Tome_Link.FoO-AXWv.js";import{M as We}from"../chunks/Mdn_Link.DEGtUVRD.js";import{s as Ge}from"../chunks/attributes.giDdLxsX.js";import{e as Ke}from"../chunks/svelte-element.CMlKS2F6.js";function Le(o,t,r){if(o.multiple)return Ve(o,t);for(var u of o.options){var g=oe(u);if(Re(g,t)){u.selected=!0;return}}(!r||t!==void 0)&&(o.selectedIndex=-1)}function Qe(o,t){Te(()=>{var r=new MutationObserver(()=>{var u=o.__value;Le(o,u)});return r.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function $e(o,t,r){var u=!0;Fe(o,"change",()=>{var g;if(o.multiple)g=[].map.call(o.querySelectorAll(":checked"),oe);else{var w=o.querySelector(":checked");g=w&&oe(w)}r(g)}),Te(()=>{var g=t();if(Le(o,g,u),u&&g===void 0){var w=o.querySelector(":checked");w!==null&&(g=oe(w),r(g))}o.__value=g,u=!1}),Qe(o)}function Ve(o,t){for(var r of o.options)r.selected=~t.indexOf(oe(r))}function oe(o){return"__value"in o?o.__value:o.value}function Xe(o,t){Ae(t,!0);const r={};Me(r);const u=()=>Pe(t.dialogs,"$dialogs",r);var g=k(),w=c(g);te(w,71,u,(E,y)=>f(E),(E,y,W)=>{var H=k(!0),G=c(H),J=ze(()=>f(W)===u().length-1);U(G,ve({get onclose(){return t.onclose}},()=>f(y).dialog_props,{get index(){return f(W)},get active(){return v(J)},children:(T,B)=>{var ae=k(),_e=c(ae);L(_e,()=>t.children,K=>{var q=k(),Z=c(q);Ge(Z,()=>t.children,()=>f(y)),a(K,q)},K=>{var q=k(),Z=c(q);De(Z,()=>f(y).Component,(re,ne)=>{ne(re,ve(()=>f(y).props))}),a(K,q)}),a(T,ae)},$$slots:{default:!0}})),a(E,H)}),a(o,g),Ie()}const Ze=(o,t,r)=>({Component:o,props:t,dialog_props:r}),we=["centered","page"];function et(o,t){const r=Ne(t,"tag",3,"span");var u=k(),g=c(u);Ke(g,r,!1,(w,E)=>{V(()=>{de(w,"font-size",t.size),de(w,"padding",t.padding)});var y=ye(E);V(()=>le(y,t.text)),a(E,y)}),a(o,u)}var tt=(o,t)=>s(t,!0),ot=(o,t)=>s(t,!0),at=(o,t)=>s(t,!0),rt=(o,t)=>s(t,!0),nt=(o,t)=>t(5),it=m(`<section><p>A modal that overlays the entire page. Uses <!> to allow usage from any
			component without inheriting styles.</p> <aside>⚠️ This will change to use and align APIs with the builtin <!>. API</aside></section> <section><!></section> <section><button class="mb_lg">open a dialog</button> <button class="mb_lg">open a dialog that overflows vertically</button> <button class="mb_lg">open a dialog with <code>layout="page"</code> instead of the default <code>layout='centered'</code></button> <button class="mb_lg">open a dialog containing another dialog</button> <button class="mb_lg">open many dialogs</button></section>`,1),st=m('<div class="pane p_xl box"><h1>attention</h1> <p>this is a dialog</p> <button>ok</button></div>'),lt=m("<p>this is a dialog that overflows vertically</p>"),_t=m('<div class="pane p_xl"><h1>attention</h1> <!> <button>close</button></div>'),ct=m("<option> </option>"),dt=m(`<p>This is a <code>Dialog</code> with <code>layout="<select></select>"</code>.</p> <p>Instead of being centered by default, the dialog's contents are aligned to the top of
						the page and grow downward. It's useful when the dialog's contents change in height.</p>`,1),vt=m("<option> </option>"),ut=m(`<p>This is a <code>Dialog</code> with <code>layout="<select></select>"</code>, the default value.</p> <p>It's often the best choice, but it can be undesirable in some situations, like when the
						height of the content changes as the user does things, leading to a janky experience.</p>`,1),pt=(o,t)=>t(),gt=(o,t)=>t(),ft=(o,t,r)=>t(f(r)),mt=m("gracefully",1),ht=m("ungracefully",1),bt=m("<p><button>✕</button> new stuff appears <!></p>"),kt=m('<div class="pane p_xl width_md"><!> <p><button>add item</button> <button>remove all</button></p> <!> <button type="button">close</button></div>'),xt=(o,t)=>s(t,!0),$t=m('<div class="pane p_xl"><h1>dialog 1</h1> <p>dialogs can open more dialogs</p> <button>open another dialog</button></div>'),wt=(o,t)=>s(t,!0),yt=m('<div class="pane p_xl"><h1>dialog 2</h1> <p>this dialog can open more dialogs</p> <p>this is the second dialog</p> <button>open another dialog</button></div>'),Tt=(o,t)=>s(t,!1),At=(o,t,r,u)=>{s(t,X(s(r,X(s(u,!1)))))},It=m('<div class="pane p_xl"><h1>3 dialogs!</h1> <button>close dialog</button></div> <div class="pane p_xl"><h1>and another <code>.pane</code></h1> <button>close all dialogs</button></div>',1),Dt=m('<div class="pane"><!></div>'),Mt=m("<!> <!> <!> <!> <!> <!> <!> <!>",5);function Xt(o,t){Ae(t,!0);const r={};Me(r);const u=()=>Pe(q,"$dialogs",r),w=Je("Dialog");let E=j(!1),y=j(!1),W=j(!1),H=j(!1),G=j(!1),J=j(!1),T=j("page"),B=j(X([]));const ae=d=>{s(B,X(v(B).filter(n=>n!==d)))},_e=()=>{s(B,X(v(B).concat({})))},K=()=>{s(B,X([]))},q=Oe([]),Z=d=>{const n=l=>"!".repeat(d*3-l*3);xe(q,Array.from({length:d},(l,h)=>Ze(et,{text:n(h),size:"var(--size_xl4)",padding:"var(--space_sm) var(--space_lg)"})))};var re=Mt(),ne=c(re);He(ne,{tome:w,children:(d,n)=>{var l=it(),h=c(l),$=i(h),p=e(i($));Ue(p,{name:"Teleport"});var _=e(e($,!0)),x=e(i(_));We(x,{href:"Web/HTML/Element/dialog"});var b=e(e(h,!0)),A=i(b);Ye(A,{content:`<button onclick={() => (opened = true)}>
	open a dialog
</button>
{#if opened}
	<Dialog onclose={() => (opened = false)}>
		{#snippet children(close)}
			<div class="pane p_xl box">
				<h1>attention</h1>
				<p>this is a dialog</p>
				<button onclick={close}>ok</button>
			</div>
		{/snippet}
	</Dialog>
{/if}`});var F=e(e(b,!0)),N=i(F);N.__click=[tt,E];var ee=e(e(N,!0));ee.__click=[ot,y];var I=e(e(ee,!0));I.__click=[at,W];var P=e(e(I,!0));P.__click=[rt,H];var Q=e(e(P,!0));Q.__click=[nt,Z],a(d,l)},$$slots:{default:!0}});var ue=e(e(ne,!0));L(ue,()=>v(E),d=>{var n=k(!0),l=c(n);U(l,{onclose:()=>s(E,!1),children:($,p=se)=>{var _=st(),x=i(_),b=e(e(x,!0)),A=e(e(b,!0));A.__click=p(),a($,_)}}),a(d,n)});var pe=e(e(ue,!0));L(pe,()=>v(y),d=>{var n=k(!0),l=c(n);U(l,{onclose:()=>s(y,!1),children:($,p=se)=>{var _=_t(),x=i(_),b=e(e(x,!0));te(b,65,()=>({length:120}),ce,(F,N,ee)=>{var I=lt();a(F,I)});var A=e(e(b,!0));A.__click=p(),a($,_)}}),a(d,n)});var ge=e(e(pe,!0));L(ge,()=>v(W),d=>{var n=k(!0),l=c(n);U(l,{onclose:()=>(s(W,!1),K()),get layout(){return v(T)},children:($,p=se)=>{var _=kt(),x=i(_);L(x,()=>v(T)==="page",I=>{var P=dt(),Q=c(P),R=e(i(Q)),z=e(e(R,!0)),O=e(i(z));te(O,73,()=>we,ce,(D,M,Y)=>{var C=ct(),S,be=i(C);V(()=>{S!==(S=f(M))&&(C.value=(C.__value=f(M))==null?"":f(M)),le(be,f(M))}),a(D,C)}),$e(O,()=>v(T),D=>s(T,D)),a(I,P)},I=>{var P=k(),Q=c(P);L(Q,()=>v(T)==="centered",R=>{var z=ut(),O=c(z),D=e(i(O)),M=e(e(D,!0)),Y=e(i(M));te(Y,73,()=>we,ce,(C,S,be)=>{var ie=vt(),ke,qe=i(ie);V(()=>{ke!==(ke=f(S))&&(ie.value=(ie.__value=f(S))==null?"":f(S)),le(qe,f(S))}),a(C,ie)}),$e(Y,()=>v(T),C=>s(T,C)),a(R,z)},R=>{var z=k(!0),O=c(z);je(O,{status:"error",children:(D,M)=>{var Y=ye(D);V(()=>le(Y,`eek a bug! unknown layout "${v(T)??""}"`)),a(D,Y)},$$slots:{default:!0}}),a(R,z)},!0),a(I,P)});var b=e(e(x,!0)),A=i(b);A.__click=[pt,_e];var F=e(e(A,!0));F.__click=[gt,K];var N=e(e(b,!0));te(N,68,()=>v(B),(I,P)=>f(I),(I,P,Q)=>{var R=bt();Se(3,R,()=>Be);var z=i(R);z.__click=[ft,ae,P];var O=e(e(z,!0));L(O,()=>v(T)==="page",D=>{var M=mt();a(D,M)},D=>{var M=k(),Y=c(M);L(Y,()=>v(T)==="centered",C=>{var S=ht();a(C,S)},null,!0),a(D,M)}),a(I,R)});var ee=e(e(N,!0));ee.__click=p(),V(()=>F.disabled=!v(B).length),a($,_)}}),a(d,n)});var fe=e(e(ge,!0));L(fe,()=>v(H),d=>{var n=k(!0),l=c(n);U(l,{onclose:()=>s(H,!1),children:(h,$)=>{var p=$t(),_=i(p),x=e(e(_,!0)),b=e(e(x,!0));b.__click=[xt,G],a(h,p)},$$slots:{default:!0}}),a(d,n)});var me=e(e(fe,!0));L(me,()=>v(G),d=>{var n=k(!0),l=c(n);U(l,{onclose:()=>s(G,!1),children:(h,$)=>{var p=yt(),_=i(p),x=e(e(_,!0)),b=e(e(x,!0)),A=e(e(b,!0));A.__click=[wt,J],a(h,p)},$$slots:{default:!0}}),a(d,n)});var he=e(e(me,!0));L(he,()=>v(J),d=>{var n=k(!0),l=c(n);U(l,{onclose:()=>s(J,!1),children:(h,$)=>{var p=It(),_=c(p);de(_,"margin-bottom","var(--space_xl3)");var x=i(_),b=e(e(x,!0));b.__click=[Tt,J];var A=e(e(_,!0)),F=i(A),N=e(e(F,!0));N.__click=[At,H,G,J],a(h,p)},$$slots:{default:!0}}),a(d,n)});var Ee=e(e(he,!0));Xe(Ee,{dialogs:q,onclose:()=>{xe(q,u().slice(0,-1))},children:(n,l=se)=>{var h=Dt(),$=i(h);De($,()=>l().Component,(p,_)=>{_(p,ve(()=>l().props))}),a(n,h)}}),a(o,re),Ie()}Ce(["click"]);export{Xt as component};
