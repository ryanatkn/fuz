import"./DsnmJJEf.js";import{aA as j,p as q,y as L,k as r,l as _,i as a,aB as P,aC as F,f as G,d as u,s as H,r as p,t as J,b as T,g as K,a as M,h as Q,c as U}from"./BElm8bt9.js";import{i as V}from"./CVG-RjJM.js";import{h as W,j as X}from"./C7GdCpii.js";import{b as A}from"./VROXyBOs.js";import{p as y}from"./VRMaxv_A.js";import{s as Y,i as Z}from"./V2q5a4YM.js";import{w as $}from"./CyDE3FWY.js";import{T as ee}from"./CBp_DxPL.js";var te=(c,o,v,g)=>{const l=c.target;a(o)&&(a(o)===l||!a(o).contains(l)||v()&&!l.closest(v()))&&g(c)},ae=G('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-1ayz0dr"><div class="dialog_wrapper svelte-1ayz0dr" role="none"><div class="dialog_bg svelte-1ayz0dr" aria-hidden="true"></div> <div class="dialog_content svelte-1ayz0dr"><!></div></div></div></div>');function me(c,o){q(o,!0);const v=y(o,"layout",3,"centered"),g=y(o,"index",3,0),l=y(o,"active",3,!0),D=y(o,"content_selector",3,".pane"),z="body",k="fuz_dialog";let i=_(void 0);L(()=>{I(o.container)});const I=e=>{if(e)r(i,e,!0);else{const n=document.getElementById(k);if(n)r(i,n,!0);else{const t=document.querySelector(z);if(!t)throw Error(`Cannot find dialog root element with selector '${z}'`);r(i,document.createElement("div"),!0),a(i).id=k,a(i).style.display="contents",t.appendChild(a(i))}}};let m=_(void 0),w=_(void 0);const h=e=>{e&&Y(e),o.onclose?.()},R=e=>{if(e.key==="Escape"&&!Z(e.target)){const n=a(m)?.parentElement,t=n?.parentElement?.children,d=Array.prototype.indexOf.call(t,n);(!t||d===t.length-1||d===-1)&&h(e)}};let b=_(!1);P("keydown",F,function(...e){(l()?R:void 0)?.apply(this,e)}),ee(c,{get to(){return a(i)},onmove:async()=>{await $(),r(b,!0),a(m)?.focus()},children:(e,n)=>{var t=ae();let d,C;var O=u(t),E=u(O);E.__mousedown=[te,w,D,h];var x=H(u(E),2),B=u(x);{var N=s=>{var f=K(),S=M(f);Q(S,()=>o.children,()=>h),T(s,f)};V(B,s=>{a(b)&&s(N)})}p(x),A(x,s=>r(w,s),()=>a(w)),p(E),p(O),p(t),A(t,s=>r(m,s),()=>a(m)),J((s,f)=>{d=W(t,1,"dialog svelte-1ayz0dr",null,d,s),C=X(t,"",C,f)},[()=>({ready:a(b),layout_page:v()==="page"}),()=>({"z-index":100+g()})]),T(e,t)},$$slots:{default:!0}}),U()}j(["mousedown"]);export{me as D};
