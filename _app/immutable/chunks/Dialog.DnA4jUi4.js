import{$ as S,c as w,s as j,b as q,f as B,a as C,r as y,t as L}from"./disclose-version.D-YpP91c.js";import{p as U,O as X,g as i,n as u,t as F,a as G,C as b}from"./runtime.CLWtUI7-.js";import{e as H,f as J}from"./svelte-head.BiNYCvkA.js";import{i as K}from"./if.t2Adprt1.js";import{s as M}from"./attributes.w-7YtrUH.js";import{t as I}from"./class.iiaQ2wDY.js";import{s as Q}from"./style.iv2mhl8q.js";import{p as _}from"./proxy.CnlAnLU8.js";import{b as P}from"./this.CdNU6mSA.js";import{p as x}from"./props.BqHnzyJo.js";import{T as V}from"./Teleport.BDJpmWZf.js";const W=e=>{var s;if(!e)return!1;const{tagName:t}=e;if(t==="INPUT"){const{type:r}=e;return r==="text"||r==="number"||r==="password"||r==="email"||r==="search"||r==="url"}return t==="TEXTAREA"||!!((s=e.getAttribute)!=null&&s.call(e,"contenteditable"))&&e.getAttribute("contenteditable")!=="false"},fe=e=>{const t=e.closest("[contenteditable]");return t!==null&&t.getAttribute("contenteditable")!=="false"},Y=(e,t=!0,s=!0)=>(s&&e.preventDefault(),t?e.stopImmediatePropagation():e.stopPropagation(),e),me=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},Z=(e=0)=>new Promise(t=>setTimeout(t,e)),_e=e=>e&&typeof e.then=="function";var $=(e,t,s)=>{e.target===i(t)&&s(e)},ee=L('<div class="dialog svelte-161ujlb" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-161ujlb"><div class="dialog_wrapper svelte-161ujlb"><div class="dialog_bg svelte-161ujlb" aria-hidden="true"></div> <div class="dialog_content svelte-161ujlb" role="none"><!></div></div></div></div>');function pe(e,t){U(t,!0);const s=x(t,"layout",3,"centered"),r=x(t,"index",3,0),D=x(t,"active",3,!0),T="body",A="fuz_dialog";let d=b(void 0);X(()=>{N(t.container)});const N=o=>{if(o)u(d,_(o));else{const a=document.getElementById(A);if(a)u(d,_(a));else{const n=document.querySelector(T);if(!n)throw Error(`Cannot find dialog root element with selector '${T}'`);u(d,_(document.createElement("div"))),i(d).id=A,i(d).style.display="contents",n.appendChild(i(d))}}};let p=b(void 0),h=b(void 0);const v=o=>{var a;o&&Y(o),(a=t.onclose)==null||a.call(t)},R=o=>{var a,n;if(o.key==="Escape"&&!W(o.target)){const l=(a=i(p))==null?void 0:a.parentElement,c=(n=l==null?void 0:l.parentElement)==null?void 0:n.children,f=Array.prototype.indexOf.call(c,l);(!c||f===c.length-1||f===-1)&&v(o)}};let E=b(!1);J("keydown",S,function(...o){const a=D()?R:void 0;return a==null?void 0:a.apply(this,o)},!1),V(e,{get to(){return i(d)},onmove:async()=>{var o;await Z(),u(E,!0),(o=i(p))==null||o.focus()},children:(o,a)=>{var n=ee();P(n,m=>u(p,_(m)),()=>i(p));var l=w(n),c=w(l),f=w(c);f.__mousedown=v;var g=j(j(f,!0));P(g,m=>u(h,_(m)),()=>i(h)),g.__mousedown=[$,h,v];var k=w(g);K(k,()=>i(E),m=>{var O=q(),z=B(O);M(z,()=>t.children,()=>v),C(m,O)}),y(g),y(c),y(l),y(n),F(()=>{I(n,"ready",i(E)),I(n,"layout_page",s()==="page"),Q(n,"z-index",100+r())}),C(o,n)},$$slots:{default:!0}}),G()}H(["mousedown"]);export{pe as D,_e as a,W as b,fe as c,me as i,Y as s};
