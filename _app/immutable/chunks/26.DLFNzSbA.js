import{a as o,t as c,c as r,s as e,b as q,f as y}from"./disclose-version.BPChegCu.js";import{g as t,w as B,I as Z,p as xe,t as U,a as Ce,a5 as T,d as h,K as kt}from"./runtime.TAR74xOU.js";import{d as Le,s as ee,f as wt}from"./render.CccNZJne.js";import{p as de}from"./proxy.Gev7vO7-.js";import{i as C}from"./if.CZPAuhxQ.js";import{e as qe}from"./each.B4SVwQLs.js";import{t as Fe}from"./class.BkLG2A5n.js";import{s as ie}from"./style.iv2mhl8q.js";import{u as at,s as we,a as je}from"./store.Kx7Nrgr2.js";import{w as X,g as et}from"./index.B5Dp4pE-.js";import{C as x}from"./Code.CipLiXoy.js";import{r as st,a as ct,g as lt,s as xt,b as Ct,e as It,d as zt,f as Mt}from"./Themed.CMJFjOIn.js";import{T as Pt}from"./Tome_Detail.Bn7h2gFg.js";import{D as ne}from"./Details.DUDKMhoW.js";import{s as tt,D as nt}from"./Dialog.CEPSNM_T.js";import{g as Dt}from"./tome.Dl_Z6kQH.js";import{C as Wt,T as At}from"./Theme_Input.DiVUZnIF.js";import{T as Se}from"./Tome_Subheading.D-2hU2aM.js";import{r as Je,f as ot,d as Bt,s as Nt}from"./attributes.D8CXHLTl.js";import{b as Ot}from"./input.DTlZbf-K.js";import{p as ke}from"./props.DJpCjvQe.js";import{M as $e}from"./Mdn_Link.DkPuPDnO.js";import{h as Et}from"./html.BSajSiOo.js";import{e as Rt}from"./svelte-element.ByHsX1rv.js";const qt=async(v,s,a,i)=>{B(s,!1),B(a,!1);try{await navigator.clipboard.writeText(i.text)}catch{B(a,!0);return}B(s,!0)};var Ft=c('<small class="svelte-1y2zubh">copied!</small>'),Jt=c('<small class="svelte-1y2zubh">failed</small>'),Lt=c('<div class="copy_to_clipboard svelte-1y2zubh"><button type="button" class="icon_button">üìã</button> <!> <!></div>');function jt(v,s){let a=Z(!1),i=Z(!1);var l=Lt(),f=r(l);f.__click=[qt,a,i,s],ie(f,"font-size","var(--size_lg)");var u=e(e(f,!0));C(u,()=>t(a),g=>{var m=Ft();ie(m,"color","var(--color_b_5)"),o(g,m)});var I=e(e(u,!0));C(I,()=>t(i),g=>{var m=Jt();ie(m,"color","var(--color_c_5)"),o(g,m)}),o(v,l)}Le(["click"]);var Vt=c("<blockquote> </blockquote>"),Yt=c('<div class="variable svelte-11ggo28"><div class="name svelte-11ggo28"><code> </code></div> <!> <label><div class="title">light</div> <input disabled></label> <label><div class="title">dark</div> <input disabled></label></div>');function Kt(v,s){xe(s,!0);var a=q(),i=y(a);C(i,()=>s.variable,l=>{var f=Yt(),u=r(f),I=r(u),g=r(I),m=e(e(u,!0));C(m,()=>s.variable.summary,p=>{var k=Vt(),w=r(k);U(()=>ee(w,s.variable.summary)),o(p,k)});var z=e(e(m,!0)),M=r(z),P=e(e(M,!0));Je(P);var N=e(e(z,!0)),S=r(N),$=e(e(S,!0));Je($),U(()=>{ee(g,`--${s.variable.name??""}`),ot(P,s.variable.light??""),ot($,s.variable.dark??"")}),o(l,f)}),o(v,a),Ce()}const Ut=(v,s,a,i)=>{var l;t(s)&&((l=a.onsave)==null||l.call(a,t(i)))},Gt=(v,s)=>{s(v),alert("TODO")};var Ht=c("edit",1),Qt=c("create",1),Xt=c("save changes",1),Zt=c("create theme",1),eo=(v,s,a)=>s(v,T(a)),to=c('<button type="button" class="variable menu_item svelte-cno0i6"> </button>'),oo=c('<div class="copy svelte-cno0i6"><!></div> <!>',1),ro=c('<div class="pane"><div class="panel p_lg box"><!> <aside>‚ö†Ô∏è This is unfinished and will change.</aside> <button type="button">ok</button></div></div>'),ao=c(`<div class="theme_form svelte-cno0i6"><h2 class="text_align_center"><!> theme</h2> <aside>Creating and editing themes at runtime is a work in progress, but you can click around to see
		where it's going!</aside> <header class="svelte-cno0i6"><div class="variables_header svelte-cno0i6"><p> </p> <button type="button" class="w_100" disabled>add a variable</button></div> <form class="svelte-cno0i6"><label><div class="title">name</div> <input placeholder=">"></label> <button type="button"><!></button></form></header> <div class="content svelte-cno0i6"><div class="variables svelte-cno0i6"></div> <div class="rendered svelte-cno0i6"><!></div></div></div> <!>`,1);function so(v,s){xe(s,!0);const a=ke(s,"theme",3,null);let i=Z(de(a()?a().name:"new theme")),l=Z(de(a()?a().variables:[]));const f=h(()=>({name:t(i),variables:t(l)})),u=h(()=>st(t(f),{empty_default_theme:!1,specificity:1})),I=h(()=>t(l).reduce((n,d)=>d.light?n+1:n,0)),g=h(()=>t(l).reduce((n,d)=>d.dark?n+1:n,0));let m=Z(null);const z=(n,d)=>{tt(n),B(m,de(d)),B(l,de(t(l).slice()))},M=h(()=>!!a()),P=h(()=>a()?t(i)!==a().name||t(l)!==a().variables:!0);var N=ao(),S=y(N),$=r(S),p=r($);C(p,()=>t(M),n=>{var d=Ht();o(n,d)},n=>{var d=Qt();o(n,d)});var k=e(e($,!0)),w=e(e(k,!0)),O=r(w),te=r(O),J=r(te),oe=e(e(te,!0));oe.__click=[Gt,tt];var G=e(e(O,!0)),H=r(G),Ie=r(H),re=e(e(Ie,!0));Je(re);var Q=e(e(H,!0));Q.__click=[Ut,P,s,f];var me=r(Q);C(me,()=>t(M),n=>{var d=Xt();o(n,d)},n=>{var d=Zt();o(n,d)});var D=e(e(w,!0)),_e=r(D);qe(_e,77,()=>t(l),(n,d)=>T(n).name,(n,d,L)=>{var A=to();A.__click=[eo,z,d];var F=r(A);U(()=>ee(F,`--${T(d).name??""}`)),o(n,A)});var ve=e(e(_e,!0)),he=r(ve);C(he,()=>t(u),n=>{var d=oo(),L=y(d),A=r(L);jt(A,{get text(){return t(u)}});var F=e(e(L,!0));x(F,{get content(){return t(u)},lang:"css"}),o(n,d)});var ue=e(e(S,!0));C(ue,()=>t(m),n=>{var d=q(),L=y(d);{var A=(F,pe=kt)=>{var be=ro(),fe=r(be),ge=r(fe);Kt(ge,{get variable(){return t(m)}});var ze=e(e(ge,!0)),Me=e(e(ze,!0));Me.__click=pe(),o(F,be)};nt(L,{onclose:()=>B(m,null),children:A})}o(n,d)}),U(()=>{ee(J,`variables: ${t(I)??""} light, ${t(g)??""} dark`),Q.disabled=!t(P)}),Ot(re,()=>t(i),n=>B(i,n)),o(v,N),Ce()}Le(["click"]);let co=0;function rt(v,s){xe(s,!0);const a={};at(a);const i=()=>we(f(),"$selected_theme",a),l=()=>we(u(),"$selected_color_scheme",a),f=ke(s,"selected_theme",11,()=>X(et(ct()))),u=ke(s,"selected_color_scheme",11,()=>X(et(lt()))),I=ke(s,"tagName",3,"div"),g="themed_"+co++;xt(f()),Ct(u());const m=h(()=>st(i(),{id:g,empty_default_theme:!1})),z=h(()=>t(m)?It(t(m)):null),M=h(()=>l()==="dark"||l()==="light"?l():matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");var P=q();wt(S=>{var $=q(),p=y($);C(p,()=>t(z),k=>{var w=q(),O=y(w);Et(O,()=>t(z),!1,!1),o(k,w)}),o(S,$)});var N=y(P);Rt(N,I,!1,(S,$)=>{Bt(S,null,{id:g,class:"themed"},""),U(()=>Fe(S,"dark",t(M)==="dark"));var p=q(),k=y(p);Nt(()=>s.children,k,()=>g,()=>t(m),()=>t(z),f,u),o($,p)}),o(v,P),Ce()}var lo=c("CSS custom properties",1),no=c("Why the singleton?",1),io=c(`<aside><p>By default <code>Themed</code> syncs its settings to the global <code>:root</code> tag and
					persists to <code>localStorage</code>.</p> <p>These behaviors can be customized with its props:</p> <ul><li><code>sync_color_scheme</code></li> <li><code>load_color_scheme</code></li> <li><code>save_color_scheme</code></li> <li><code>load_theme</code></li> <li><code>save_theme</code></li></ul> <p>See <code>Themed_Scope</code> below to theme one branch of the DOM tree.</p></aside>`),mo=c("Why nested children?",1),_o=c(`<aside><p><code>Themed</code> is designed to wrap every page at the top level so it can provide the
					selected theme and color scheme in the Svelte context. It works without children, but <code>get_theme</code> and <code>get_color_scheme</code> will fail unless you call <code>set_theme</code> and <code>set_color_scheme</code> yourself.</p> <p>These context helpers provide the <code>writable</code> stores to your code, and they also
					reduce boilerplate in the helper components documented below.</p> <p>If you set stores in context manually, they must be the same references as the <code>Themed</code> props:</p> <!></aside>`),vo=c("More about <code>Color_Scheme_Input</code>",1),ho=c(`<aside><p><code>Color_Scheme_Input</code> enables users to choose and persist the color scheme without
					boilerplate.</p> <p>By default, <code>Color_Scheme_Input</code> works with <code>Themed</code> to save the
					user's preference to <code>localStorage</code>. To customize this behavior, pass a custom <code>selected_color_scheme</code> or <code>select</code> function prop.</p></aside>`),uo=c(`‚ö†Ô∏è Scoped themes are a work in progress and may not be supported depending
				on complexity. It shouldn't worsen the unscoped API.`,1),po=(v,s,a,i,l)=>{s(T(a)),je(l,"light")},bo=c("‚òÖ",1),fo=c("‚òÜ",1),go=c('<div class="box row p_sm"><button type="button" class="icon_button"><!></button> <div class="p_md">the <code> </code> theme</div></div>'),yo=(v,s,a,i,l)=>{s(T(a)),je(l,"dark")},To=c("‚òÖ",1),So=c("‚òÜ",1),$o=c('<div class="box row p_sm"><button type="button" class="icon_button"><!></button> <div class="p_md">the <code> </code> theme</div></div>'),ko=c('<div class="mb_lg"><p>Scope a theme to one branch of the DOM tree with <code>Themed_Scope</code>:</p> <!> <!></div> <div><!> <!></div>',1),wo=c("More about <code>Themed</code>",1),xo=c(`<aside><p><code>Themed</code> initializes the system's theme support. Without it, the page will not
					reflect the user's system <code>color-scheme</code>. By default, <code>Themed</code> applies the base theme to the
					root of the page via <code>create_theme_setup_script</code>. It uses JS to add the <code>.dark</code> CSS class to the <code>:root</code> element.</p> <p>This strategy enables color scheme and theme support with minimal CSS and optimal
					performance for most use cases. The system supports plain CSS usage that can be static or
					dynamic, scoped or global, or imported at buildtime or runtime. It also allows runtime
					access to the data if you want to pay the performance costs.</p> <p>The theme setup script interacts with <code>sync_color_scheme</code> to save the user's
					preference to <code>localStorage</code>. See also <code>Color_Scheme_Input</code>.</p> <p>The setup script avoids flash-on-load due to color scheme, but currently themes flash in
					after loading. We'll try to fix this when the system stabilizes.</p></aside>`),Co=c(`<section class="theme"><p>Fuz provides UI components that use <a href="https://moss.ryanatkn.com/library/themes">Moss' theming system</a> for dark mode and custom themes.</p> <p><code>Themed</code> adds global support for both the browser's <!> and custom themes based on <a href="https://moss.ryanatkn.com/library/variables">Moss style variables</a>, which use <!>. <code>Themed</code> is a singleton component that's mounted at the top-level of the page:</p> <!> <!> <!> <!></section> <section class="theme"><!> <p><code>Themed</code> defaults to automatic <!> detection with <!>, and users can also set it directly:</p> <!> <!> <!> <p>Pass a prop to override the default:</p> <!> <p>The builtin themes support both dark and light color schemes. Custom themes may support one or
			both color schemes.</p> <!></section> <section class="theme"><!> <p>A theme is a simple JSON collection of <a href="https://moss.ryanatkn.com/library/variables">Moss style variables</a> that can be transformed into CSS that set custom properties. Each variable can have values for
			light and/or dark color schemes. In other words, "dark" isn't a theme, it's a mode that any theme
			can implement.</p> <div class="width_sm mb_lg"><!></div> <aside>The builtin themes need more work, but the proof of concept is ready!</aside></section> <section class="theme"><!> <!></section> <section class="theme"><!> <p>Themes are plain CSS that can be sourced in a variety of ways.</p> <p>To use Fuz's base theme:</p> <!> <p><code>Themed</code> can be customized with the nonreactive, bindable, writable store props <code>selected_theme</code> and <code>selected_color_scheme</code>:</p> <!> <p><code>Themed</code> sets the writable stores <code>selected_theme</code> and <code>selected_color_scheme</code> in the Svelte context:</p> <!> <!></section>`,1),Io=c('<div class="pane"><div class="theme_editor_wrapper panel svelte-1io66l"><!></div></div>'),zo=c("<!> <!>",1);function er(v,s){xe(s,!0);const a={};at(a);const i=()=>we(g,"$selected_theme",a),l=()=>we(m,"$selected_color_scheme",a),u=Dt("Themed"),I=zt.slice(),g=ct(),m=lt(),z=p=>{je(g,p),Mt(p)};let M=Z(null);var P=zo(),N=y(P);Pt(N,{tome:u,children:(p,k)=>{var w=Co(),O=y(w),te=r(O),J=e(e(te,!0)),oe=r(J),G=e(e(oe,!0));$e(G,{path:"Web/CSS/color-scheme"});var H=e(e(G,!0)),Ie=e(e(H,!0));$e(Ie,{path:"Web/CSS/--*",children:(j,_)=>{var b=lo();o(j,b)},$$slots:{default:!0}});var re=e(e(J,!0));x(re,{content:"import Themed from '@ryanatkn/fuz/Themed.svelte';",lang:"ts"});var Q=e(e(re,!0));x(Q,{content:`<!-- +layout.svelte -->
<Themed>
	{@render children()}
</Themed>`});var me=e(e(Q,!0));{var D=j=>{var _=no();o(j,_)};ne(me,{summary:D,children:(j,_)=>{var b=io();o(j,b)},$$slots:{default:!0}})}var _e=e(e(me,!0));{var D=_=>{var b=mo();o(_,b)};ne(_e,{summary:D,children:(_,b)=>{var E=_o(),ye=r(E),Pe=e(e(ye,!0)),Te=e(e(Pe,!0)),De=e(e(Te,!0));x(De,{content:`<script>
	const theme = writable(...);
	const color_scheme = writable(...);
	set_theme(theme);
	set_color_scheme(color_scheme);
<\/script>
<Themed
	selected_theme={theme}
	selected_color_scheme={color_scheme}
/>
<!-- sibling content... -->`}),o(_,E)},$$slots:{default:!0}})}var ve=e(e(O,!0)),he=r(ve);Se(he,{text:"Color scheme",slug:"color-scheme"});var ue=e(e(he,!0)),n=r(ue),d=e(e(n,!0));$e(d,{path:"Web/CSS/color-scheme"});var L=e(e(d,!0));$e(L,{path:"Web/CSS/@media/prefers-color-scheme"});var A=e(e(ue,!0));Wt(A,{});var F=e(e(A,!0));x(F,{content:"import Color_Scheme_Input from '@ryanatkn/fuz/Color_Scheme_Input.svelte';",lang:"ts"});var pe=e(e(F,!0));x(pe,{content:"<Color_Scheme_Input />"});var be=e(e(pe,!0)),fe=e(e(be,!0)),ge=h(()=>`<Color_Scheme_Input
	selected_color_scheme={writable(${l()?"'"+JSON.stringify(l()).replace(/"/gu,"")+"'":"null"})}
/>`);x(fe,{get content(){return t(ge)}});var ze=e(e(fe,!0)),Me=e(e(ze,!0));{var D=_=>{var b=vo();o(_,b)};ne(Me,{summary:D,children:(_,b)=>{var E=ho();o(_,E)},$$slots:{default:!0}})}var Ve=e(e(ve,!0)),Ye=r(Ve);Se(Ye,{text:"Builtin themes",slug:"builtin-themes"});var dt=e(e(Ye,!0)),it=e(e(dt,!0)),mt=r(it);At(mt,{themes:I,enable_editing:!0,onedit:j=>B(M,de(j))});var Ke=e(e(Ve,!0)),Ue=r(Ke);Se(Ue,{text:"Scoped themes",slug:"scoped-themes"});var _t=e(e(Ue,!0));{var D=_=>{var b=uo();o(_,b)};ne(_t,{summary:D,children:(_,b)=>{var E=ko(),ye=y(E),Pe=r(ye),Te=e(e(Pe,!0));x(Te,{content:"import Themed_Scope from '@ryanatkn/fuz/Themed_Scope.svelte';",lang:"ts"});var De=e(e(Te,!0));x(De,{content:`<Themed_Scope {selected_theme}>
		...
</Themed_Scope>`});var yt=e(e(ye,!0)),Ze=r(yt);qe(Ze,69,()=>I,(V,W)=>T(V).name,(V,W,St)=>{var ae=q();const se=h(()=>l()==="light"&&T(W).name===i().name);var We=y(ae),Ae=h(()=>X(T(W))),Be=h(()=>X("light"));rt(We,{get selected_theme(){return t(Ae)},get selected_color_scheme(){return t(Be)},children:(Ne,$t)=>{var ce=go(),R=r(ce);R.__click=[po,z,W,l,m];var Oe=r(R);C(Oe,()=>t(se),Y=>{var K=bo();o(Y,K)},Y=>{var K=fo();o(Y,K)});var le=e(e(R,!0));ie(le,"flex","1");var Ee=e(r(le)),Re=r(Ee);U(()=>{Fe(R,"selected",t(se)),ee(Re,T(W).name)}),o(Ne,ce)},$$slots:{default:!0}}),o(V,ae)});var Tt=e(e(Ze,!0));qe(Tt,69,()=>I,(V,W)=>T(V).name,(V,W,St)=>{var ae=q();const se=h(()=>l()==="dark"&&T(W).name===i().name);var We=y(ae),Ae=h(()=>X(T(W))),Be=h(()=>X("dark"));rt(We,{get selected_theme(){return t(Ae)},get selected_color_scheme(){return t(Be)},children:(Ne,$t)=>{var ce=$o(),R=r(ce);R.__click=[yo,z,W,l,m];var Oe=r(R);C(Oe,()=>t(se),Y=>{var K=To();o(Y,K)},Y=>{var K=So();o(Y,K)});var le=e(e(R,!0));ie(le,"flex","1");var Ee=e(r(le)),Re=r(Ee);U(()=>{Fe(R,"selected",t(se)),ee(Re,T(W).name)}),o(Ne,ce)},$$slots:{default:!0}}),o(V,ae)}),o(_,E)},$$slots:{default:!0}})}var vt=e(e(Ke,!0)),Ge=r(vt);Se(Ge,{text:"Theme usage",slug:"theme-usage"});var ht=e(e(Ge,!0)),ut=e(e(ht,!0)),He=e(e(ut,!0));x(He,{content:`<!-- +layout.svelte -->
<script>
	import '@ryanatkn/moss/style.css';
	import '@ryanatkn/moss/theme.css';
	import Themed from '@ryanatkn/fuz/Themed.svelte';
	import type {Snippet} from 'svelte';

	interface Props {
		children: Snippet;
	}
	
	const {children}: Props = $props();
<script>

<!-- enable theme and color-scheme support -->
<Themed>
	{@render children()}
</Themed>`});var pt=e(e(He,!0)),Qe=e(e(pt,!0));x(Qe,{content:`<Themed {selected_theme} {selected_color_scheme}>
	{@render children()}
</Themed>`});var bt=e(e(Qe,!0)),Xe=e(e(bt,!0)),ft=h(()=>`// get values from the Svelte context provided by
// the nearest \`Themed\` or \`Themed_Scope\` ancestor:

import {get_theme} from '@ryanatkn/fuz/theme.js';
const selected_theme = get_theme();
$selected_theme.name; // '${i().name}'

import {get_color_scheme} from '@ryanatkn/fuz/theme.js';
const selected_color_scheme = get_color_scheme();
$selected_color_scheme; // '${l()}'`);x(Xe,{get content(){return t(ft)},lang:"ts"});var gt=e(e(Xe,!0));{var D=_=>{var b=wo();o(_,b)};ne(gt,{summary:D,children:(_,b)=>{var E=xo();o(_,E)},$$slots:{default:!0}})}o(p,w)},$$slots:{default:!0}});var S=e(N,!0);S.nodeValue="  ";var $=e(S);C($,()=>t(M),p=>{var k=q(),w=y(k);nt(w,{onclose:()=>B(M,null),children:(O,te)=>{var J=Io(),oe=r(J),G=r(oe);so(G,{get theme(){return t(M)},onsave:H=>{console.log("update theme",H),alert("todo")}}),o(O,J)},$$slots:{default:!0}}),o(p,k)}),o(v,P),Ce()}Le(["click"]);export{Kt as S,er as _};
