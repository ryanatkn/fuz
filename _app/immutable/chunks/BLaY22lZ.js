import{P as k,L as S,l as c,aK as _,aL as p,i,k as n,aM as u,u as w}from"./BElm8bt9.js";import{b,r as D}from"./BmMjpz0h.js";import{d as y,k as A}from"./C7GdCpii.js";function g(...o){return b+D(o[0],o[1])}function M(o){const e=Symbol(),r=()=>{const s=S(e);return s===void 0?o?.():s};return{get:s=>{const t=r();if(t===void 0)throw Error(s??"context value is not set");return t},maybe_get:r,set:(s=o?.())=>k(e,s)}}var C=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],E=["difference","intersection","symmetricDifference","union"],v=!1;class l extends Set{#r=new Map;#e=c(0);#s=c(0);#n=p||-1;constructor(e){if(super(),e){for(var r of e)super.add(r);this.#s.v=super.size}v||this.#i()}#t(e){return p===this.#n?c(e):_(e)}#i(){v=!0;var e=l.prototype,r=Set.prototype;for(const s of C)e[s]=function(...t){return i(this.#e),r[s].apply(this,t)};for(const s of E)e[s]=function(...t){i(this.#e);var a=r[s].apply(this,t);return new l(a)}}has(e){var r=super.has(e),s=this.#r,t=s.get(e);if(t===void 0){if(!r)return i(this.#e),!1;t=this.#t(!0),s.set(e,t)}return i(t),r}add(e){return super.has(e)||(super.add(e),n(this.#s,super.size),u(this.#e)),this}delete(e){var r=super.delete(e),s=this.#r,t=s.get(e);return t!==void 0&&(s.delete(e),n(t,!1)),r&&(n(this.#s,super.size),u(this.#e)),r}clear(){if(super.size!==0){super.clear();var e=this.#r;for(var r of e.values())n(r,!1);e.clear(),n(this.#s,0),u(this.#e)}}keys(){return this.values()}values(){return i(this.#e),super.values()}entries(){return i(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return i(this.#s)}}class O extends Map{#r=new Map;#e=c(0);#s=c(0);#n=p||-1;constructor(e){if(super(),e){for(var[r,s]of e)super.set(r,s);this.#s.v=super.size}}#t(e){return p===this.#n?c(e):_(e)}has(e){var r=this.#r,s=r.get(e);if(s===void 0){var t=super.get(e);if(t!==void 0)s=this.#t(0),r.set(e,s);else return i(this.#e),!1}return i(s),!0}forEach(e,r){this.#i(),super.forEach(e,r)}get(e){var r=this.#r,s=r.get(e);if(s===void 0){var t=super.get(e);if(t!==void 0)s=this.#t(0),r.set(e,s);else{i(this.#e);return}}return i(s),super.get(e)}set(e,r){var s=this.#r,t=s.get(e),a=super.get(e),f=super.set(e,r),h=this.#e;if(t===void 0)t=this.#t(0),s.set(e,t),n(this.#s,super.size),u(h);else if(a!==r){u(t);var d=h.reactions===null?null:new Set(h.reactions),z=d===null||!t.reactions?.every(x=>d.has(x));z&&u(h)}return f}delete(e){var r=this.#r,s=r.get(e),t=super.delete(e);return s!==void 0&&(r.delete(e),n(this.#s,super.size),n(s,-1),u(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#r;n(this.#s,0);for(var r of e.values())n(r,-1);u(this.#e),e.clear()}}#i(){i(this.#e);var e=this.#r;if(this.#s.v!==e.size){for(var r of super.keys())if(!e.has(r)){var s=this.#t(0);e.set(r,s)}}for([,s]of this.#r)i(s)}keys(){return i(this.#e),super.keys()}values(){return this.#i(),super.values()}entries(){return this.#i(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return i(this.#s),super.size}}const m="/docs",P=g("/docs"),I=P+"/api";let L=0;const T=()=>L++,K=(o,e,r=m)=>{const s=e.split("/").at(-1);return{path:g(y(A(r,"/"),"/")+o),path_is_selected:s===o,path_segment:s}},U=M(()=>new H);class H{root_path;links=new O;#r=new Map;#e=0;#s=w(()=>{const e=Array.from(this.links.values());return e.sort((r,s)=>r.order-s.order),e});get docs_links(){return i(this.#s)}set docs_links(e){n(this.#s,e)}slugs_onscreen=new l;constructor(e=m){this.root_path=e}add(e,r,s,t){const a="docs_link_"+this.#e++,f=`${s}#${e}`,h=this.#r.get(f),d=h??T();return h===void 0&&this.#r.set(f,d),this.links.set(a,{id:a,slug:e,text:r,tag:t,order:d}),a}remove(e){this.links.delete(e)}}export{I as D,m as a,P as b,M as c,U as d,g as r,K as t};
