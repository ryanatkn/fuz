import{a as o,t as c,c as r,s as e,b as J,f as y}from"./disclose-version.8cXmPj91.js";import{g as t,n as A,F as Z,p as xe,t as Y,a as Ce,a4 as T,d as h,J as $t}from"./runtime.tEJefHBO.js";import{d as Le,s as ee,f as St}from"./render.C1K3rtSi.js";import{p as de}from"./proxy.DYJKBxXC.js";import{i as C}from"./if.CTp5gYEz.js";import{e as Re}from"./each.D9qf_eYe.js";import{t as je}from"./class.C2cUJUDZ.js";import{s as ie}from"./style.iv2mhl8q.js";import{u as ot,s as we,a as Fe}from"./store.D_tGndAz.js";import{w as X,g as Xe}from"./index.CosmF22N.js";import{C as x}from"./Code.BzCvvdEf.js";import{r as rt,a as at,g as st,s as kt,b as wt,e as xt,d as Ct,f as It}from"./Themed.2bECXhBk.js";import{T as zt}from"./Tome_Detail.Dh6A_FIj.js";import{D as ne}from"./Details.DAFl6QE4.js";import{s as Ze,D as ct}from"./Dialog.B38fTjfo.js";import{g as Pt}from"./tome.BiCC_aSq.js";import{C as Mt,T as Dt}from"./Theme_Input.CqtZ2eut.js";import{T as $e}from"./Tome_Subheading.CZpUcrxS.js";import{r as qe,f as et,d as Wt,s as At}from"./attributes.giDdLxsX.js";import{b as Bt}from"./input.Bm1DNmdC.js";import{p as ke}from"./props.B6XUCPZJ.js";import{M as Se}from"./Mdn_Link.DEGtUVRD.js";import{h as Nt}from"./html.D4dA1Dsq.js";import{e as Ot}from"./svelte-element.CMlKS2F6.js";const Et=async(v,s,a,i)=>{A(s,!1),A(a,!1);try{await navigator.clipboard.writeText(i.text)}catch{A(a,!0);return}A(s,!0)};var Jt=c('<small class="svelte-1y2zubh">copied!</small>'),Rt=c('<small class="svelte-1y2zubh">failed</small>'),jt=c('<div class="copy_to_clipboard svelte-1y2zubh"><button type="button" class="icon_button">üìã</button> <!> <!></div>');function qt(v,s){let a=Z(!1),i=Z(!1);var l=jt(),b=r(l);b.__click=[Et,a,i,s],ie(b,"font-size","var(--size_lg)");var p=e(e(b,!0));C(p,()=>t(a),g=>{var m=Jt();ie(m,"color","var(--color_b_5)"),o(g,m)});var I=e(e(p,!0));C(I,()=>t(i),g=>{var m=Rt();ie(m,"color","var(--color_c_5)"),o(g,m)}),o(v,l)}Le(["click"]);var Lt=c("<blockquote> </blockquote>"),Ft=c('<div class="variable svelte-11ggo28"><div class="name svelte-11ggo28"><code> </code></div> <!> <label><div class="title">light</div> <input disabled></label> <label><div class="title">dark</div> <input disabled></label></div>');function Vt(v,s){xe(s,!0);var a=J(),i=y(a);C(i,()=>s.variable,l=>{var b=Ft(),p=r(b),I=r(p),g=r(I),m=e(e(p,!0));C(m,()=>s.variable.summary,f=>{var k=Lt(),w=r(k);Y(()=>ee(w,s.variable.summary)),o(f,k)});var z=e(e(m,!0)),P=r(z),M=e(e(P,!0));qe(M);var B=e(e(z,!0)),$=r(B),S=e(e($,!0));qe(S),Y(()=>{ee(g,`--${s.variable.name??""}`),et(M,s.variable.light??""),et(S,s.variable.dark??"")}),o(l,b)}),o(v,a),Ce()}const Yt=(v,s,a,i)=>{var l;t(s)&&((l=a.onsave)==null||l.call(a,t(i)))},Gt=(v,s)=>{s(v),alert("TODO")};var Ht=c("edit",1),Kt=c("create",1),Qt=c("save changes",1),Ut=c("create theme",1),Xt=(v,s,a)=>s(v,T(a)),Zt=c('<button type="button" class="variable menu_item svelte-cno0i6"> </button>'),eo=c('<div class="copy svelte-cno0i6"><!></div> <!>',1),to=c('<div class="pane"><div class="panel p_lg box"><!> <aside>‚ö†Ô∏è This is unfinished and will change.</aside> <button>ok</button></div></div>'),oo=c(`<div class="theme_form svelte-cno0i6"><h2 class="text_align_center"><!> theme</h2> <aside>Creating and editing themes at runtime is a work in progress, but you can click around to see
		where it's going!</aside> <header class="svelte-cno0i6"><div class="variables_header svelte-cno0i6"><p> </p> <button type="button" class="w_100" disabled>add a variable</button></div> <form class="svelte-cno0i6"><label><div class="title">name</div> <input placeholder=">"></label> <button type="button"><!></button></form></header> <div class="content svelte-cno0i6"><div class="variables svelte-cno0i6"></div> <div class="rendered svelte-cno0i6"><!></div></div></div> <!>`,1);function ro(v,s){xe(s,!0);const a=ke(s,"theme",3,null);let i=Z(de(a()?a().name:"new theme")),l=Z(de(a()?a().variables:[]));const b=h(()=>({name:t(i),variables:t(l)})),p=h(()=>rt(t(b),{empty_default_theme:!1,specificity:1})),I=h(()=>t(l).reduce((n,d)=>d.light?n+1:n,0)),g=h(()=>t(l).reduce((n,d)=>d.dark?n+1:n,0));let m=Z(null);const z=(n,d)=>{Ze(n),A(m,de(d)),A(l,de(t(l).slice()))},P=h(()=>!!a()),M=h(()=>a()?t(i)!==a().name||t(l)!==a().variables:!0);var B=oo(),$=y(B),S=r($),f=r(S);C(f,()=>t(P),n=>{var d=Ht();o(n,d)},n=>{var d=Kt();o(n,d)});var k=e(e(S,!0)),w=e(e(k,!0)),N=r(w),G=r(N),H=r(G),K=e(e(G,!0));K.__click=[Gt,Ze];var te=e(e(N,!0)),Q=r(te),me=r(Q),oe=e(e(me,!0));qe(oe);var U=e(e(Q,!0));U.__click=[Yt,M,s,b];var Ie=r(U);C(Ie,()=>t(P),n=>{var d=Qt();o(n,d)},n=>{var d=Ut();o(n,d)});var _e=e(e(w,!0)),re=r(_e);Re(re,77,()=>t(l),(n,d)=>T(n).name,(n,d,R)=>{var O=Zt();O.__click=[Xt,z,d];var q=r(O);Y(()=>ee(q,`--${T(d).name??""}`)),o(n,O)});var ve=e(e(re,!0)),ze=r(ve);C(ze,()=>t(p),n=>{var d=eo(),R=y(d),O=r(R);qt(O,{get text(){return t(p)}});var q=e(e(R,!0));x(q,{get content(){return t(p)},lang:"css"}),o(n,d)});var he=e(e($,!0));C(he,()=>t(m),n=>{var d=J(!0),R=y(d);ct(R,{onclose:()=>A(m,null),children:(q,ue=$t)=>{var pe=to(),Pe=r(pe),fe=r(Pe);Vt(fe,{get variable(){return t(m)}});var be=e(e(fe,!0)),ge=e(e(be,!0));ge.__click=ue(),o(q,pe)}}),o(n,d)}),Y(()=>{ee(H,`variables: ${t(I)??""} light, ${t(g)??""} dark`),U.disabled=!t(M)}),Bt(oe,()=>t(i),n=>A(i,n)),o(v,B),Ce()}Le(["click"]);let ao=0;function tt(v,s){xe(s,!0);const a={};ot(a);const i=()=>we(b(),"$selected_theme",a),l=()=>we(p(),"$selected_color_scheme",a),b=ke(s,"selected_theme",11,()=>X(Xe(at()))),p=ke(s,"selected_color_scheme",11,()=>X(Xe(st()))),I=ke(s,"tagName",3,"div"),g="themed_"+ao++;kt(b()),wt(p());const m=h(()=>rt(i(),{id:g,empty_default_theme:!1})),z=h(()=>t(m)?xt(t(m)):null),P=h(()=>l()==="dark"||l()==="light"?l():matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");var M=J();St($=>{var S=J(),f=y(S);C(f,()=>t(z),k=>{var w=J(),N=y(w);Nt(N,()=>t(z),!1,!1),o(k,w)}),o($,S)});var B=y(M);Ot(B,I,!1,($,S)=>{Wt($,null,{id:g,class:"themed"},""),Y(()=>je($,"dark",t(P)==="dark"));var f=J(),k=y(f);At(k,()=>s.children,()=>g,()=>t(m),()=>t(z),b,p),o(S,f)}),o(v,M),Ce()}var so=c("CSS custom properties",1),co=c("Why the singleton?",1),lo=c(`<aside><p>By default <code>Themed</code> syncs its settings to the global <code>:root</code> tag and
					persists to <code>localStorage</code>.</p> <p>These behaviors can be customized with its props:</p> <ul><li><code>sync_color_scheme</code></li> <li><code>load_color_scheme</code></li> <li><code>save_color_scheme</code></li> <li><code>load_theme</code></li> <li><code>save_theme</code></li></ul> <p>See <code>Themed_Scope</code> below to theme one branch of the DOM tree.</p></aside>`),no=c("Why nested children?",1),io=c(`<aside><p><code>Themed</code> is designed to wrap every page at the top level so it can provide the
					selected theme and color scheme in the Svelte context. It works without children, but <code>get_theme</code> and <code>get_color_scheme</code> will fail unless you call <code>set_theme</code> and <code>set_color_scheme</code> yourself.</p> <p>These context helpers provide the <code>writable</code> stores to your code, and they also
					reduce boilerplate in the helper components documented below.</p> <p>If you set stores in context manually, they must be the same references as the <code>Themed</code> props:</p> <!></aside>`),mo=c("More about <code>Color_Scheme_Input</code>",1),_o=c(`<aside><p><code>Color_Scheme_Input</code> enables users to choose and persist the color scheme without
					boilerplate.</p> <p>By default, <code>Color_Scheme_Input</code> works with <code>Themed</code> to save the
					user's preference to <code>localStorage</code>. To customize this behavior, pass a custom <code>selected_color_scheme</code> or <code>select</code> function prop.</p></aside>`),vo=c(`‚ö†Ô∏è Scoped themes are a work in progress and may not be supported depending
				on complexity. It shouldn't worsen the unscoped API.`,1),ho=(v,s,a,i,l)=>{s(T(a)),Fe(l,"light")},uo=c("‚òÖ",1),po=c("‚òÜ",1),fo=c('<div class="box row p_sm"><button type="button" class="icon_button"><!></button> <div class="p_md">the <code> </code> theme</div></div>'),bo=(v,s,a,i,l)=>{s(T(a)),Fe(l,"dark")},go=c("‚òÖ",1),yo=c("‚òÜ",1),To=c('<div class="box row p_sm"><button type="button" class="icon_button"><!></button> <div class="p_md">the <code> </code> theme</div></div>'),$o=c('<div class="mb_lg"><p>Scope a theme to one branch of the DOM tree with <code>Themed_Scope</code>:</p> <!> <!></div> <div><!> <!></div>',1),So=c("More about <code>Themed</code>",1),ko=c(`<aside><p><code>Themed</code> initializes the system's theme support. Without it, the page will not
					reflect the user's system <code>color-scheme</code>. By default, <code>Themed</code> applies the base theme to the
					root of the page via <code>create_theme_setup_script</code>. It uses JS to add the <code>.dark</code> CSS class to the <code>:root</code> element.</p> <p>This strategy enables color scheme and theme support with minimal CSS and optimal
					performance for most use cases. The system supports plain CSS usage that can be static or
					dynamic, scoped or global, or imported at buildtime or runtime. It also allows runtime
					access to the data if you want to pay the performance costs.</p> <p>The theme setup script interacts with <code>sync_color_scheme</code> to save the user's
					preference to <code>localStorage</code>. See also <code>Color_Scheme_Input</code>.</p> <p>The setup script avoids flash-on-load due to color scheme, but currently themes flash in
					after loading. We'll try to fix this when the system stabilizes.</p></aside>`),wo=c(`<section class="theme"><p><code>Themed</code> adds global support for both the browser's <!> and custom themes based on <a href="https://moss.ryanatkn.com/library/variables">Moss style variables</a>, which use <!>. <code>Themed</code> is a singleton component that's mounted at the top-level of the page:</p> <!> <!> <!> <!></section> <section class="theme"><!> <p><code>Themed</code> defaults to automatic <!> detection with <!>, and users can also set it directly:</p> <!> <!> <!> <p>Pass a prop to override the default:</p> <!> <p>The builtin themes support both dark and light color schemes. Custom themes may support one or
			both color schemes.</p> <!></section> <section class="theme"><!> <p>A theme is a simple JSON collection of <a href="https://moss.ryanatkn.com/library/variables">Moss style variables</a> that can be transformed into CSS that set custom properties. Each variable can have values for
			light and/or dark color schemes. In other words, "dark" isn't a theme, it's a mode that any theme
			can implement.</p> <div class="width_sm mb_lg"><!></div> <aside>The builtin themes need more work, but the proof of concept is ready!</aside></section> <section class="theme"><!> <!></section> <section class="theme"><!> <p>Themes are plain CSS that can be sourced in a variety of ways.</p> <p>To use fuz's base theme:</p> <!> <p><code>Themed</code> can be customized with the nonreactive, bindable, writable store props <code>selected_theme</code> and <code>selected_color_scheme</code>:</p> <!> <p><code>Themed</code> sets the writable stores <code>selected_theme</code> and <code>selected_color_scheme</code> in the Svelte context:</p> <!> <!></section>`,1),xo=c('<div class="pane"><div class="theme_editor_wrapper panel svelte-1io66l"><!></div></div>'),Co=c("<!> <!>",5);function Xo(v,s){xe(s,!0);const a={};ot(a);const i=()=>we(g,"$selected_theme",a),l=()=>we(m,"$selected_color_scheme",a),p=Pt("Themed"),I=Ct.slice(),g=at(),m=st(),z=f=>{Fe(g,f),It(f)};let P=Z(null);var M=Co(),B=y(M);zt(B,{tome:p,children:(f,k)=>{var w=wo(),N=y(w),G=r(N),H=r(G),K=e(e(H,!0));Se(K,{href:"Web/CSS/color-scheme"});var te=e(e(K,!0)),Q=e(e(te,!0));Se(Q,{href:"Web/CSS/--*",children:(j,_)=>{var u=so();o(j,u)},$$slots:{default:!0}});var me=e(e(G,!0));x(me,{content:"import Themed from '@ryanatkn/fuz/Themed.svelte';",lang:"ts"});var oe=e(e(me,!0));x(oe,{content:`<!-- +layout.svelte -->
<Themed>
	{@render children()}
</Themed>`});var U=e(e(oe,!0));ne(U,{summary:_=>{var u=co();o(_,u)},children:(_,u)=>{var D=lo();o(_,D)},$$slots:{default:!0}});var Ie=e(e(U,!0));ne(Ie,{summary:_=>{var u=no();o(_,u)},children:(_,u)=>{var D=io(),ye=r(D),Me=e(e(ye,!0)),Te=e(e(Me,!0)),De=e(e(Te,!0));x(De,{content:`<script>
	const theme = writable(...);
	const color_scheme = writable(...);
	set_theme(theme);
	set_color_scheme(color_scheme);
<\/script>
<Themed
	selected_theme={theme}
	selected_color_scheme={color_scheme}
/>
<!-- sibling content... -->`}),o(_,D)},$$slots:{default:!0}});var _e=e(e(N,!0)),re=r(_e);$e(re,{text:"Color scheme",slug:"color-scheme"});var ve=e(e(re,!0)),ze=r(ve),he=e(e(ze,!0));Se(he,{href:"Web/CSS/color-scheme"});var n=e(e(he,!0));Se(n,{href:"Web/CSS/@media/prefers-color-scheme"});var d=e(e(ve,!0));Mt(d,{});var R=e(e(d,!0));x(R,{content:"import Color_Scheme_Input from '@ryanatkn/fuz/Color_Scheme_Input.svelte';",lang:"ts"});var O=e(e(R,!0));x(O,{content:"<Color_Scheme_Input />"});var q=e(e(O,!0)),ue=e(e(q,!0)),pe=h(()=>`<Color_Scheme_Input
	selected_color_scheme={writable(${l()?"'"+JSON.stringify(l()).replace(/"/gu,"")+"'":"null"})}
/>`);x(ue,{get content(){return t(pe)}});var Pe=e(e(ue,!0)),fe=e(e(Pe,!0));ne(fe,{summary:_=>{var u=mo();o(_,u)},children:(_,u)=>{var D=_o();o(_,D)},$$slots:{default:!0}});var be=e(e(_e,!0)),ge=r(be);$e(ge,{text:"Builtin themes",slug:"builtin-themes"});var lt=e(e(ge,!0)),nt=e(e(lt,!0)),dt=r(nt);Dt(dt,{themes:I,enable_editing:!0,onedit:j=>A(P,de(j))});var Ve=e(e(be,!0)),Ye=r(Ve);$e(Ye,{text:"Scoped themes",slug:"scoped-themes"});var it=e(e(Ye,!0));ne(it,{summary:_=>{var u=vo();o(_,u)},children:(_,u)=>{var D=$o(),ye=y(D),Me=r(ye),Te=e(e(Me,!0));x(Te,{content:"import Themed_Scope from '@ryanatkn/fuz/Themed_Scope.svelte';",lang:"ts"});var De=e(e(Te,!0));x(De,{content:`<Themed_Scope {selected_theme}>
		...
</Themed_Scope>`});var bt=e(e(ye,!0)),Ue=r(bt);Re(Ue,69,()=>I,(L,W)=>T(L).name,(L,W,yt)=>{var ae=J(!0);const se=h(()=>l()==="light"&&T(W).name===i().name);var We=y(ae),Ae=h(()=>X(T(W))),Be=h(()=>X("light"));tt(We,{get selected_theme(){return t(Ae)},get selected_color_scheme(){return t(Be)},children:(Ne,Tt)=>{var ce=fo(),E=r(ce);E.__click=[ho,z,W,l,m];var Oe=r(E);C(Oe,()=>t(se),F=>{var V=uo();o(F,V)},F=>{var V=po();o(F,V)});var le=e(e(E,!0));ie(le,"flex","1");var Ee=e(r(le)),Je=r(Ee);Y(()=>{je(E,"selected",t(se)),ee(Je,T(W).name)}),o(Ne,ce)},$$slots:{default:!0}}),o(L,ae)});var gt=e(e(Ue,!0));Re(gt,69,()=>I,(L,W)=>T(L).name,(L,W,yt)=>{var ae=J(!0);const se=h(()=>l()==="dark"&&T(W).name===i().name);var We=y(ae),Ae=h(()=>X(T(W))),Be=h(()=>X("dark"));tt(We,{get selected_theme(){return t(Ae)},get selected_color_scheme(){return t(Be)},children:(Ne,Tt)=>{var ce=To(),E=r(ce);E.__click=[bo,z,W,l,m];var Oe=r(E);C(Oe,()=>t(se),F=>{var V=go();o(F,V)},F=>{var V=yo();o(F,V)});var le=e(e(E,!0));ie(le,"flex","1");var Ee=e(r(le)),Je=r(Ee);Y(()=>{je(E,"selected",t(se)),ee(Je,T(W).name)}),o(Ne,ce)},$$slots:{default:!0}}),o(L,ae)}),o(_,D)},$$slots:{default:!0}});var mt=e(e(Ve,!0)),Ge=r(mt);$e(Ge,{text:"Theme usage",slug:"theme-usage"});var _t=e(e(Ge,!0)),vt=e(e(_t,!0)),He=e(e(vt,!0));x(He,{content:`<!-- +layout.svelte -->
<script>
	import '@ryanatkn/moss/style.css';
	import '@ryanatkn/moss/theme.css';
	import Themed from '@ryanatkn/fuz/Themed.svelte';
	import type {Snippet} from 'svelte';

	interface Props {
		children: Snippet;
	}
	
	const {children}: Props = $props();
<script>

<!-- enable theme and color-scheme support -->
<Themed>
	{@render children()}
</Themed>`});var ht=e(e(He,!0)),Ke=e(e(ht,!0));x(Ke,{content:`<Themed {selected_theme} {selected_color_scheme}>
	{@render children()}
</Themed>`});var ut=e(e(Ke,!0)),Qe=e(e(ut,!0)),pt=h(()=>`// get values from the Svelte context provided by
// the nearest \`Themed\` or \`Themed_Scope\` ancestor:

import {get_theme} from '@ryanatkn/fuz/theme.js';
const selected_theme = get_theme();
$selected_theme.name; // '${i().name}'

import {get_color_scheme} from '@ryanatkn/fuz/theme.js';
const selected_color_scheme = get_color_scheme();
$selected_color_scheme; // '${l()}'`);x(Qe,{get content(){return t(pt)},lang:"js"});var ft=e(e(Qe,!0));ne(ft,{summary:_=>{var u=So();o(_,u)},children:(_,u)=>{var D=ko();o(_,D)},$$slots:{default:!0}}),o(f,w)},$$slots:{default:!0}});var $=e(B,!0);$.nodeValue="  ";var S=e($);C(S,()=>t(P),f=>{var k=J(!0),w=y(k);ct(w,{onclose:()=>A(P,null),children:(N,G)=>{var H=xo(),K=r(H),te=r(K);ro(te,{get theme(){return t(P)},onsave:Q=>{console.log("update theme",Q),alert("todo")}}),o(N,H)},$$slots:{default:!0}}),o(f,k)}),o(v,M),Ce()}Le(["click"]);export{Vt as S,Xo as _};
