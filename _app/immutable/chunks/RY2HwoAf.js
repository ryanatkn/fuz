import{af as h,au as _,b7 as p,h as i,ae as n,av as a,u as k}from"./B7qs8f6Z.js";import{r as w}from"./BqnfoaoX.js";import{c as x,f as S,g as b}from"./GCAAGpmM.js";var D=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],M=["difference","intersection","symmetricDifference","union"],v=!1;class l extends Set{#r=new Map;#e=h(0);#s=h(0);#n=p||-1;constructor(e){if(super(),e){for(var r of e)super.add(r);this.#s.v=super.size}v||this.#i()}#t(e){return p===this.#n?h(e):_(e)}#i(){v=!0;var e=l.prototype,r=Set.prototype;for(const s of D)e[s]=function(...t){return i(this.#e),r[s].apply(this,t)};for(const s of M)e[s]=function(...t){i(this.#e);var o=r[s].apply(this,t);return new l(o)}}has(e){var r=super.has(e),s=this.#r,t=s.get(e);if(t===void 0){if(!r)return i(this.#e),!1;t=this.#t(!0),s.set(e,t)}return i(t),r}add(e){return super.has(e)||(super.add(e),n(this.#s,super.size),a(this.#e)),this}delete(e){var r=super.delete(e),s=this.#r,t=s.get(e);return t!==void 0&&(s.delete(e),n(t,!1)),r&&(n(this.#s,super.size),a(this.#e)),r}clear(){if(super.size!==0){super.clear();var e=this.#r;for(var r of e.values())n(r,!1);e.clear(),n(this.#s,0),a(this.#e)}}keys(){return this.values()}values(){return i(this.#e),super.values()}entries(){return i(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return i(this.#s)}}class y extends Map{#r=new Map;#e=h(0);#s=h(0);#n=p||-1;constructor(e){if(super(),e){for(var[r,s]of e)super.set(r,s);this.#s.v=super.size}}#t(e){return p===this.#n?h(e):_(e)}has(e){var r=this.#r,s=r.get(e);if(s===void 0){var t=super.get(e);if(t!==void 0)s=this.#t(0),r.set(e,s);else return i(this.#e),!1}return i(s),!0}forEach(e,r){this.#i(),super.forEach(e,r)}get(e){var r=this.#r,s=r.get(e);if(s===void 0){var t=super.get(e);if(t!==void 0)s=this.#t(0),r.set(e,s);else{i(this.#e);return}}return i(s),super.get(e)}set(e,r){var s=this.#r,t=s.get(e),o=super.get(e),f=super.set(e,r),u=this.#e;if(t===void 0)t=this.#t(0),s.set(e,t),n(this.#s,super.size),a(u);else if(o!==r){a(t);var d=u.reactions===null?null:new Set(u.reactions),m=d===null||!t.reactions?.every(z=>d.has(z));m&&a(u)}return f}delete(e){var r=this.#r,s=r.get(e),t=super.delete(e);return s!==void 0&&(r.delete(e),n(this.#s,super.size),n(s,-1),a(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#r;n(this.#s,0);for(var r of e.values())n(r,-1);a(this.#e),e.clear()}}#i(){i(this.#e);var e=this.#r;if(this.#s.v!==e.size){for(var r of super.keys())if(!e.has(r)){var s=this.#t(0);e.set(r,s)}}for([,s]of this.#r)i(s)}keys(){return i(this.#e),super.keys()}values(){return this.#i(),super.values()}entries(){return this.#i(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return i(this.#s),super.size}}const g="/docs";let A=0;const E=()=>A++,T=(c,e,r=g)=>{const s=e.split("/").at(-1);return{path:w(S(b(r,"/"),"/")+c),path_is_selected:s===c,path_segment:s}},$=x(()=>new L);class L{root_path;links=new y;#r=new Map;#e=0;#s=k(()=>{const e=Array.from(this.links.values());return e.sort((r,s)=>r.order-s.order),e});get docs_links(){return i(this.#s)}set docs_links(e){n(this.#s,e)}slugs_onscreen=new l;constructor(e=g){this.root_path=e}add(e,r,s,t){const o="docs_link_"+this.#e++,f=`${s}#${e}`,u=this.#r.get(f),d=u??E();return u===void 0&&this.#r.set(f,d),this.links.set(o,{id:o,slug:e,text:r,tag:t,order:d}),o}remove(e){this.links.delete(e)}}export{g as D,$ as d,T as t};
