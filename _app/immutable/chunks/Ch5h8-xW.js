import{t as p,a as m,c as z,j as B}from"./CV4FwyaA.js";import{p as k,X as g,a as T,Z as h,_ as u,f as S,s as F}from"./D0mNtKt1.js";import{s as G}from"./TnscAVDV.js";import{a as I,s as J,i as K}from"./DLPlRC8e.js";import{s as H,a as y,C as M}from"./nLiBoCGh.js";import{e as N}from"./Dr7dfqYn.js";import{p as O}from"./BonTfi2d.js";import{o as P}from"./DYBLuwFO.js";import{p as Q}from"./BxWLUYbf.js";import{b as R}from"./C_VtBflI.js";import{s as U}from"./QeaNnfvq.js";import{a as V,i as W,H as Y}from"./B3xrczOP.js";import{c as $}from"./CoNyNLDF.js";import{d as C}from"./DEvj4Q6-.js";const j=$();var ee=p("<section><!></section>");function pe(f,e){k(e,!0);const _=C.get();let s;j.set(t=>{s=t});var a=ee();let i;var n=h(a);H(n,()=>e.children),u(a),V(a,(t,d)=>{var o;return(o=W)==null?void 0:o(t,d)},()=>({intersecting:t})=>{s&&(t?_.slugs_onscreen.add(s):_.slugs_onscreen.delete(s))}),g(()=>i=y(a,i,{...e.attrs})),m(f,a),T()}let te=0;var ae=p("<div><!></div> <!>",1),se=p("<header><!></header>");function xe(f,e){k(e,!0);const[_,s]=J(),a=()=>I(Q,"$page",_),i=O(e,"tag",3,"h3"),n=U(e.text),t=j.get();if(!t)throw Error("Tome_Section_Header must be a child of Tome_Section");t(n);const d="tome_section_header_"+te++,o=C.get();a().url.pathname!==R+o.root_path&&(o.add(d,e.text,n,i()),P(()=>{o.remove(d)}));var l=se(),w=h(l);N(w,i,!1,(A,D)=>{let x;g(()=>x=y(A,x,{...e.attrs,[M]:{tome_section_header:!0}},"svelte-3vtdd8"));var b=ae(),v=S(b),E=h(v);{var L=r=>{var c=z(),q=S(c);H(q,()=>e.children),m(r,c)},X=r=>{var c=B();g(()=>G(c,e.text)),m(r,c)};K(E,r=>{e.children?r(L):r(X,!1)})}u(v);var Z=F(v,2);Y(Z,{slug:n}),m(D,b)}),u(l),m(f,l),T(),s()}export{pe as T,xe as a};
