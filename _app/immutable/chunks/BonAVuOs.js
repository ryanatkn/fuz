import{t as p,a as c,c as z,j as B}from"./ZFNbJ4mV.js";import{p as k,X as g,a as y,Z as h,_ as u,f as S,s as F}from"./C1MeiME0.js";import{s as G}from"./JsoYPy0X.js";import{a as I,s as J,i as K}from"./D20ub3TI.js";import{s as T,a as H,C as M}from"./D7_k7eAj.js";import{e as N}from"./D7m71n1Z.js";import{p as O}from"./BTdXiiDx.js";import{o as P}from"./tgW9DRyS.js";import{p as Q}from"./DlXz50Kf.js";import{b as R}from"./BoUafn9S.js";import{s as U}from"./QeaNnfvq.js";import{a as V,i as W,H as Y}from"./CxR1ISRa.js";import{c as $}from"./JaLCTAlu.js";import{l as C}from"./By3vBf1W.js";const j=$();var ee=p("<section><!></section>");function pe(d,e){k(e,!0);const _=C.get();let r;j.set(t=>{r=t});var a=ee();let i;var n=h(a);T(n,()=>e.children),u(a),V(a,(t,l)=>{var s;return(s=W)==null?void 0:s(t,l)},()=>({intersecting:t})=>{r&&(t?_.slugs_onscreen.add(r):_.slugs_onscreen.delete(r))}),g(()=>i=H(a,i,{...e.attrs})),c(d,a),y()}let te=0;var ae=p("<div><!></div> <!>",1),re=p("<header><!></header>");function be(d,e){k(e,!0);const[_,r]=J(),a=()=>I(Q,"$page",_),i=O(e,"tag",3,"h3"),n=U(e.text),t=j.get();if(!t)throw Error("Tome_Section_Header must be a child of Tome_Section");t(n);const l="tome_section_header_"+te++,s=C.get();a().url.pathname!==R+s.root_path&&(s.add(l,e.text,n,i()),P(()=>{s.remove(l)}));var f=re(),w=h(f);N(w,i,!1,(A,D)=>{let b;g(()=>b=H(A,b,{...e.attrs,[M]:{tome_section_header:!0}},"svelte-3vtdd8"));var x=ae(),v=S(x),E=h(v);{var L=o=>{var m=z(),q=S(m);T(q,()=>e.children),c(o,m)},X=o=>{var m=B();g(()=>G(m,e.text)),c(o,m)};K(E,o=>{e.children?o(L):o(X,!1)})}u(v);var Z=F(v,2);Y(Z,{slug:n}),c(D,x)}),u(f),c(d,f),y(),r()}export{pe as T,be as a};
