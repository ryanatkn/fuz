import{a as o,t as c,c as r,s as e,b as L,f as y}from"./disclose-version.Ddj0amtR.js";import{a as me,g as t,p as _e,m as A,F as Z,r as Y,$ as T,d as h}from"./runtime.N2A2yyIi.js";import{d as Fe,s as ee,a as $e,h as St}from"./render.UwBO_r64.js";import{i as C}from"./if.UhUuT2rm.js";import{e as je}from"./each.CWSUAFwf.js";import{t as qe}from"./class.BOV0QPCC.js";import{s as ie}from"./style.CN5pMWL6.js";import{u as ot,s as Ie,a as Ve}from"./store.CYQVc-MD.js";import{p as de}from"./proxy.Dw-yJxJX.js";import{w as X,g as Ze}from"./index.D6XVrNcu.js";import{C as $}from"./Code.DLdTgamv.js";import{r as rt,a as at,g as st,s as kt,b as wt,e as xt,d as $t,f as Ct}from"./Themed.h0CwaoVk.js";import{T as It}from"./Tome_Detail.CI82q6jH.js";import{D as le}from"./Details.D7hO9GqZ.js";import{s as et,D as ct}from"./Dialog.BJ7uh4hk.js";import{g as zt}from"./tome.60teOZbE.js";import{C as Dt,T as Mt}from"./Theme_Input.CThZzfiW.js";import{T as we}from"./Tome_Subheading.B4Cwzsdw.js";import{n as Pt}from"./utils.BSJX-nVd.js";import{r as Je,c as Wt,s as At}from"./attributes.aBPS3tII.js";import{b as Bt}from"./input.BHADLuGw.js";import{p as Ce}from"./props.CB8TrldN.js";import{M as xe}from"./Mdn_Link.BdJRFzGf.js";import{h as Nt}from"./html.CA-3xdut.js";import{e as Ot}from"./svelte-element.B5YHMADK.js";const Et=async(v,a,s,i)=>{A(a,!1),A(s,!1);try{await navigator.clipboard.writeText(i.text)}catch{A(s,!0);return}A(a,!0)};var Lt=c('<small class="svelte-1y2zubh">copied!</small>'),Rt=c('<small class="svelte-1y2zubh">failed</small>'),jt=c('<div class="copy_to_clipboard svelte-1y2zubh"><button type="button" class="icon_button">üìã</button> <!> <!></div>');function qt(v,a){me(a,!0);let s=Z(!1),i=Z(!1);var n=jt(),b=r(n);b.__click=[Et,s,i,a],ie(b,"font-size","var(--size_lg)");var p=e(e(b,!0));C(p,()=>t(s),g=>{var m=Lt();ie(m,"color","var(--color_b_5)"),o(g,m)});var I=e(e(p,!0));C(I,()=>t(i),g=>{var m=Rt();ie(m,"color","var(--color_c_5)"),o(g,m)}),o(v,n),_e()}Fe(["click"]);var Jt=c("<blockquote> </blockquote>"),Ft=c('<div class="variable svelte-11ggo28"><div class="name svelte-11ggo28"><code> </code></div> <!> <label><div class="title">light</div> <input disabled></label> <label><div class="title">dark</div> <input disabled></label></div>');function Vt(v,a){me(a,!0);var s=L(),i=y(s);C(i,()=>a.variable,n=>{var b=Ft(),p=r(b),I=r(p),g=r(I),m=e(e(p,!0));C(m,()=>a.variable.summary,f=>{var w=Jt(),x=r(w);Y(()=>ee(x,a.variable.summary)),o(f,w)});var z=e(e(m,!0)),D=r(z),M=e(e(D,!0));Je(M);var B=e(e(z,!0)),S=r(B),k=e(e(S,!0));Je(k),Y(()=>{ee(g,`--${$e(a.variable.name)}`),M.value=a.variable.light??"",k.value=a.variable.dark??""}),o(n,b)}),o(v,s),_e()}const Yt=(v,a,s,i)=>{var n;t(a)&&((n=s.onsave)==null||n.call(s,t(i)))},Gt=(v,a)=>{a(v),alert("TODO")};var Ht=c("edit",1),Kt=c("create",1),Qt=c("save changes",1),Ut=c("create theme",1),Xt=(v,a,s)=>a(v,T(s)),Zt=c('<button type="button" class="variable menu_item svelte-cno0i6"> </button>'),eo=c('<div class="copy svelte-cno0i6"><!></div> <!>',1),to=c('<div class="pane"><div class="panel p_lg box"><!> <aside>‚ö†Ô∏è This is unfinished and will change.</aside> <button>ok</button></div></div>'),oo=c(`<div class="theme_form svelte-cno0i6"><h2 class="text_align_center"><!> theme</h2> <aside>Creating and editing themes at runtime is a work in progress, but you can click around to see
		where it's going!</aside> <header class="svelte-cno0i6"><div class="variables_header svelte-cno0i6"><p> </p> <button type="button" class="w_100" disabled>add a variable</button></div> <form class="svelte-cno0i6"><label><div class="title">name</div> <input placeholder=">"></label> <button type="button"><!></button></form></header> <div class="content svelte-cno0i6"><div class="variables svelte-cno0i6"></div> <div class="rendered svelte-cno0i6"><!></div></div></div> <!>`,1);function ro(v,a){me(a,!0);const s=Ce(a,"theme",3,null);let i=Z(de(s()?s().name:"new theme")),n=Z(de(s()?s().variables:[]));const b=h(()=>({name:t(i),variables:t(n)})),p=h(()=>rt(t(b),{empty_default_theme:!1,specificity:1})),I=h(()=>t(n).reduce((l,d)=>d.light?l+1:l,0)),g=h(()=>t(n).reduce((l,d)=>d.dark?l+1:l,0));let m=Z(null);const z=(l,d)=>{et(l),A(m,de(d)),A(n,de(t(n).slice()))},D=h(()=>!!s()),M=h(()=>s()?t(i)!==s().name||t(n)!==s().variables:!0);var B=oo(),S=y(B),k=r(S),f=r(k);C(f,()=>t(D),l=>{var d=Ht();o(l,d)},l=>{var d=Kt();o(l,d)});var w=e(e(k,!0)),x=e(e(w,!0)),N=r(x),G=r(N),H=r(G),K=e(e(G,!0));K.__click=[Gt,et];var te=e(e(N,!0)),Q=r(te),ve=r(Q),oe=e(e(ve,!0));Je(oe);var U=e(e(Q,!0));U.__click=[Yt,M,a,b];var ze=r(U);C(ze,()=>t(D),l=>{var d=Qt();o(l,d)},l=>{var d=Ut();o(l,d)});var he=e(e(x,!0)),re=r(he);je(re,77,()=>t(n),(l,d)=>T(l).name,(l,d,R)=>{var O=Zt();O.__click=[Xt,z,d];var q=r(O);Y(()=>ee(q,`--${$e(T(d).name)}`)),o(l,O)});var ue=e(e(re,!0)),De=r(ue);C(De,()=>t(p),l=>{var d=eo(),R=y(d),O=r(R);qt(O,{get text(){return t(p)}});var q=e(e(R,!0));$(q,{get content(){return t(p)},lang:"css"}),o(l,d)});var pe=e(e(S,!0));C(pe,()=>t(m),l=>{var d=L(),R=y(d);ct(R,{onclose:()=>A(m,null),children:(q,fe=Pt)=>{var be=to(),Me=r(be),ge=r(Me);Vt(ge,{get variable(){return t(m)}});var ye=e(e(ge,!0)),Te=e(e(ye,!0));Te.__click=fe(),o(q,be)}}),o(l,d)}),Y(()=>{ee(H,`variables: ${$e(t(I))} light, ${$e(t(g))} dark`),U.disabled=!t(M)}),Bt(oe,()=>t(i),l=>A(i,l)),o(v,B),_e()}Fe(["click"]);let ao=0;function tt(v,a){me(a,!0);const s={};ot(s);const i=()=>Ie(b(),"$selected_theme",s),n=()=>Ie(p(),"$selected_color_scheme",s),b=Ce(a,"selected_theme",11,()=>X(Ze(at()))),p=Ce(a,"selected_color_scheme",11,()=>X(Ze(st()))),I=Ce(a,"tagName",3,"div"),g="themed_"+ao++;kt(b()),wt(p());const m=h(()=>rt(i(),{id:g,empty_default_theme:!1})),z=h(()=>t(m)?xt(t(m)):null),D=h(()=>n()==="dark"||n()==="light"?n():matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");var M=L();St(S=>{var k=L(),f=y(k);C(f,()=>t(z),w=>{var x=L(),N=y(x);Nt(N,()=>t(z),!1),o(w,x)}),o(S,k)});var B=y(M);Ot(B,I,!1,(S,k)=>{Wt(S,null,[{id:g},{class:"themed"}],""),Y(()=>qe(S,"dark",t(D)==="dark"));var f=L(),w=y(f);At(()=>a.children,w,()=>g,()=>t(m),()=>t(z),b,p),o(k,f)}),o(v,M),_e()}var so=c("CSS custom properties",1),co=c("Why the singleton?",1),no=c(`<aside><p>By default <code>Themed</code> syncs its settings to the global <code>:root</code> tag and
					persists to <code>localStorage</code>.</p> <p>These behaviors can be customized with its props:</p> <ul><li><code>sync_color_scheme</code></li> <li><code>load_color_scheme</code></li> <li><code>save_color_scheme</code></li> <li><code>load_theme</code></li> <li><code>save_theme</code></li></ul> <p>See <code>Themed_Scope</code> below to theme one branch of the DOM tree.</p></aside>`),lo=c("Why nested children?",1),io=c(`<aside><p><code>Themed</code> is designed to wrap every page at the top level so it can provide the
					selected theme and color scheme in the Svelte context. It works without children, but <code>get_theme</code> and <code>get_color_scheme</code> will fail unless you call <code>set_theme</code> and <code>set_color_scheme</code> yourself.</p> <p>These context helpers provide the <code>writable</code> stores to your code, and they also
					reduce boilerplate in the helper components documented below.</p> <p>If you set stores in context manually, they must be the same references as the <code>Themed</code> props:</p> <!></aside>`),mo=c("More about <code>Color_Scheme_Input</code>",1),_o=c(`<aside><p><code>Color_Scheme_Input</code> enables users to choose and persist the color scheme without
					boilerplate.</p> <p>By default, <code>Color_Scheme_Input</code> works with <code>Themed</code> to save the
					user's preference to <code>localStorage</code>. To customize this behavior, pass a custom <code>selected_color_scheme</code> or <code>select</code> function prop.</p></aside>`),vo=c(`‚ö†Ô∏è Scoped themes are a work in progress and may not be supported depending
				on complexity. It shouldn't worsen the unscoped API.`,1),ho=(v,a,s,i,n)=>{a(T(s)),Ve(i,"light")},uo=c("‚òÖ",1),po=c("‚òÜ",1),fo=c('<div class="box row p_sm"><button type="button" class="icon_button"><!></button> <div class="p_md">the <code> </code> theme</div></div>'),bo=(v,a,s,i,n)=>{a(T(s)),Ve(i,"dark")},go=c("‚òÖ",1),yo=c("‚òÜ",1),To=c('<div class="box row p_sm"><button type="button" class="icon_button"><!></button> <div class="p_md">the <code> </code> theme</div></div>'),So=c('<div class="mb_lg"><p>Scope a theme to one branch of the DOM tree with <code>Themed_Scope</code>:</p> <!> <!></div> <div><!> <!></div>',1),ko=c("More about <code>Themed</code>",1),wo=c(`<aside><p><code>Themed</code> initializes the system's theme support. Without it, the page will not
					reflect the user's system <code>color-scheme</code>. By default, <code>Themed</code> applies the base theme to the
					root of the page via <code>create_theme_setup_script</code>. It uses JS to add the <code>.dark</code> CSS class to the <code>:root</code> element.</p> <p>This strategy enables color scheme and theme support with minimal CSS and optimal
					performance for most use cases. The system supports plain CSS usage that can be static or
					dynamic, scoped or global, or imported at buildtime or runtime. It also allows runtime
					access to the data if you want to pay the performance costs.</p> <p>The theme setup script interacts with <code>sync_color_scheme</code> to save the user's
					preference to <code>localStorage</code>. See also <code>Color_Scheme_Input</code>.</p> <p>The setup script avoids flash-on-load due to color scheme, but currently themes flash in
					after loading. We'll try to fix this when the system stabilizes.</p></aside>`),xo=c(`<section class="theme"><p><code>Themed</code> adds global support for both the browser's <!> and custom themes based on <a href="https://moss.ryanatkn.com/library/variables">Moss style variables</a>, which use <!>. <code>Themed</code> is a singleton component that's mounted at the top-level of the page:</p> <!> <!> <!> <!></section> <section class="theme"><!> <p><code>Themed</code> defaults to automatic <!> detection with <!>, and users can also set it directly:</p> <!> <!> <!> <p>Pass a prop to override the default:</p> <!> <p>The builtin themes support both dark and light color schemes. Custom themes may support one or
			both color schemes.</p> <!></section> <section class="theme"><!> <p>A theme is a simple JSON collection of <a href="https://moss.ryanatkn.com/library/variables">Moss style variables</a> that can be transformed into CSS that set custom properties. Each variable can have values for
			light and/or dark color schemes. In other words, "dark" isn't a theme, it's a mode that any theme
			can implement.</p> <div class="width_sm mb_lg"><!></div> <aside>The builtin themes need more work, but the proof of concept is ready!</aside></section> <section class="theme"><!> <!></section> <section class="theme"><!> <p>Themes are plain CSS that can be sourced in a variety of ways.</p> <p>To use fuz's base theme:</p> <!> <p><code>Themed</code> can be customized with the nonreactive, bindable, writable store props <code>selected_theme</code> and <code>selected_color_scheme</code>:</p> <!> <p><code>Themed</code> sets the writable stores <code>selected_theme</code> and <code>selected_color_scheme</code> in the Svelte context:</p> <!> <!></section>`,1),$o=c('<div class="pane"><div class="theme_editor_wrapper panel svelte-1io66l"><!></div></div>'),Co=c("<!> <!>",1);function Zo(v,a){me(a,!0);const s={};ot(s);const i=()=>Ie(g,"$selected_theme",s),n=()=>Ie(m,"$selected_color_scheme",s),p=zt("Themed"),I=$t.slice(),g=at(),m=st(),z=f=>{Ve(g,f),Ct(f)};let D=Z(null);var M=Co(),B=y(M);It(B,{tome:p,children:(f,w)=>{var x=xo(),N=y(x),G=r(N),H=r(G),K=e(e(H,!0));xe(K,{href:"Web/CSS/color-scheme"});var te=e(e(K,!0)),Q=e(e(te,!0));xe(Q,{href:"Web/CSS/--*",children:(j,_)=>{var u=so();o(j,u)}});var ve=e(e(G,!0));$(ve,{content:"import Themed from '@ryanatkn/fuz/Themed.svelte';",lang:"ts"});var oe=e(e(ve,!0));$(oe,{content:`<!-- +layout.svelte -->
<Themed>
	{@render children()}
</Themed>`});var U=e(e(oe,!0));le(U,{summary:_=>{var u=co();o(_,u)},children:(_,u)=>{var P=no();o(_,P)}});var ze=e(e(U,!0));le(ze,{summary:_=>{var u=lo();o(_,u)},children:(_,u)=>{var P=io(),Se=r(P),Pe=e(e(Se,!0)),ke=e(e(Pe,!0)),We=e(e(ke,!0));$(We,{content:`<script>
	const theme = writable(...);
	const color_scheme = writable(...);
	set_theme(theme);
	set_color_scheme(color_scheme);
<\/script>
<Themed
	selected_theme={theme}
	selected_color_scheme={color_scheme}
/>
<!-- sibling content... -->`}),o(_,P)}});var he=e(e(N,!0)),re=r(he);we(re,{text:"Color scheme",slug:"color-scheme"});var ue=e(e(re,!0)),De=r(ue),pe=e(e(De,!0));xe(pe,{href:"Web/CSS/color-scheme"});var l=e(e(pe,!0));xe(l,{href:"Web/CSS/@media/prefers-color-scheme"});var d=e(e(ue,!0));Dt(d,{});var R=e(e(d,!0));$(R,{content:"import Color_Scheme_Input from '@ryanatkn/fuz/Color_Scheme_Input.svelte';",lang:"ts"});var O=e(e(R,!0));$(O,{content:"<Color_Scheme_Input />"});var q=e(e(O,!0)),fe=e(e(q,!0)),be=h(()=>`<Color_Scheme_Input
	selected_color_scheme={writable(${n()?"'"+JSON.stringify(n()).replace(/"/gu,"")+"'":"null"})}
/>`);$(fe,{get content(){return t(be)}});var Me=e(e(fe,!0)),ge=e(e(Me,!0));le(ge,{summary:_=>{var u=mo();o(_,u)},children:(_,u)=>{var P=_o();o(_,P)}});var ye=e(e(he,!0)),Te=r(ye);we(Te,{text:"Builtin themes",slug:"builtin-themes"});var nt=e(e(Te,!0)),lt=e(e(nt,!0)),dt=r(lt);Mt(dt,{themes:I,enable_editing:!0,onedit:j=>A(D,de(j))});var Ye=e(e(ye,!0)),Ge=r(Ye);we(Ge,{text:"Scoped themes",slug:"scoped-themes"});var it=e(e(Ge,!0));le(it,{summary:_=>{var u=vo();o(_,u)},children:(_,u)=>{var P=So(),Se=y(P),Pe=r(Se),ke=e(e(Pe,!0));$(ke,{content:"import Themed_Scope from '@ryanatkn/fuz/Themed_Scope.svelte';",lang:"ts"});var We=e(e(ke,!0));$(We,{content:`<Themed_Scope {selected_theme}>
		...
</Themed_Scope>`});var bt=e(e(Se,!0)),Xe=r(bt);je(Xe,69,()=>I,(J,W)=>T(J).name,(J,W,yt)=>{var ae=L();const se=h(()=>n()==="light"&&T(W).name===i().name);var Ae=y(ae),Be=h(()=>X(T(W))),Ne=h(()=>X("light"));tt(Ae,{get selected_theme(){return t(Be)},get selected_color_scheme(){return t(Ne)},children:(Oe,Tt)=>{var ce=fo(),E=r(ce);E.__click=[ho,z,W,m,n];var Ee=r(E);C(Ee,()=>t(se),F=>{var V=uo();o(F,V)},F=>{var V=po();o(F,V)});var ne=e(e(E,!0));ie(ne,"flex","1");var Le=e(r(ne)),Re=r(Le);Y(()=>{qe(E,"selected",t(se)),ee(Re,T(W).name)}),o(Oe,ce)}}),o(J,ae)});var gt=e(e(Xe,!0));je(gt,69,()=>I,(J,W)=>T(J).name,(J,W,yt)=>{var ae=L();const se=h(()=>n()==="dark"&&T(W).name===i().name);var Ae=y(ae),Be=h(()=>X(T(W))),Ne=h(()=>X("dark"));tt(Ae,{get selected_theme(){return t(Be)},get selected_color_scheme(){return t(Ne)},children:(Oe,Tt)=>{var ce=To(),E=r(ce);E.__click=[bo,z,W,m,n];var Ee=r(E);C(Ee,()=>t(se),F=>{var V=go();o(F,V)},F=>{var V=yo();o(F,V)});var ne=e(e(E,!0));ie(ne,"flex","1");var Le=e(r(ne)),Re=r(Le);Y(()=>{qe(E,"selected",t(se)),ee(Re,T(W).name)}),o(Oe,ce)}}),o(J,ae)}),o(_,P)}});var mt=e(e(Ye,!0)),He=r(mt);we(He,{text:"Theme usage",slug:"theme-usage"});var _t=e(e(He,!0)),vt=e(e(_t,!0)),Ke=e(e(vt,!0));$(Ke,{content:`<!-- +layout.svelte -->
<script>
	import '@ryanatkn/moss/style.css';
	import '@ryanatkn/moss/theme.css';
	import Themed from '@ryanatkn/fuz/Themed.svelte';
	import type {Snippet} from 'svelte';

	interface Props {
		children: Snippet;
	}
	
	const {children}: Props = $props();
<script>

<!-- enable theme and color-scheme support -->
<Themed>
	{@render children()}
</Themed>`});var ht=e(e(Ke,!0)),Qe=e(e(ht,!0));$(Qe,{content:`<Themed {selected_theme} {selected_color_scheme}>
	{@render children()}
</Themed>`});var ut=e(e(Qe,!0)),Ue=e(e(ut,!0)),pt=h(()=>`// get values from the Svelte context provided by
// the nearest \`Themed\` or \`Themed_Scope\` ancestor:

import {get_theme} from '@ryanatkn/fuz/theme.js';
const selected_theme = get_theme();
$selected_theme.name; // '${i().name}'

import {get_color_scheme} from '@ryanatkn/fuz/theme.js';
const selected_color_scheme = get_color_scheme();
$selected_color_scheme; // '${n()}'`);$(Ue,{get content(){return t(pt)},lang:"js"});var ft=e(e(Ue,!0));le(ft,{summary:_=>{var u=ko();o(_,u)},children:(_,u)=>{var P=wo();o(_,P)}}),o(f,x)}});var S=e(B,!0);S.nodeValue="  ";var k=e(S);C(k,()=>t(D),f=>{var w=L(),x=y(w);ct(x,{onclose:()=>A(D,null),children:(N,G)=>{var H=$o(),K=r(H),te=r(K);ro(te,{get theme(){return t(D)},onsave:Q=>{console.log("update theme",Q),alert("todo")}}),o(N,H)}}),o(f,w)}),o(v,M),_e()}Fe(["click"]);export{Vt as S,Zo as _};
