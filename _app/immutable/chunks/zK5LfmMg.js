import"./CWj6FrbW.js";import{aN as z,p as B,B as S,aq as f,ap as g,h as o,aO as L,aP as U,f as X,d as p,s as F,r as y,t as G,b as I,e as H,a as J,g as K,c as M}from"./DpDn43ma.js";import{i as Q}from"./B7cJd8Gg.js";import{b as V,c as W}from"./DuG0mCj_.js";import{b as N}from"./C7blHE0M.js";import{p as w}from"./CZHbM0wv.js";import{T as Y}from"./C3bvAlJi.js";const Z=t=>{if(!t)return!1;const{tagName:e}=t;return e==="INPUT"&&t.type!=="hidden"||e==="TEXTAREA"||t.contentEditable==="true"||t.contentEditable===""},ce=t=>{const e=t.closest("[contenteditable]");return e!==null&&e.contentEditable!=="false"},$=(t,e=!0,l=!0)=>(l&&t.preventDefault(),e?t.stopImmediatePropagation():t.stopPropagation(),t),fe=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},ee=(t=0)=>new Promise(e=>setTimeout(e,t)),ue=t=>t&&typeof t.then=="function";var te=(t,e,l,h)=>{const u=t.target;o(e)&&(o(e)===u||!o(e).contains(u)||l()&&!u.closest(l()))&&h(t)},ae=X('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-4ojjtv"><div class="dialog_wrapper svelte-4ojjtv" role="none"><div class="dialog_bg svelte-4ojjtv" aria-hidden="true"></div> <div class="dialog_content svelte-4ojjtv"><!></div></div></div></div>');function me(t,e){B(e,!0);const l=w(e,"layout",3,"centered"),h=w(e,"index",3,0),u=w(e,"active",3,!0),k=w(e,"content_selector",3,".pane"),O="body",P="fuz_dialog";let r=g(void 0);S(()=>{A(e.container)});const A=a=>{if(a)f(r,a,!0);else{const n=document.getElementById(P);if(n)f(r,n,!0);else{const s=document.querySelector(O);if(!s)throw Error(`Cannot find dialog root element with selector '${O}'`);f(r,document.createElement("div"),!0),o(r).id=P,o(r).style.display="contents",s.appendChild(o(r))}}};let v=g(void 0),b=g(void 0);const E=a=>{var n;a&&$(a),(n=e.onclose)==null||n.call(e)},C=a=>{var n,s;if(a.key==="Escape"&&!Z(a.target)){const d=(n=o(v))==null?void 0:n.parentElement,c=(s=d==null?void 0:d.parentElement)==null?void 0:s.children,m=Array.prototype.indexOf.call(c,d);(!c||m===c.length-1||m===-1)&&E(a)}};let j=g(!1);L("keydown",U,function(...a){var n;(n=u()?C:void 0)==null||n.apply(this,a)}),Y(t,{get to(){return o(r)},onmove:async()=>{var a;await ee(),f(j,!0),(a=o(v))==null||a.focus()},children:(a,n)=>{var s=ae();let d,c;var m=p(s),T=p(m);T.__mousedown=[te,b,k,E];var x=F(p(T),2),D=p(x);{var R=i=>{var _=H(),q=J(_);K(q,()=>e.children,()=>E),I(i,_)};Q(D,i=>{o(j)&&i(R)})}y(x),N(x,i=>f(b,i),()=>o(b)),y(T),y(m),y(s),N(s,i=>f(v,i),()=>o(v)),G((i,_)=>{d=V(s,1,"dialog svelte-4ojjtv",null,d,i),c=W(s,"",c,_)},[()=>({ready:o(j),layout_page:l()==="page"}),()=>({"z-index":100+h()})]),I(a,s)},$$slots:{default:!0}}),M()}z(["mousedown"]);export{me as D,ue as a,Z as b,ce as c,fe as i,$ as s};
