import{$ as q,c as p,s as O,b as B,f as G,a as P,r as w,t as L}from"./disclose-version.BDhqTD1c.js";import{p as U,G as X,g as i,n as f,t as j,a as F,A as y}from"./runtime.BIep0U5Y.js";import{e as H,g as J}from"./utils.BasVy1Zn.js";import{i as K,p as E}from"./if.CTyMIEjO.js";import{s as M}from"./attributes.DrO0J316.js";import{t as k}from"./class.CFbCgkTh.js";import{s as Q}from"./style.Bk7ejTAN.js";import{b as C}from"./this.gzNVxY_l.js";import{p as x}from"./props.BE2WXVPW.js";import{T as V}from"./Teleport.C8Bok_ts.js";const W=e=>{var s;if(!e)return!1;const{tagName:t}=e;if(t==="INPUT"){const{type:r}=e;return r==="text"||r==="number"||r==="password"||r==="email"||r==="search"||r==="url"}return t==="TEXTAREA"||!!((s=e.getAttribute)!=null&&s.call(e,"contenteditable"))&&e.getAttribute("contenteditable")!=="false"},fe=e=>{const t=e.closest("[contenteditable]");return t!==null&&t.getAttribute("contenteditable")!=="false"},Y=(e,t=!0,s=!0)=>(s&&e.preventDefault(),t?e.stopImmediatePropagation():e.stopPropagation(),e),ue=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},Z=(e=0)=>new Promise(t=>setTimeout(t,e)),me=e=>e&&typeof e.then=="function";var $=(e,t,s)=>{e.target===i(t)&&s(e)},ee=L('<div class="dialog svelte-7gv63e" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-7gv63e"><div class="dialog_wrapper svelte-7gv63e"><div class="dialog_bg svelte-7gv63e" aria-hidden="true"></div> <div class="dialog_content svelte-7gv63e" role="none"><!></div></div></div></div>');function _e(e,t){U(t,!0);const s=x(t,"layout",3,"centered"),r=x(t,"index",3,0),D=x(t,"active",3,!0),T="body",A="fuz_dialog";let d=y(void 0);X(()=>{N(t.container)});const N=o=>{if(o)f(d,E(o));else{const n=document.getElementById(A);if(n)f(d,E(n));else{const a=document.querySelector(T);if(!a)throw Error(`Cannot find dialog root element with selector '${T}'`);f(d,E(document.createElement("div"))),i(d).id=A,i(d).style.display="contents",a.appendChild(i(d))}}};let _=y(void 0),b=y(void 0);const g=o=>{var n;o&&Y(o),(n=t.onclose)==null||n.call(t)},R=o=>{var n,a;if(o.key==="Escape"&&!W(o.target)){const l=(n=i(_))==null?void 0:n.parentElement,c=(a=l==null?void 0:l.parentElement)==null?void 0:a.children,u=Array.prototype.indexOf.call(c,l);(!c||u===c.length-1||u===-1)&&g(o)}};let h=y(!1);J("keydown",q,function(...o){var n;(n=D()?R:void 0)==null||n.apply(this,o)}),V(e,{get to(){return i(d)},onmove:async()=>{var o;await Z(),f(h,!0),(o=i(_))==null||o.focus()},children:(o,n)=>{var a=ee();C(a,m=>f(_,m),()=>i(_));var l=p(a),c=p(l),u=p(c);u.__mousedown=g;var v=O(O(u,!0));C(v,m=>f(b,m),()=>i(b)),v.__mousedown=[$,b,g];var z=p(v);K(z,()=>i(h),m=>{var I=B(),S=G(I);M(S,()=>t.children,()=>g),P(m,I)}),w(v),w(c),w(l),w(a),j(()=>{k(a,"ready",i(h)),k(a,"layout_page",s()==="page"),Q(a,"z-index",100+r())}),P(o,a)},$$slots:{default:!0}}),F()}H(["mousedown"]);export{_e as D,me as a,W as b,fe as c,ue as i,Y as s};
