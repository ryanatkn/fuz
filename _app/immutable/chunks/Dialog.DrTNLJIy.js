import{$ as S,b as q,a as O,t as B,c as g,s as C,f as L}from"./disclose-version.BHqvyKx-.js";import{p as U,O as X,g as i,n as c,t as j,a as F,C as w}from"./runtime.VNSPx__r.js";import{d as G,e as H}from"./render.BZs1ZF8H.js";import{p as _}from"./proxy.CO2BnZf8.js";import{i as J}from"./if.Dmk6Jy1T.js";import{s as K}from"./attributes.B0eU8BeJ.js";import{t as I}from"./class.CETg5euJ.js";import{s as M}from"./style.iv2mhl8q.js";import{b as P}from"./this.DdQ07oED.js";import{p as E}from"./props.BOsT0QGW.js";import{T as Q}from"./Teleport.8Q6-0uKe.js";const V=e=>{var s;if(!e)return!1;const{tagName:t}=e;if(t==="INPUT"){const{type:r}=e;return r==="text"||r==="number"||r==="password"||r==="email"||r==="search"||r==="url"}return t==="TEXTAREA"||!!((s=e.getAttribute)!=null&&s.call(e,"contenteditable"))&&e.getAttribute("contenteditable")!=="false"},fe=e=>{const t=e.closest("[contenteditable]");return t!==null&&t.getAttribute("contenteditable")!=="false"},W=(e,t=!0,s=!0)=>(s&&e.preventDefault(),t?e.stopImmediatePropagation():e.stopPropagation(),e),ue=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},Y=(e=0)=>new Promise(t=>setTimeout(t,e)),me=e=>e&&typeof e.then=="function";var Z=(e,t,s)=>{e.target===i(t)&&s(e)},$=B('<div class="dialog svelte-n45e52" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-n45e52"><div class="dialog_wrapper svelte-n45e52"><div class="dialog_bg svelte-n45e52" aria-hidden="true"></div> <div class="dialog_content svelte-n45e52" role="none"><!></div></div></div></div>');function _e(e,t){U(t,!0);const s=E(t,"layout",3,"centered"),r=E(t,"index",3,0),D=E(t,"active",3,!0),x="body",T="fuz_dialog";let d=w(void 0);X(()=>{N(t.container)});const N=o=>{if(o)c(d,_(o));else{const n=document.getElementById(T);if(n)c(d,_(n));else{const a=document.querySelector(x);if(!a)throw Error(`Cannot find dialog root element with selector '${x}'`);c(d,_(document.createElement("div"))),i(d).id=T,i(d).style.display="contents",a.appendChild(i(d))}}};let p=w(void 0),y=w(void 0);const v=o=>{var n;o&&W(o),(n=t.onclose)==null||n.call(t)},R=o=>{var n,a;if(o.key==="Escape"&&!V(o.target)){const l=(n=i(p))==null?void 0:n.parentElement,f=(a=l==null?void 0:l.parentElement)==null?void 0:a.children,u=Array.prototype.indexOf.call(f,l);(!f||u===f.length-1||u===-1)&&v(o)}};let b=w(!1);H("keydown",S,function(...o){const n=D()?R:void 0;return n==null?void 0:n.apply(this,o)},!1),Q(e,{get to(){return i(d)},onmove:async()=>{var o;await Y(),c(b,!0),(o=i(p))==null||o.focus()},children:(o,n)=>{var a=$();P(a,m=>c(p,_(m)),()=>i(p));var l=g(a),f=g(l),u=g(f);u.__mousedown=v;var h=C(C(u,!0));P(h,m=>c(y,_(m)),()=>i(y)),h.__mousedown=[Z,y,v];var k=g(h);J(k,()=>i(b),m=>{var A=q(),z=L(A);K(z,()=>t.children,()=>v),O(m,A)}),j(()=>{I(a,"ready",i(b)),I(a,"layout_page",s()==="page"),M(a,"z-index",100+r())}),O(o,a)},$$slots:{default:!0}}),F()}G(["mousedown"]);export{_e as D,me as a,V as b,fe as c,ue as i,W as s};
