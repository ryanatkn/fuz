import{b as I,$ as F,a as E,t as L,f as O,c as g,s as P}from"./disclose-version.Ddj0amtR.js";import{a as U,V,m as c,g as i,r as X,p as G,F as w}from"./runtime.N2A2yyIi.js";import{d as H,e as J}from"./render.UwBO_r64.js";import{i as K}from"./if.UhUuT2rm.js";import{s as M}from"./attributes.B9yWWQAs.js";import{t as C}from"./class.BOV0QPCC.js";import{s as Q}from"./style.CN5pMWL6.js";import{b as D}from"./this.DR5cQyoW.js";import{p as T}from"./props.CB8TrldN.js";import{p as v}from"./proxy.Dw-yJxJX.js";import{T as W}from"./Teleport.CEgJ_n7x.js";const Y=e=>{var s;if(!e)return!1;const{tagName:t}=e;if(t==="INPUT"){const{type:r}=e;return r==="text"||r==="number"||r==="password"||r==="email"||r==="search"||r==="url"}return t==="TEXTAREA"||!!((s=e.getAttribute)!=null&&s.call(e,"contenteditable"))&&e.getAttribute("contenteditable")!=="false"},me=e=>{const t=e.closest("[contenteditable]");return t!==null&&t.getAttribute("contenteditable")!=="false"},Z=(e,t=!0,s=!0)=>(s&&e.preventDefault(),t?e.stopImmediatePropagation():e.stopPropagation(),e),ve=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},$=(e=0)=>new Promise(t=>setTimeout(t,e)),_e=e=>e&&typeof e.then=="function";var ee=(e,t,s)=>{e.target===i(t)&&s(e)},te=L('<div class="dialog svelte-1v19quj" role="dialog" aria-modal="" tabindex="-1"><div class="dialog_layout svelte-1v19quj"><div class="dialog_wrapper svelte-1v19quj"><div class="dialog_bg svelte-1v19quj" role="none"></div> <div class="dialog_content svelte-1v19quj" role="none"><!></div></div></div></div>');function pe(e,t){U(t,!0);const s=T(t,"layout",3,"centered"),r=T(t,"index",3,0),N=T(t,"active",3,!0),x="body",A="fuz_dialog";let d=w(void 0);V(()=>{R(t.container)});const R=o=>{if(o)c(d,v(o));else{const a=document.getElementById(A);if(a)c(d,v(a));else{const n=document.querySelector(x);if(!n)throw Error(`Cannot find dialog root element with selector '${x}'`);c(d,v(document.createElement("div"))),i(d).id=A,i(d).style.display="contents",n.appendChild(i(d))}}};let _=w(void 0),y=w(void 0);const p=o=>{var a;o&&Z(o),(a=t.onclose)==null||a.call(t)},k=o=>{var a,n;if(o.key==="Escape"&&!Y(o.target)){const l=(a=i(_))==null?void 0:a.parentElement,f=(n=l==null?void 0:l.parentElement)==null?void 0:n.children,u=Array.prototype.indexOf.call(f,l);(!f||u===f.length-1||u===-1)&&p(o)}};let b=w(!1);var q=I();J("keydown",F,function(...o){const a=N()?k:void 0;return a==null?void 0:a.apply(this,o)},!1);var z=O(q);W(z,{get to(){return i(d)},onmove:async()=>{var o;await $(),c(b,!0),(o=i(_))==null||o.focus()},children:(o,a)=>{var n=te();D(n,m=>c(_,v(m)),()=>i(_));var l=g(n),f=g(l),u=g(f);u.__mousedown=p;var h=P(P(u,!0));D(h,m=>c(y,v(m)),()=>i(y)),h.__mousedown=[ee,y,p];var S=g(h);K(S,()=>i(b),m=>{var j=I(),B=O(j);M(()=>t.children,B,()=>p),E(m,j)}),X(()=>{C(n,"ready",i(b)),C(n,"layout_page",s()==="page"),Q(n,"z-index",100+r())}),E(o,n)}}),E(e,q),G()}H(["mousedown"]);export{pe as D,_e as a,Y as b,me as c,ve as i,Z as s};
