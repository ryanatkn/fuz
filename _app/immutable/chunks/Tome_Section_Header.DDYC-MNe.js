import{a as n,t as u,s as I,b as M,k as P,c as R}from"./disclose-version.CNjwL26W.js";import{t as v,p as S,a as y,c as h,r as p,f as k,s as U,N as V}from"./runtime.B-gUiV1I.js";import{s as j}from"./render.Dvbgo3Ck.js";import{i as q}from"./if.DNsq1zR9.js";import{s as T,a as H}from"./attributes.C4-PK8QZ.js";import{e as z}from"./svelte-element.p96qTMsF.js";import{t as B}from"./class.BHrBxz3m.js";import{p as F}from"./props.Cy-UtRwa.js";import{o as J}from"./index-client.BtWieJN8.js";import{p as K}from"./stores.DvTGbgNk.js";import{b as L}from"./entry.BWgM4Mr7.js";import{s as O}from"./path.QeaNnfvq.js";import{a as Q,i as W,H as X}from"./intersect.BIOnSgs1.js";import{c as Y}from"./context_helpers.mn64om0Y.js";import{l as E}from"./library_helpers.svelte.iLhCEAbJ.js";const N=Y();var Z=u("<section><!></section>");function pt(d,t){y(t,!0);const c=E.get();let r;N.set(a=>{r=a});var e=Z();let s;var m=h(e);T(m,()=>t.children),p(e),Q(e,(a,o)=>W(a,o),()=>({intersecting:a})=>{r&&(a?c.slugs_onscreen.add(r):c.slugs_onscreen.delete(r))}),v(()=>s=H(e,s,{...t.attrs})),n(d,e),S()}let $=0;var tt=u("<div><!></div> <!>",1),et=u("<header><!></header>");function ut(d,t){y(t,!0);const c=I(),r=()=>M(K,"$page",c),e=F(t,"tag",3,"h3"),s=O(t.text),m=N.get();if(!m)throw Error("Tome_Section_Header must be a child of Tome_Section");m(s);const a="tome_section_header_"+(($+=1)-1),o=E.get();r().url.pathname!==L+o.root_path&&(o.add(a,t.text,s,e()),J(()=>{o.remove(a)}));var l=et(),A=h(l);z(A,e,!1,(_,w)=>{let b;v(()=>{b=H(_,b,{...t.attrs},"svelte-3vtdd8",_.namespaceURI===V,_.nodeName.includes("-")),B(_,"tome_section_header",!0)});var x=tt(),f=k(x),C=h(f);q(C,()=>t.children,g=>{var i=R(),G=k(i);T(G,()=>t.children),n(g,i)},g=>{var i=P();v(()=>j(i,t.text)),n(g,i)}),p(f);var D=U(f,2);X(D,{slug:s}),n(w,x)}),p(l),n(d,l),S()}export{pt as T,ut as a};
