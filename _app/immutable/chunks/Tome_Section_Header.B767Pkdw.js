import{a as m,t as u,s as P,b as R,c as U,k as V}from"./disclose-version.BmNp8pRT.js";import{t as g,p as S,a as y,c as h,r as p,f as k,s as j,N as q}from"./runtime.CTRYSQ17.js";import{s as z}from"./render.CRd-sPzB.js";import{i as B}from"./if.CQC794wY.js";import{s as T,a as H}from"./attributes.Bd3_RS60.js";import{e as F}from"./svelte-element.RaleMG77.js";import{t as J}from"./class.BHhese_l.js";import{p as K}from"./props.Dw9ghfrp.js";import{o as L}from"./index-client.DRAchYjU.js";import{p as O}from"./stores.CHxK5Jnt.js";import{b as Q}from"./entry.Diwjvpa9.js";import{s as W}from"./path.QeaNnfvq.js";import{a as X,i as Y,H as Z}from"./intersect.CEAVTEe-.js";import{c as $}from"./context_helpers.BjzmN15b.js";import{l as E}from"./library_helpers.svelte.CqugiOwN.js";const N=$();var tt=u("<section><!></section>");function bt(f,t){y(t,!0);const _=E.get();let r;N.set(a=>{r=a});var e=tt();let s;var l=h(e);T(l,()=>t.children),p(e),X(e,(a,n)=>{var o;return(o=Y)==null?void 0:o(a,n)},()=>({intersecting:a})=>{r&&(a?_.slugs_onscreen.add(r):_.slugs_onscreen.delete(r))}),g(()=>s=H(e,s,{...t.attrs})),m(f,e),S()}let et=0;var at=u("<div><!></div> <!>",1),rt=u("<header><!></header>");function xt(f,t){y(t,!0);const _=P(),r=()=>R(O,"$page",_),e=K(t,"tag",3,"h3"),s=W(t.text),l=N.get();if(!l)throw Error("Tome_Section_Header must be a child of Tome_Section");l(s);const a="tome_section_header_"+et++,n=E.get();r().url.pathname!==Q+n.root_path&&(n.add(a,t.text,s,e()),L(()=>{n.remove(a)}));var o=rt(),A=h(o);F(A,e,!1,(d,w)=>{let b;g(()=>{b=H(d,b,{...t.attrs},"svelte-3vtdd8",d.namespaceURI===q,d.nodeName.includes("-")),J(d,"tome_section_header",!0)});var x=at(),v=k(x),C=h(v);{var D=i=>{var c=U(),M=k(c);T(M,()=>t.children),m(i,c)},G=i=>{var c=V();g(()=>z(c,t.text)),m(i,c)};B(C,i=>{t.children?i(D):i(G,!1)})}p(v);var I=j(v,2);Z(I,{slug:s}),m(w,x)}),p(o),m(f,o),S()}export{bt as T,xt as a};
