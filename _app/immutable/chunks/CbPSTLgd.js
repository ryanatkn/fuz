import"./DsnmJJEf.js";import{a2 as B,p as L,a3 as P,a4 as r,a5 as _,i as a,a6 as j,a7 as F,f as G,d as f,s as H,r as m,t as J,b as O,g as K,a as M,h as Q,c as U}from"./WhgF38LA.js";import{i as V}from"./dHxtihbS.js";import{h as W,i as X}from"./Bu8163Bl.js";import{b as T}from"./B5t3gs10.js";import{p as u}from"./Cqxihmm3.js";import{s as Y,i as Z}from"./V2q5a4YM.js";import{w as $}from"./CyDE3FWY.js";import{T as ee}from"./BgrNWeIT.js";var te=G('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-1ayz0dr"><div class="dialog_wrapper svelte-1ayz0dr" role="none"><div class="dialog_bg svelte-1ayz0dr" aria-hidden="true"></div> <div class="dialog_content svelte-1ayz0dr"><!></div></div></div></div>');function ve(k,s){L(s,!0);const C=u(s,"layout",3,"centered"),D=u(s,"index",3,0),I=u(s,"active",3,!0),w=u(s,"content_selector",3,".pane"),b="body",E="fuz_dialog";let i=_(void 0);P(()=>{R(s.container)});const R=e=>{if(e)r(i,e,!0);else{const n=document.getElementById(E);if(n)r(i,n,!0);else{const t=document.querySelector(b);if(!t)throw Error(`Cannot find dialog root element with selector '${b}'`);r(i,document.createElement("div"),!0),a(i).id=E,a(i).style.display="contents",t.appendChild(a(i))}}};let v=_(void 0),d=_(void 0);const p=e=>{e&&Y(e),s.onclose?.()},A=e=>{if(e.key==="Escape"&&!Z(e.target)){const n=a(v)?.parentElement,t=n?.parentElement?.children,c=Array.prototype.indexOf.call(t,n);(!t||c===t.length-1||c===-1)&&p(e)}};let y=_(!1);j("keydown",F,function(...e){(I()?A:void 0)?.apply(this,e)}),ee(k,{get to(){return a(i)},onmove:async()=>{await $(),r(y,!0),a(v)?.focus()},children:(e,n)=>{var t=te();let c,x;var z=f(t),g=f(z);g.__mousedown=o=>{const l=o.target;a(d)&&(a(d)===l||!a(d).contains(l)||w()&&!l.closest(w()))&&p(o)};var h=H(f(g),2),N=f(h);{var S=o=>{var l=K(),q=M(l);Q(q,()=>s.children,()=>p),O(o,l)};V(N,o=>{a(y)&&o(S)})}m(h),T(h,o=>r(d,o),()=>a(d)),m(g),m(z),m(t),T(t,o=>r(v,o),()=>a(v)),J(()=>{c=W(t,1,"dialog svelte-1ayz0dr",null,c,{ready:a(y),layout_page:C()==="page"}),x=X(t,"",x,{"z-index":100+D()})}),O(e,t)},$$slots:{default:!0}}),U()}B(["mousedown"]);export{ve as D};
