var g=r=>{throw TypeError(r)};var x=(r,e,s)=>e.has(r)||g("Cannot "+s);var t=(r,e,s)=>(x(r,e,"read from private field"),s?s.call(r):e.get(r)),l=(r,e,s)=>e.has(r)?g("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,s);var z=(r,e,s)=>(x(r,e,"access private method"),s);import{O as u,ah as v,g as h,ap as w,N as D}from"./C1MeiME0.js";import{b as S}from"./BoUafn9S.js";import{c as E}from"./JaLCTAlu.js";function b(r){u(r,r.v+1)}var F=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],R=["difference","intersection","symmetricDifference","union"],L=!1,f,o,c,y,A;const m=class m extends Set{constructor(s){super();l(this,y);l(this,f,new Map);l(this,o,v(0));l(this,c,v(0));if(s){for(var i of s)super.add(i);t(this,c).v=super.size}L||z(this,y,A).call(this)}has(s){var i=super.has(s),a=t(this,f),n=a.get(s);if(n===void 0){if(!i)return h(t(this,o)),!1;n=v(!0),a.set(s,n)}return h(n),i}add(s){return super.has(s)||(super.add(s),u(t(this,c),super.size),b(t(this,o))),this}delete(s){var i=super.delete(s),a=t(this,f),n=a.get(s);return n!==void 0&&(a.delete(s),u(n,!1)),i&&(u(t(this,c),super.size),b(t(this,o))),i}clear(){if(super.size!==0){super.clear();var s=t(this,f);for(var i of s.values())u(i,!1);s.clear(),u(t(this,c),0),b(t(this,o))}}keys(){return this.values()}values(){return h(t(this,o)),super.values()}entries(){return h(t(this,o)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return h(t(this,c))}};f=new WeakMap,o=new WeakMap,c=new WeakMap,y=new WeakSet,A=function(){L=!0;var s=m.prototype,i=Set.prototype;for(const a of F)s[a]=function(...n){return h(t(this,o)),i[a].apply(this,n)};for(const a of R)s[a]=function(...n){h(t(this,o));var _=i[a].apply(this,n);return new m(_)}};let k=m;const I="/library",N=(r,e,s=I)=>{const i=e.split("/").at(-1);return{path:S+s+"/"+r,path_is_selected:i===r,path_segment:i}},P=E(()=>new T);var p,d;class T{constructor(e=I){l(this,p,w(D([])));l(this,d,w(D(new k)));this.root_path=e}get library_links(){return h(t(this,p))}set library_links(e){u(t(this,p),e,!0)}get slugs_onscreen(){return h(t(this,d))}set slugs_onscreen(e){u(t(this,d),e,!0)}add(e,s,i,a){const n=this.library_links.findIndex(O=>O.id===e),_={id:e,text:s,slug:i,tag:a};n===-1?this.library_links.push(_):this.library_links[n]=_}remove(e){const s=this.library_links.findIndex(i=>i.id===e);return s===-1?!1:(this.library_links.splice(s,1),!0)}}p=new WeakMap,d=new WeakMap;export{I as D,b as i,P as l,N as t};
