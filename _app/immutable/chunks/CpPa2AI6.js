import{k as S,m as q,t as B,a as I,c as G}from"./CbbyqTNh.js";import{p as L,R as U,G as u,a2 as _,g as n,as as X,k as p,s as F,l as g,t as H,f as J,a as K}from"./C9aPwLmV.js";import{p as j,i as M}from"./DSlEI_lp.js";import{s as Q}from"./DGBAUQNC.js";import{t as O}from"./cfbZBCHI.js";import{s as V}from"./PwPRnE0L.js";import{b as P}from"./C4iwTAZ8.js";import{p as y}from"./2t0GVDdd.js";import{T as W}from"./CNwAJ-75.js";const Y=t=>{if(!t)return!1;const{tagName:e}=t;return e==="INPUT"&&t.type!=="hidden"||e==="TEXTAREA"||t.contentEditable==="true"||t.contentEditable===""},fe=t=>{const e=t.closest("[contenteditable]");return e!==null&&e.contentEditable!=="false"},Z=(t,e=!0,c=!0)=>(c&&t.preventDefault(),e?t.stopImmediatePropagation():t.stopPropagation(),t),ue=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},$=(t=0)=>new Promise(e=>setTimeout(e,t)),me=t=>t&&typeof t.then=="function";var ee=(t,e,c,w)=>{const m=t.target;n(e)&&(n(e)===m||!n(e).contains(m)||c()&&!m.closest(c()))&&w(t)},te=B('<div class="dialog svelte-4ojjtv" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-4ojjtv"><div class="dialog_wrapper svelte-4ojjtv" role="none"><div class="dialog_bg svelte-4ojjtv" aria-hidden="true"></div> <div class="dialog_content svelte-4ojjtv"><!></div></div></div></div>');function ve(t,e){L(e,!0);const c=y(e,"layout",3,"centered"),w=y(e,"index",3,0),m=y(e,"active",3,!0),R=y(e,"content_selector",3,".pane"),T="body",x="fuz_dialog";let i=_(void 0);U(()=>{A(e.container)});const A=o=>{if(o)u(i,j(o));else{const s=document.getElementById(x);if(s)u(i,j(s));else{const a=document.querySelector(T);if(!a)throw Error(`Cannot find dialog root element with selector '${T}'`);u(i,j(document.createElement("div"))),n(i).id=x,n(i).style.display="contents",a.appendChild(n(i))}}};let v=_(void 0),h=_(void 0);const b=o=>{var s;o&&Z(o),(s=e.onclose)==null||s.call(e)},C=o=>{var s,a;if(o.key==="Escape"&&!Y(o.target)){const r=(s=n(v))==null?void 0:s.parentElement,d=(a=r==null?void 0:r.parentElement)==null?void 0:a.children,f=Array.prototype.indexOf.call(d,r);(!d||f===d.length-1||f===-1)&&b(o)}};let E=_(!1);q("keydown",X,function(...o){var s;(s=m()?C:void 0)==null||s.apply(this,o)}),W(t,{get to(){return n(i)},onmove:async()=>{var o;await $(),u(E,!0),(o=n(v))==null||o.focus()},children:(o,s)=>{var a=te(),r=p(a),d=p(r);d.__mousedown=[ee,h,R,b];var f=F(p(d),2),D=p(f);{var N=l=>{var k=G(),z=J(k);Q(z,()=>e.children,()=>b),I(l,k)};M(D,l=>{n(E)&&l(N)})}g(f),P(f,l=>u(h,l),()=>n(h)),g(d),g(r),g(a),P(a,l=>u(v,l),()=>n(v)),H(()=>{O(a,"ready",n(E)),O(a,"layout_page",c()==="page"),V(a,"z-index",100+w())}),I(o,a)},$$slots:{default:!0}}),K()}S(["mousedown"]);export{ve as D,me as a,Y as b,fe as c,ue as i,Z as s};
