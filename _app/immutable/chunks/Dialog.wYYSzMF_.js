import{k as X,m as q,a as I,t as B,c as G}from"./disclose-version.qccFV9AM.js";import{a as L,X as U,G as c,g as i,an as j,k as p,s as F,l as g,t as H,p as J,a6 as w,f as K}from"./runtime.B2HyCRSG.js";import{p as b,i as M}from"./store.CItsiEdH.js";import{s as Q}from"./attributes.LBTBdhoE.js";import{t as O}from"./class.Dw6Ly5wt.js";import{s as V}from"./style.PwPRnE0L.js";import{b as P}from"./this.ixia0uAj.js";import{p as E}from"./props.DO01tcwN.js";import{T as W}from"./Teleport.CkXMKxPc.js";const Y=e=>{if(!e)return!1;const{tagName:t}=e;return t==="INPUT"&&e.type!=="hidden"||t==="TEXTAREA"||e.contentEditable==="true"||e.contentEditable===""},fe=e=>{const t=e.closest("[contenteditable]");return t!==null&&t.contentEditable!=="false"},Z=(e,t=!0,f=!0)=>(f&&e.preventDefault(),t?e.stopImmediatePropagation():e.stopPropagation(),e),ue=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},$=(e=0)=>new Promise(t=>setTimeout(t,e)),me=e=>e&&typeof e.then=="function";var ee=(e,t,f)=>{e.target===i(t)&&f(e)},te=B('<div class="dialog svelte-2t3xer" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-2t3xer"><div class="dialog_wrapper svelte-2t3xer"><div class="dialog_bg svelte-2t3xer" aria-hidden="true"></div> <div class="dialog_content svelte-2t3xer" role="none"><!></div></div></div></div>');function _e(e,t){L(t,!0);const f=E(t,"layout",3,"centered"),A=E(t,"index",3,0),C=E(t,"active",3,!0),x="body",T="fuz_dialog";let s=w(void 0);U(()=>{D(t.container)});const D=a=>{if(a)c(s,b(a));else{const n=document.getElementById(T);if(n)c(s,b(n));else{const o=document.querySelector(x);if(!o)throw Error(`Cannot find dialog root element with selector '${x}'`);c(s,b(document.createElement("div"))),i(s).id=T,i(s).style.display="contents",o.appendChild(i(s))}}};let m=w(void 0),y=w(void 0);const _=a=>{var n;a&&Z(a),(n=t.onclose)==null||n.call(t)},N=a=>{var n,o;if(a.key==="Escape"&&!Y(a.target)){const r=(n=i(m))==null?void 0:n.parentElement,l=(o=r==null?void 0:r.parentElement)==null?void 0:o.children,u=Array.prototype.indexOf.call(l,r);(!l||u===l.length-1||u===-1)&&_(a)}};let h=w(!1);q("keydown",j,function(...a){var n;(n=C()?N:void 0)==null||n.apply(this,a)}),W(e,{get to(){return i(s)},onmove:async()=>{var a;await $(),c(h,!0),(a=i(m))==null||a.focus()},children:(a,n)=>{var o=te(),r=p(o),l=p(r),u=p(l);u.__mousedown=_;var v=F(u,2);v.__mousedown=[ee,y,_];var R=p(v);{var z=d=>{var k=G(),S=K(k);Q(S,()=>t.children,()=>_),I(d,k)};M(R,d=>{i(h)&&d(z)})}g(v),P(v,d=>c(y,d),()=>i(y)),g(l),g(r),g(o),P(o,d=>c(m,d),()=>i(m)),H(()=>{O(o,"ready",i(h)),O(o,"layout_page",f()==="page"),V(o,"z-index",100+A())}),I(a,o)},$$slots:{default:!0}}),J()}X(["mousedown"]);export{_e as D,me as a,Y as b,fe as c,ue as i,Z as s};
