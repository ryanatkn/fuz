import{t as y,a as p,j as M,c as N}from"./ZFNbJ4mV.js";import{p as j,Z as b,f as B,g as m,u as g,s as C,a2 as O,_ as x,X as E,a as F,a3 as Q}from"./C1MeiME0.js";import{i as I,s as P,a as U}from"./D20ub3TI.js";import{c as S,b as V,s as D}from"./D7_k7eAj.js";import{H as W,a as w,i as L}from"./CxR1ISRa.js";import{p as $}from"./BTdXiiDx.js";import{s as X}from"./QeaNnfvq.js";import{p as Y}from"./DlXz50Kf.js";import{b as ee}from"./BoUafn9S.js";import{s as ae}from"./JsoYPy0X.js";import{e as te}from"./D7m71n1Z.js";import{o as se}from"./tgW9DRyS.js";import{a as Z}from"./Bbxz25FD.js";import{l as q,t as oe,D as re}from"./By3vBf1W.js";const R=(f,a=O)=>{Q();var i=M();E(()=>ae(i,a())),p(f,i)};let ne=0;var me=y("<a><!></a>"),ie=y("<!> <!>",1),le=y("<header><!></header>");function _e(f,a){j(a,!0);const[i,k]=P(),T=()=>U(Y,"$page",i),l=Z.get(),o="tome_header_"+ne++,r=q.get(),_=X(l.name);r.add(o,l.name,_),se(()=>{r.remove(o)});const n=g(()=>oe(_,T().url.pathname)),c=g(()=>m(n).path),v=g(()=>m(n).path_is_selected);var h=le(),H=b(h);te(H,()=>m(v)?"h1":"h2",!1,(A,e)=>{S(A,0,"tome_header svelte-d05s6w");var s=ie(),t=B(s);{var z=d=>{R(d,()=>l.name)},G=d=>{var u=me(),K=b(u);R(K,()=>l.name),x(u),E(()=>V(u,"href",m(c))),p(d,u)};I(t,d=>{m(v)?d(z):d(G,!1)})}var J=C(t,2);W(J,{slug:_}),p(e,s)}),x(h),p(f,h),F(),k()}var ce=y('<section class="tome_content width_md mb_xl9"><header class="mb_xl3"><!></header> <!></section>');function De(f,a){j(a,!0);const[i,k]=P(),T=()=>U(Y,"$page",i),l=$(a,"library_path",3,re),o=q.get();Z.set(a.tome);const r=X(a.tome.name),_=g(()=>T().url.pathname===ee+l());var n=ce(),c=b(n),v=b(c);{var h=e=>{var s=N(),t=B(s);D(t,()=>a.header),p(e,s)},H=e=>{_e(e,{})};I(v,e=>{a.header?e(h):e(H,!1)})}x(c),w(c,(e,s)=>{var t;return(t=L)==null?void 0:t(e,s)},()=>m(_)?null:({intersecting:e})=>{e?o.slugs_onscreen.add(r):o.slugs_onscreen.delete(r)});var A=C(c,2);D(A,()=>a.children),x(n),w(n,(e,s)=>{var t;return(t=L)==null?void 0:t(e,s)},()=>m(_)?({intersecting:e})=>{e?o.slugs_onscreen.add(r):o.slugs_onscreen.delete(r)}:null),p(f,n),F(),k()}export{De as T};
