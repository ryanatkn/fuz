import"./CWj6FrbW.js";import{o as L}from"./xdwjdsAM.js";import{p,f as h,g as x,b as m,c as b,d as l,r as v,a as u,s as j,e as q,am as z,t as B}from"./DpDn43ma.js";import{s as F}from"./B7YlL7pk.js";import{i as G}from"./B7cJd8Gg.js";import{e as I}from"./h0CD0H22.js";import{a as S,C as J}from"./DuG0mCj_.js";import{p as K}from"./CZHbM0wv.js";import{p as M}from"./CbNMKSYk.js";import{b as N}from"./Tz-7uae8.js";import{s as O}from"./QeaNnfvq.js";import{a as P,i as Q,H as R}from"./F5oRfuht.js";import{c as U}from"./Doywmu7X.js";import{d as k}from"./BKsd5xQd.js";const T=U();var V=h("<section><!></section>");function fe(_,e){p(e,!0);const s=k.get();let a;T.set(t=>{a=t});var r=V();S(r,()=>({...e.attrs}));var c=l(r);x(c,()=>e.children),v(r),P(r,(t,i)=>{var d;return(d=Q)==null?void 0:d(t,i)},()=>({intersecting:t})=>{a&&(t?s.slugs_onscreen.add(a):s.slugs_onscreen.delete(a))}),m(_,r),b()}let W=0;var X=h("<div><!></div> <!>",1),Y=h("<header><!></header>");function le(_,e){p(e,!0);const s=K(e,"tag",3,"h3"),a=O(e.text),r=T.get();if(!r)throw Error("Tome_Section_Header must be a child of Tome_Section");r(a);const c="tome_section_header_"+W++,t=k.get();M.url.pathname!==N+t.root_path&&(t.add(c,e.text,a,s()),L(()=>{t.remove(c)}));var i=Y(),d=l(i);I(d,s,!1,(H,y)=>{S(H,()=>({...e.attrs,[J]:{tome_section_header:!0}}),void 0,"svelte-3vtdd8");var g=X(),f=u(g),C=l(f);{var w=o=>{var n=q(),E=u(n);x(E,()=>e.children),m(o,n)},A=o=>{var n=z();B(()=>F(n,e.text)),m(o,n)};G(C,o=>{e.children?o(w):o(A,!1)})}v(f);var D=j(f,2);R(D,{get slug(){return a}}),m(y,g)}),v(i),m(_,i),b()}export{fe as T,le as a};
