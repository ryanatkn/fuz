import{b as O,$ as L,a as E,t as F,f as C,c as u,s as k}from"./disclose-version.COjBdUkA.js";import{a as G,u as H,q as d,g as i,r as J,p as K,m as p}from"./runtime.BITJpo-a.js";import{d as M,e as Q}from"./render.Z7Ne6upu.js";import{i as U}from"./if.C-SBJCAL.js";import{s as V}from"./attributes.CdOanwG5.js";import{t as D}from"./class.xOCMzRrt.js";import{s as W}from"./style.CN5pMWL6.js";import{b as I}from"./this.Dvx4rKmO.js";import{p as b}from"./props.CQvavPLi.js";import{p as v}from"./proxy.QLsxkP1d.js";import{s as X,i as Y}from"./dom.2rUjCnDO.js";import{T as Z}from"./Teleport.B2g912Le.js";const $=(s=0)=>new Promise(t=>setTimeout(t,s)),_e=s=>s&&typeof s.then=="function";var ee=(s,t,g)=>{s.target===i(t)&&g(s)},te=F('<div class="dialog svelte-1v19quj" role="dialog" aria-modal="" tabindex="-1"><div class="dialog_layout svelte-1v19quj"><div class="dialog_wrapper svelte-1v19quj"><div class="dialog_bg svelte-1v19quj" role="none"></div> <div class="dialog_content svelte-1v19quj" role="none"><!></div></div></div></div>');function ue(s,t){G(t,!0);const g=b(t,"layout",3,"centered"),R=b(t,"index",3,0),z=b(t,"active",3,!0),x="body",q="fuz_dialog";let n=p(void 0);H(()=>{A(t.container)});const A=e=>{if(e)d(n,v(e));else{const o=document.getElementById(q);if(o)d(n,v(o));else{const a=document.querySelector(x);if(!a)throw Error(`Cannot find dialog root element with selector '${x}'`);d(n,v(document.createElement("div"))),i(n).id=q,i(n).style.display="contents",a.appendChild(i(n))}}};let f=p(void 0),y=p(void 0);const _=e=>{var o;e&&X(e),(o=t.onclose)==null||o.call(t)},N=e=>{var o,a;if(e.key==="Escape"&&!Y(e.target)){const r=(o=i(f))==null?void 0:o.parentElement,l=(a=r==null?void 0:r.parentElement)==null?void 0:a.children,c=Array.prototype.indexOf.call(l,r);(!l||c===l.length-1||c===-1)&&_(e)}};let w=p(!1);var T=O();Q("keydown",L,function(...e){const o=z()?N:void 0;return o==null?void 0:o.apply(this,e)},!1);var P=C(T);Z(P,{get to(){return i(n)},onmove:async()=>{var e;await $(),d(w,!0),(e=i(f))==null||e.focus()},children:(e,o)=>{var a=te();I(a,m=>d(f,v(m)),()=>i(f));var r=u(a),l=u(r),c=u(l);c.__mousedown=_;var h=k(k(c,!0));I(h,m=>d(y,v(m)),()=>i(y)),h.__mousedown=[ee,y,_];var S=u(h);U(S,()=>i(w),m=>{var j=O(),B=C(j);V(()=>t.children,B,()=>_),E(m,j)}),J(()=>{D(a,"ready",i(w)),D(a,"layout_page",g()==="page"),W(a,"z-index",100+R())}),E(e,a)}}),E(s,T),K()}M(["mousedown"]);export{ue as D,_e as i};
