var x=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)};var r=(i,e,s)=>(x(i,e,"read from private field"),s?s.call(i):e.get(i)),l=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)};var z=(i,e,s)=>(x(i,e,"access private method"),s);import{p as y}from"./if.CJZ2U21M.js";import{J as u,ak as b,g as h,aa as w}from"./runtime.OOkXorm-.js";import{b as S}from"./entry.ZwyiQLno.js";import{c as E}from"./context_helpers.BT2NswI4.js";function k(i){u(i,i.v+1)}var F=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],O=["difference","intersection","symmetricDifference","union"],D=!1,f,o,c,m,L;const v=class v extends Set{constructor(s){super();l(this,m);l(this,f,new Map);l(this,o,b(0));l(this,c,b(0));if(s){for(var t of s)super.add(t);r(this,c).v=super.size}D||z(this,m,L).call(this)}has(s){var t=super.has(s),a=r(this,f),n=a.get(s);if(n===void 0){if(!t)return h(r(this,o)),!1;n=b(!0),a.set(s,n)}return h(n),t}add(s){return super.has(s)||(super.add(s),u(r(this,c),super.size),k(r(this,o))),this}delete(s){var t=super.delete(s),a=r(this,f),n=a.get(s);return n!==void 0&&(a.delete(s),u(n,!1)),t&&(u(r(this,c),super.size),k(r(this,o))),t}clear(){if(super.size!==0){super.clear();var s=r(this,f);for(var t of s.values())u(t,!1);s.clear(),u(r(this,c),0),k(r(this,o))}}keys(){return this.values()}values(){return h(r(this,o)),super.values()}entries(){return h(r(this,o)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return h(r(this,c))}};f=new WeakMap,o=new WeakMap,c=new WeakMap,m=new WeakSet,L=function(){D=!0;var s=v.prototype,t=Set.prototype;for(const a of F)s[a]=function(...n){return h(r(this,o)),t[a].apply(this,n)};for(const a of O)s[a]=function(...n){h(r(this,o));var _=t[a].apply(this,n);return new v(_)}};let g=v;const A="/library",M=(i,e,s=A)=>{const t=e.split("/").at(-1);return{path:S+s+"/"+i,path_is_selected:t===i,path_segment:t}},P=E(()=>new R);var p,d;class R{constructor(e=A){l(this,p,w(y([])));l(this,d,w(y(new g)));this.root_path=e}get library_links(){return h(r(this,p))}set library_links(e){u(r(this,p),y(e))}get slugs_onscreen(){return h(r(this,d))}set slugs_onscreen(e){u(r(this,d),y(e))}add(e,s,t,a){const n=this.library_links.findIndex(I=>I.id===e),_={id:e,text:s,slug:t,tag:a};n===-1?this.library_links.push(_):this.library_links[n]=_}remove(e){const s=this.library_links.findIndex(t=>t.id===e);return s===-1?!1:(this.library_links.splice(s,1),!0)}}p=new WeakMap,d=new WeakMap;export{A as D,P as l,M as t};
