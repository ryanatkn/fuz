import{t as p,a as c,c as F,j as G}from"./CD1Mi0SX.js";import{p as S,t as g,a as y,k as h,l as u,f as k,s as I}from"./DgHdyJao.js";import{s as J}from"./XS_lrMhg.js";import{a as K,s as M,i as N}from"./ggRqHX6r.js";import{s as T,a as H,C as O}from"./B0jpAD2V.js";import{e as P}from"./bqOb-uOs.js";import{p as Q}from"./D7b1jwlz.js";import{o as R}from"./Cod2ZPgr.js";import{p as U}from"./cgsHLfUS.js";import{b as V}from"./CrUGrSjv.js";import{s as W}from"./QeaNnfvq.js";import{a as X,i as Y,H as Z}from"./CSZqHnxS.js";import{c as $}from"./Byb6bGPF.js";import{l as C}from"./DlKqBhD6.js";const j=$();var ee=p("<section><!></section>");function pe(d,e){S(e,!0);const _=C.get();let r;j.set(t=>{r=t});var a=ee();let i;var n=h(a);T(n,()=>e.children),u(a),X(a,(t,l)=>{var s;return(s=Y)==null?void 0:s(t,l)},()=>({intersecting:t})=>{r&&(t?_.slugs_onscreen.add(r):_.slugs_onscreen.delete(r))}),g(()=>i=H(a,i,{...e.attrs})),c(d,a),y()}let te=0;var ae=p("<div><!></div> <!>",1),re=p("<header><!></header>");function be(d,e){S(e,!0);const[_,r]=M(),a=()=>K(U,"$page",_),i=Q(e,"tag",3,"h3"),n=W(e.text),t=j.get();if(!t)throw Error("Tome_Section_Header must be a child of Tome_Section");t(n);const l="tome_section_header_"+te++,s=C.get();a().url.pathname!==V+s.root_path&&(s.add(l,e.text,n,i()),R(()=>{s.remove(l)}));var f=re(),w=h(f);P(w,i,!1,(A,D)=>{let b;g(()=>b=H(A,b,{...e.attrs,[O]:{tome_section_header:!0}},"svelte-3vtdd8"));var x=ae(),v=k(x),E=h(v);{var L=o=>{var m=F(),B=k(m);T(B,()=>e.children),c(o,m)},q=o=>{var m=G();g(()=>J(m,e.text)),c(o,m)};N(E,o=>{e.children?o(L):o(q,!1)})}u(v);var z=I(v,2);Z(z,{slug:n}),c(D,x)}),u(f),c(d,f),y(),r()}export{pe as T,be as a};
