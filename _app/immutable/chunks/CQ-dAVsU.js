var x=t=>{throw TypeError(t)};var z=(t,e,s)=>e.has(t)||x("Cannot "+s);var r=(t,e,s)=>(z(t,e,"read from private field"),s?s.call(t):e.get(t)),l=(t,e,s)=>e.has(t)?x("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s);var w=(t,e,s)=>(z(t,e,"access private method"),s);import{G as u,ab as v,g as h,a2 as D}from"./C9aPwLmV.js";import{p as y}from"./DSlEI_lp.js";import{b as E}from"./w_4T1joj.js";import{c as F}from"./DT_pRE8c.js";function k(t){u(t,t.v+1)}var O=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],R=["difference","intersection","symmetricDifference","union"],L=!1,f,o,c,m,A;const b=class b extends Set{constructor(s){super();l(this,m);l(this,f,new Map);l(this,o,v(0));l(this,c,v(0));if(s){for(var i of s)super.add(i);r(this,c).v=super.size}L||w(this,m,A).call(this)}has(s){var i=super.has(s),a=r(this,f),n=a.get(s);if(n===void 0){if(!i)return h(r(this,o)),!1;n=v(!0),a.set(s,n)}return h(n),i}add(s){return super.has(s)||(super.add(s),u(r(this,c),super.size),k(r(this,o))),this}delete(s){var i=super.delete(s),a=r(this,f),n=a.get(s);return n!==void 0&&(a.delete(s),u(n,!1)),i&&(u(r(this,c),super.size),k(r(this,o))),i}clear(){if(super.size!==0){super.clear();var s=r(this,f);for(var i of s.values())u(i,!1);s.clear(),u(r(this,c),0),k(r(this,o))}}keys(){return this.values()}values(){return h(r(this,o)),super.values()}entries(){return h(r(this,o)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return h(r(this,c))}};f=new WeakMap,o=new WeakMap,c=new WeakMap,m=new WeakSet,A=function(){L=!0;var s=b.prototype,i=Set.prototype;for(const a of O)s[a]=function(...n){return h(r(this,o)),i[a].apply(this,n)};for(const a of R)s[a]=function(...n){h(r(this,o));var _=i[a].apply(this,n);return new b(_)}};let g=b;const I="/library",P=(t,e,s=I)=>{const i=e.split("/").at(-1);return{path:E+s+"/"+t,path_is_selected:i===t,path_segment:i}},U=F(()=>new T);var p,d;class T{constructor(e=I){l(this,p,D(y([])));l(this,d,D(y(new g)));this.root_path=e}get library_links(){return h(r(this,p))}set library_links(e){u(r(this,p),y(e))}get slugs_onscreen(){return h(r(this,d))}set slugs_onscreen(e){u(r(this,d),y(e))}add(e,s,i,a){const n=this.library_links.findIndex(S=>S.id===e),_={id:e,text:s,slug:i,tag:a};n===-1?this.library_links.push(_):this.library_links[n]=_}remove(e){const s=this.library_links.findIndex(i=>i.id===e);return s===-1?!1:(this.library_links.splice(s,1),!0)}}p=new WeakMap,d=new WeakMap;export{I as D,k as i,U as l,P as t};
