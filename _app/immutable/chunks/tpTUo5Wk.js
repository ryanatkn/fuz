import"./DsnmJJEf.js";import{o as E}from"./BQP0D9-I.js";import{p as u,f as v,g as p,b as m,c as x,d as f,r as l,a as g,s as L,e as j,aq as z,t as B}from"./hvi78P_d.js";import{s as F}from"./DcnXoHJa.js";import{i as G}from"./b9UmUbIo.js";import{e as I}from"./B1Hw8Zj6.js";import{a as S,C as J}from"./baBGA4xI.js";import{p as K}from"./Cu6gSB0G.js";import{p as M}from"./CcNHvrYa.js";import{r as N}from"./CM82E11j.js";import{s as O}from"./QeaNnfvq.js";import{a as P,i as Q,H as R}from"./DOBbgDu-.js";import{c as U}from"./gGLiu_OD.js";import{d as b}from"./B35Pa2Ut.js";const k=U();var V=v("<section><!></section>");function fe(d,e){u(e,!0);const s=b.get();let r;k.set(t=>{r=t});var a=V();S(a,()=>({...e.attrs}));var c=f(a);p(c,()=>e.children),l(a),P(a,(t,i)=>Q?.(t,i),()=>({intersecting:t})=>{r&&(t?s.slugs_onscreen.add(r):s.slugs_onscreen.delete(r))}),m(d,a),x()}let W=0;var X=v("<div><!></div> <!>",1),Y=v("<header><!></header>");function le(d,e){u(e,!0);const s=K(e,"tag",3,"h3"),r=O(e.text),a=k.get();if(!a)throw Error("Tome_Section_Header must be a child of Tome_Section");a(r);const c="tome_section_header_"+W++,t=b.get();M.url.pathname!==N(t.root_path)&&(t.add(c,e.text,r,s()),E(()=>{t.remove(c)}));var i=Y(),T=f(i);I(T,s,!1,(H,y)=>{S(H,()=>({...e.attrs,[J]:{tome_section_header:!0}}),void 0,void 0,"svelte-3vtdd8");var h=X(),_=g(h),C=f(_);{var q=o=>{var n=j(),D=g(n);p(D,()=>e.children),m(o,n)},w=o=>{var n=z();B(()=>F(n,e.text)),m(o,n)};G(C,o=>{e.children?o(q):o(w,!1)})}l(_);var A=L(_,2);R(A,{get slug(){return r}}),m(y,h)}),l(i),m(d,i),x()}export{fe as T,le as a};
