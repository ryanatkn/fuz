import{a as _,t as v,g as j,c as q}from"./disclose-version.ZoaYz1AU.js";import{p as w,a as C,c as g,g as i,r as u,d as h,N as z,f as I,t as D,s as L,a4 as J,a3 as K}from"./runtime.DaB_8cOj.js";import{i as P}from"./if.BRCK-0uq.js";import{b as O,c as Q,s as E}from"./attributes.BPvofiUC.js";import{H as W,a as N,i as R}from"./intersect.BjZoTFN6.js";import{p as X}from"./props.tfL6ot4I.js";import{s as S,a as U,p as B}from"./stores.BlNbJkKa.js";import{s as F}from"./path.QeaNnfvq.js";import{b as Z}from"./entry.DwUV7bxs.js";import{s as $}from"./render.DpEwyGnv.js";import{e as ee}from"./svelte-element.BVmCkY3n.js";import{o as ae}from"./index-client.08JWXHmx.js";import{a as G}from"./tome.CsBaNlZJ.js";import{l as M,t as te,D as se}from"./library_helpers.svelte.CEPxc1wG.js";let oe=0;var re=v("<a><!></a>"),ne=v("<!> <!>",1),me=v("<header><!></header>");function ie(b,a){w(a,!0);const x=S(),y=()=>U(B,"$page",x),d=(m,A=K)=>{J();var c=j();D(()=>$(c,A())),_(m,c)},t=G.get(),r="tome_header_"+((oe+=1)-1),l=M.get(),s=F(t.name);l.add(r,t.name,s),ae(()=>{l.remove(r)});const n=h(()=>te(s,y().url.pathname)),k=h(()=>i(n).path),p=h(()=>i(n).path_is_selected);var e=me(),o=g(e);ee(o,()=>i(p)?"h1":"h2",!1,(m,A)=>{O(m,null,{class:"tome_header"},"svelte-d05s6w",m.namespaceURI!==z,m.nodeName.includes("-"));var c=ne(),H=I(c);P(H,()=>i(p),T=>{d(T,()=>t.name)},T=>{var f=re(),Y=g(f);d(Y,()=>t.name),u(f),D(()=>Q(f,"href",i(k))),_(T,f)});var V=L(H,2);W(V,{slug:s}),_(A,c)}),u(e),_(b,e),C()}var _e=v('<section class="tome_content width_md mb_xl9"><header class="mb_xl3"><!></header> <!></section>');function Te(b,a){w(a,!0);const x=S(),y=()=>U(B,"$page",x),d=X(a,"library_path",3,se),t=M.get();G.set(a.tome);const r=F(a.tome.name),l=h(()=>y().url.pathname===Z+d());var s=_e(),n=g(s),k=g(n);P(k,()=>a.header,e=>{var o=q(),m=I(o);E(m,()=>a.header),_(e,o)},e=>{ie(e,{})}),u(n);var p=L(n,2);E(p,()=>a.children),u(s),N(n,(e,o)=>R(e,o),()=>i(l)?null:({intersecting:e})=>{e?t.slugs_onscreen.add(r):t.slugs_onscreen.delete(r)}),N(s,(e,o)=>R(e,o),()=>i(l)?({intersecting:e})=>{e?t.slugs_onscreen.add(r):t.slugs_onscreen.delete(r)}:null),_(b,s),C()}export{Te as T};
