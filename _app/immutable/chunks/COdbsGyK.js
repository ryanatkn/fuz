import{t as b,a as m,c as P,j as R}from"./CbbyqTNh.js";import{p as y,t as p,a as T,k as u,l as h,N as U,f as S,s as V}from"./C9aPwLmV.js";import{s as q}from"./Bb4_Y-AM.js";import{a as z,s as B,i as F}from"./DSlEI_lp.js";import{s as H,a as E}from"./DGBAUQNC.js";import{e as J}from"./D3Y0gN4q.js";import{t as K}from"./cfbZBCHI.js";import{p as L}from"./2t0GVDdd.js";import{o as O}from"./CM252P3v.js";import{p as Q}from"./CWMGQbNm.js";import{b as W}from"./D3Noi4rl.js";import{s as X}from"./QeaNnfvq.js";import{a as Y,i as Z,H as $}from"./BTGG-Xgr.js";import{c as tt}from"./DT_pRE8c.js";import{l as N}from"./POn-39GH.js";const A=tt();var et=b("<section><!></section>");function xt(f,t){y(t,!0);const _=N.get();let r;A.set(e=>{r=e});var a=et();let i;var n=u(a);H(n,()=>t.children),h(a),Y(a,(e,l)=>{var s;return(s=Z)==null?void 0:s(e,l)},()=>({intersecting:e})=>{r&&(e?_.slugs_onscreen.add(r):_.slugs_onscreen.delete(r))}),p(()=>i=E(a,i,{...t.attrs})),m(f,a),T()}let at=0;var rt=b("<div><!></div> <!>",1),st=b("<header><!></header>");function kt(f,t){y(t,!0);const[_,r]=B(),a=()=>z(Q,"$page",_),i=L(t,"tag",3,"h3"),n=X(t.text),e=A.get();if(!e)throw Error("Tome_Section_Header must be a child of Tome_Section");e(n);const l="tome_section_header_"+at++,s=N.get();a().url.pathname!==W+s.root_path&&(s.add(l,t.text,n,i()),O(()=>{s.remove(l)}));var v=st(),j=u(v);J(j,i,!1,(d,w)=>{let x;p(()=>{x=E(d,x,{...t.attrs},"svelte-3vtdd8",d.namespaceURI===U,d.nodeName.includes("-")),K(d,"tome_section_header",!0)});var k=rt(),g=S(k),C=u(g);{var D=o=>{var c=P(),M=S(c);H(M,()=>t.children),m(o,c)},G=o=>{var c=R();p(()=>q(c,t.text)),m(o,c)};F(C,o=>{t.children?o(D):o(G,!1)})}h(g);var I=V(g,2);$(I,{slug:n}),m(w,k)}),h(v),m(f,v),T(),r()}export{xt as T,kt as a};
