import{t as g,a as c,c as q,k as z}from"./BVHb_Il8.js";import{p as k,t as v,a as S,c as h,r as u,f as b,s as B}from"./KxkgHfFn.js";import{s as F}from"./BS3qJFfO.js";import{i as G}from"./DS0sZ1G2.js";import{s as T,a as H,C as I}from"./Cy2-dw9e.js";import{e as J}from"./Dfg1UJo1.js";import{p as K}from"./TRjZVCas.js";import{o as M}from"./DfTb2FES.js";import{p as N}from"./CFbgXhoB.js";import{b as O}from"./Bn60vQVs.js";import{s as P}from"./QeaNnfvq.js";import{a as Q,i as R,H as U}from"./FT04pbbR.js";import{c as V}from"./CGz3JggW.js";import{d as y}from"./CSfbCh-s.js";const C=V();var W=g("<section><!></section>");function lt(_,t){k(t,!0);const s=y.get();let a;C.set(e=>{a=e});var r=W();let i;var n=h(r);T(n,()=>t.children),u(r),Q(r,(e,f)=>{var d;return(d=R)==null?void 0:d(e,f)},()=>({intersecting:e})=>{a&&(e?s.slugs_onscreen.add(a):s.slugs_onscreen.delete(a))}),v(()=>i=H(r,i,{...t.attrs})),c(_,r),S()}let X=0;var Y=g("<div><!></div> <!>",1),Z=g("<header><!></header>");function vt(_,t){k(t,!0);const s=K(t,"tag",3,"h3"),a=P(t.text),r=C.get();if(!r)throw Error("Tome_Section_Header must be a child of Tome_Section");r(a);const i="tome_section_header_"+X++,n=y.get();N.url.pathname!==O+n.root_path&&(n.add(i,t.text,a,s()),M(()=>{n.remove(i)}));var e=Z(),f=h(e);J(f,s,!1,(d,w)=>{let p;v(()=>p=H(d,p,{...t.attrs,[I]:{tome_section_header:!0}},"svelte-3vtdd8"));var x=Y(),l=b(x),A=h(l);{var D=o=>{var m=q(),j=b(m);T(j,()=>t.children),c(o,m)},E=o=>{var m=z();v(()=>F(m,t.text)),c(o,m)};G(A,o=>{t.children?o(D):o(E,!1)})}u(l);var L=B(l,2);U(L,{slug:a}),c(w,x)}),u(e),c(_,e),S()}export{lt as T,vt as a};
