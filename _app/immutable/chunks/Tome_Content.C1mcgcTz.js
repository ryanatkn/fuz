import{s as R,a as p,t as k,k as z,b as w,c as J}from"./disclose-version.BmNp8pRT.js";import{a as C,c as x,N as K,f as I,g as i,s as L,r as y,p as P,d as b,t as S,a4 as O,a3 as Q}from"./runtime.CTRYSQ17.js";import{i as U}from"./if.CQC794wY.js";import{a as W,b as X,s as H}from"./attributes.Bd3_RS60.js";import{H as Z,a as D,i as E}from"./intersect.CEAVTEe-.js";import{p as $}from"./props.Dw9ghfrp.js";import{s as B}from"./path.QeaNnfvq.js";import{p as F}from"./stores.B6C8NOad.js";import{b as ee}from"./entry.Lfj-EjHt.js";import{s as ae}from"./render.CRd-sPzB.js";import{e as te}from"./svelte-element.RaleMG77.js";import{o as se}from"./index-client.DRAchYjU.js";import{a as G}from"./tome.duQd9iFM.js";import{l as M,t as oe,D as re}from"./library_helpers.svelte.CIgXRLom.js";const N=(f,a=Q)=>{O();var m=z();S(()=>ae(m,a())),p(f,m)};let ne=0;var ie=k("<a><!></a>"),me=k("<!> <!>",1),le=k("<header><!></header>");function _e(f,a){C(a,!0);const m=R(),A=()=>w(F,"$page",m),l=G.get(),o="tome_header_"+ne++,r=M.get(),_=B(l.name);r.add(o,l.name,_),se(()=>{r.remove(o)});const n=b(()=>oe(_,A().url.pathname)),c=b(()=>i(n).path),g=b(()=>i(n).path_is_selected);var h=le(),T=x(h);te(T,()=>i(g)?"h1":"h2",!1,(v,e)=>{W(v,null,{class:"tome_header"},"svelte-d05s6w",v.namespaceURI===K,v.nodeName.includes("-"));var s=me(),t=I(s);{var V=d=>{N(d,()=>l.name)},Y=d=>{var u=ie(),q=x(u);N(q,()=>l.name),y(u),S(()=>X(u,"href",i(c))),p(d,u)};U(t,d=>{i(g)?d(V):d(Y,!1)})}var j=L(t,2);Z(j,{slug:_}),p(e,s)}),y(h),p(f,h),P()}var ce=k('<section class="tome_content width_md mb_xl9"><header class="mb_xl3"><!></header> <!></section>');function De(f,a){C(a,!0);const m=R(),A=()=>w(F,"$page",m),l=$(a,"library_path",3,re),o=M.get();G.set(a.tome);const r=B(a.tome.name),_=b(()=>A().url.pathname===ee+l());var n=ce(),c=x(n),g=x(c);{var h=e=>{var s=J(),t=I(s);H(t,()=>a.header),p(e,s)},T=e=>{_e(e,{})};U(g,e=>{a.header?e(h):e(T,!1)})}y(c),D(c,(e,s)=>{var t;return(t=E)==null?void 0:t(e,s)},()=>i(_)?null:({intersecting:e})=>{e?o.slugs_onscreen.add(r):o.slugs_onscreen.delete(r)});var v=L(c,2);H(v,()=>a.children),y(n),D(n,(e,s)=>{var t;return(t=E)==null?void 0:t(e,s)},()=>i(_)?({intersecting:e})=>{e?o.slugs_onscreen.add(r):o.slugs_onscreen.delete(r)}:null),p(f,n),P()}export{De as T};
