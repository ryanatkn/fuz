import{a as c,t as u,c as M,j as P}from"./disclose-version.qccFV9AM.js";import{t as g,p as S,a as y,k as h,l as p,f as k,s as R,N as U}from"./runtime.B2HyCRSG.js";import{s as V}from"./render.DuAIDw5y.js";import{s as q,a as z,i as B}from"./store.CItsiEdH.js";import{s as T,a as H}from"./attributes.LBTBdhoE.js";import{e as F}from"./svelte-element.Bj6nyNYe.js";import{t as J}from"./class.Dw6Ly5wt.js";import{p as K}from"./props.DO01tcwN.js";import{o as L}from"./index-client.DfRMKLmL.js";import{p as O}from"./stores.BTIgHLDR.js";import{b as Q}from"./entry.BQv2vtXv.js";import{s as W}from"./path.QeaNnfvq.js";import{a as X,i as Y,H as Z}from"./intersect.C2iU56M7.js";import{c as $}from"./context_helpers.DIuDWXkJ.js";import{l as E}from"./library_helpers.svelte.CSl0BAjR.js";const N=$();var tt=u("<section><!></section>");function bt(f,t){y(t,!0);const _=E.get();let r;N.set(a=>{r=a});var e=tt();let s;var l=h(e);T(l,()=>t.children),p(e),X(e,(a,n)=>{var o;return(o=Y)==null?void 0:o(a,n)},()=>({intersecting:a})=>{r&&(a?_.slugs_onscreen.add(r):_.slugs_onscreen.delete(r))}),g(()=>s=H(e,s,{...t.attrs})),c(f,e),S()}let et=0;var at=u("<div><!></div> <!>",1),rt=u("<header><!></header>");function xt(f,t){y(t,!0);const _=q(),r=()=>z(O,"$page",_),e=K(t,"tag",3,"h3"),s=W(t.text),l=N.get();if(!l)throw Error("Tome_Section_Header must be a child of Tome_Section");l(s);const a="tome_section_header_"+et++,n=E.get();r().url.pathname!==Q+n.root_path&&(n.add(a,t.text,s,e()),L(()=>{n.remove(a)}));var o=rt(),A=h(o);F(A,e,!1,(d,j)=>{let b;g(()=>{b=H(d,b,{...t.attrs},"svelte-3vtdd8",d.namespaceURI===U,d.nodeName.includes("-")),J(d,"tome_section_header",!0)});var x=at(),v=k(x),w=h(v);{var C=i=>{var m=M(),I=k(m);T(I,()=>t.children),c(i,m)},D=i=>{var m=P();g(()=>V(m,t.text)),c(i,m)};B(w,i=>{t.children?i(C):i(D,!1)})}p(v);var G=R(v,2);Z(G,{slug:s}),c(j,x)}),p(o),c(f,o),S()}export{bt as T,xt as a};
