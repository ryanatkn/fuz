import{s as w,a as _,t as v,k as j,b as C,c as q}from"./disclose-version.CNjwL26W.js";import{a as I,g as i,p as L,d as h,c as g,N as z,f as P,r as u,t as D,s as S,a4 as J,a3 as K}from"./runtime.B-gUiV1I.js";import{i as U}from"./if.DNsq1zR9.js";import{a as O,b as Q,s as E}from"./attributes.C4-PK8QZ.js";import{H as W,a as N,i as R}from"./intersect.BIOnSgs1.js";import{p as X}from"./props.Cy-UtRwa.js";import{s as B}from"./path.QeaNnfvq.js";import{p as F}from"./stores.DvTGbgNk.js";import{b as Z}from"./entry.BWgM4Mr7.js";import{s as $}from"./render.Dvbgo3Ck.js";import{e as ee}from"./svelte-element.p96qTMsF.js";import{o as ae}from"./index-client.BtWieJN8.js";import{a as G}from"./tome.siBNfEyl.js";import{l as M,t as te,D as se}from"./library_helpers.svelte.iLhCEAbJ.js";let oe=0;var re=v("<a><!></a>"),ne=v("<!> <!>",1),me=v("<header><!></header>");function ie(b,a){I(a,!0);const x=w(),y=()=>C(F,"$page",x),d=(m,A=K)=>{J();var c=j();D(()=>$(c,A())),_(m,c)},t=G.get(),r="tome_header_"+((oe+=1)-1),l=M.get(),s=B(t.name);l.add(r,t.name,s),ae(()=>{l.remove(r)});const n=h(()=>te(s,y().url.pathname)),k=h(()=>i(n).path),p=h(()=>i(n).path_is_selected);var e=me(),o=g(e);ee(o,()=>i(p)?"h1":"h2",!1,(m,A)=>{O(m,null,{class:"tome_header"},"svelte-d05s6w",m.namespaceURI===z,m.nodeName.includes("-"));var c=ne(),H=P(c);U(H,()=>i(p),T=>{d(T,()=>t.name)},T=>{var f=re(),Y=g(f);d(Y,()=>t.name),u(f),D(()=>Q(f,"href",i(k))),_(T,f)});var V=S(H,2);W(V,{slug:s}),_(A,c)}),u(e),_(b,e),L()}var _e=v('<section class="tome_content width_md mb_xl9"><header class="mb_xl3"><!></header> <!></section>');function Te(b,a){I(a,!0);const x=w(),y=()=>C(F,"$page",x),d=X(a,"library_path",3,se),t=M.get();G.set(a.tome);const r=B(a.tome.name),l=h(()=>y().url.pathname===Z+d());var s=_e(),n=g(s),k=g(n);U(k,()=>a.header,e=>{var o=q(),m=P(o);E(m,()=>a.header),_(e,o)},e=>{ie(e,{})}),u(n),N(n,(e,o)=>R(e,o),()=>i(l)?null:({intersecting:e})=>{e?t.slugs_onscreen.add(r):t.slugs_onscreen.delete(r)});var p=S(n,2);E(p,()=>a.children),u(s),N(s,(e,o)=>R(e,o),()=>i(l)?({intersecting:e})=>{e?t.slugs_onscreen.add(r):t.slugs_onscreen.delete(r)}:null),_(b,s),L()}export{Te as T};
