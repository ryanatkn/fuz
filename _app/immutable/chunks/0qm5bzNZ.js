import"./DsnmJJEf.js";import{aB as j,p as q,o as L,ar as r,aC as _,i as a,aD as P,aE as F,f as G,d as f,s as H,r as m,t as J,b as C,g as K,a as M,h as Q,c as U}from"./DFPGRpXC.js";import{i as V}from"./B9dAxPDU.js";import{h as W,j as X}from"./BcAAJJP1.js";import{b as O}from"./uyiARXNM.js";import{p as u}from"./Cn9cylxT.js";import{s as Y,i as Z}from"./V2q5a4YM.js";import{w as $}from"./CyDE3FWY.js";import{T as ee}from"./Db-upp8H.js";var te=G('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-1ayz0dr"><div class="dialog_wrapper svelte-1ayz0dr" role="none"><div class="dialog_bg svelte-1ayz0dr" aria-hidden="true"></div> <div class="dialog_content svelte-1ayz0dr"><!></div></div></div></div>');function ve(T,s){q(s,!0);const k=u(s,"layout",3,"centered"),D=u(s,"index",3,0),I=u(s,"active",3,!0),w=u(s,"content_selector",3,".pane"),E="body",b="fuz_dialog";let i=_(void 0);L(()=>{R(s.container)});const R=e=>{if(e)r(i,e,!0);else{const n=document.getElementById(b);if(n)r(i,n,!0);else{const t=document.querySelector(E);if(!t)throw Error(`Cannot find dialog root element with selector '${E}'`);r(i,document.createElement("div"),!0),a(i).id=b,a(i).style.display="contents",t.appendChild(a(i))}}};let v=_(void 0),d=_(void 0);const p=e=>{e&&Y(e),s.onclose?.()},A=e=>{if(e.key==="Escape"&&!Z(e.target)){const n=a(v)?.parentElement,t=n?.parentElement?.children,c=Array.prototype.indexOf.call(t,n);(!t||c===t.length-1||c===-1)&&p(e)}};let y=_(!1);P("keydown",F,function(...e){(I()?A:void 0)?.apply(this,e)}),ee(T,{get to(){return a(i)},onmove:async()=>{await $(),r(y,!0),a(v)?.focus()},children:(e,n)=>{var t=te();let c,x;var z=f(t),g=f(z);g.__mousedown=o=>{const l=o.target;a(d)&&(a(d)===l||!a(d).contains(l)||w()&&!l.closest(w()))&&p(o)};var h=H(f(g),2),B=f(h);{var N=o=>{var l=K(),S=M(l);Q(S,()=>s.children,()=>p),C(o,l)};V(B,o=>{a(y)&&o(N)})}m(h),O(h,o=>r(d,o),()=>a(d)),m(g),m(z),m(t),O(t,o=>r(v,o),()=>a(v)),J(()=>{c=W(t,1,"dialog svelte-1ayz0dr",null,c,{ready:a(y),layout_page:k()==="page"}),x=X(t,"",x,{"z-index":100+D()})}),C(e,t)},$$slots:{default:!0}}),U()}j(["mousedown"]);export{ve as D};
