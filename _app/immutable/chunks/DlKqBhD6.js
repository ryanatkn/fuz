var g=r=>{throw TypeError(r)};var x=(r,e,s)=>e.has(r)||g("Cannot "+s);var t=(r,e,s)=>(x(r,e,"read from private field"),s?s.call(r):e.get(r)),l=(r,e,s)=>e.has(r)?g("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,s);var z=(r,e,s)=>(x(r,e,"access private method"),s);import{K as h,ae as v,g as u,a5 as w,J as D}from"./DgHdyJao.js";import{b as E}from"./CrUGrSjv.js";import{c as F}from"./Byb6bGPF.js";function b(r){h(r,r.v+1)}var O=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],R=["difference","intersection","symmetricDifference","union"],L=!1,f,o,c,y,A;const m=class m extends Set{constructor(s){super();l(this,y);l(this,f,new Map);l(this,o,v(0));l(this,c,v(0));if(s){for(var i of s)super.add(i);t(this,c).v=super.size}L||z(this,y,A).call(this)}has(s){var i=super.has(s),a=t(this,f),n=a.get(s);if(n===void 0){if(!i)return u(t(this,o)),!1;n=v(!0),a.set(s,n)}return u(n),i}add(s){return super.has(s)||(super.add(s),h(t(this,c),super.size),b(t(this,o))),this}delete(s){var i=super.delete(s),a=t(this,f),n=a.get(s);return n!==void 0&&(a.delete(s),h(n,!1)),i&&(h(t(this,c),super.size),b(t(this,o))),i}clear(){if(super.size!==0){super.clear();var s=t(this,f);for(var i of s.values())h(i,!1);s.clear(),h(t(this,c),0),b(t(this,o))}}keys(){return this.values()}values(){return u(t(this,o)),super.values()}entries(){return u(t(this,o)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return u(t(this,c))}};f=new WeakMap,o=new WeakMap,c=new WeakMap,y=new WeakSet,A=function(){L=!0;var s=m.prototype,i=Set.prototype;for(const a of O)s[a]=function(...n){return u(t(this,o)),i[a].apply(this,n)};for(const a of R)s[a]=function(...n){u(t(this,o));var _=i[a].apply(this,n);return new m(_)}};let k=m;const I="/library",K=(r,e,s=I)=>{const i=e.split("/").at(-1);return{path:E+s+"/"+r,path_is_selected:i===r,path_segment:i}},M=F(()=>new T);var p,d;class T{constructor(e=I){l(this,p,w(D([])));l(this,d,w(D(new k)));this.root_path=e}get library_links(){return u(t(this,p))}set library_links(e){h(t(this,p),e,!0)}get slugs_onscreen(){return u(t(this,d))}set slugs_onscreen(e){h(t(this,d),e,!0)}add(e,s,i,a){const n=this.library_links.findIndex(S=>S.id===e),_={id:e,text:s,slug:i,tag:a};n===-1?this.library_links.push(_):this.library_links[n]=_}remove(e){const s=this.library_links.findIndex(i=>i.id===e);return s===-1?!1:(this.library_links.splice(s,1),!0)}}p=new WeakMap,d=new WeakMap;export{I as D,b as i,M as l,K as t};
