import{n as t,o as i,j as b,q as E,v as w,w as m,x as s,y as A,z as S,A as C}from"./B7qs8f6Z.js";function q(e,l,r=l){var d=new WeakSet;t(e,"input",async c=>{var f=c?e.defaultValue:e.value;if(f=u(e)?k(f):f,r(f),s!==null&&d.add(s),await A(),f!==(f=l())){var v=e.selectionStart,o=e.selectionEnd,h=e.value.length;if(e.value=f??"",o!==null){var a=e.value.length;v===o&&o===h&&a>h?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=v,e.selectionEnd=Math.min(o,a))}}}),(b&&e.defaultValue!==e.value||S(l)==null&&e.value)&&(r(u(e)?k(e.value):e.value),s!==null&&d.add(s)),i(()=>{var c=l();if(e===document.activeElement){var f=C??s;if(d.has(f))return}u(e)&&c===k(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const _=new Set;function V(e,l,r,d,c=d){var f=r.getAttribute("type")==="checkbox",v=e;let o=!1;if(l!==null)for(var h of l)v=v[h]??=[];v.push(r),t(r,"change",()=>{var a=r.__value;f&&(a=y(v,a,r.checked)),c(a)},()=>c(f?[]:null)),i(()=>{var a=d();if(b&&r.defaultChecked!==r.checked){o=!0;return}f?(a=a||[],r.checked=a.includes(r.__value)):r.checked=E(r.__value,a)}),w(()=>{var a=v.indexOf(r);a!==-1&&v.splice(a,1)}),_.has(v)||(_.add(v),m(()=>{v.sort((a,n)=>a.compareDocumentPosition(n)===4?-1:1),_.delete(v)})),m(()=>{if(o){var a;if(f)a=y(v,a,r.checked);else{var n=v.find(x=>x.checked);a=n?.__value}c(a)}})}function j(e,l,r=l){t(e,"change",d=>{var c=d?e.defaultChecked:e.checked;r(c)}),(b&&e.defaultChecked!==e.checked||S(l)==null)&&r(e.checked),i(()=>{var d=l();e.checked=!!d})}function y(e,l,r){for(var d=new Set,c=0;c<e.length;c+=1)e[c].checked&&d.add(e[c].__value);return r||d.delete(l),Array.from(d)}function u(e){var l=e.type;return l==="number"||l==="range"}function k(e){return e===""?null:+e}export{q as a,V as b,j as c};
