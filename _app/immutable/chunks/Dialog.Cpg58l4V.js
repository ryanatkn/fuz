import{p as S,x as X,c as q,a as O,t as B}from"./disclose-version.D3rPzbyJ.js";import{a as G,X as L,G as f,g as i,aw as U,c as g,s as j,f as F,r as w,t as H,p as J,a6 as y}from"./runtime.B-gUiV1I.js";import{p as x,i as K}from"./if.DNsq1zR9.js";import{s as M}from"./attributes.B_gKRhPE.js";import{t as P}from"./class.BHrBxz3m.js";import{s as Q}from"./style.PwPRnE0L.js";import{b as k}from"./this.B1Rg4b_C.js";import{p as E}from"./props.9yi1M7Bh.js";import{T as V}from"./Teleport.CxVrRCwb.js";const W=e=>{var s;if(!e)return!1;const{tagName:t}=e;if(t==="INPUT"){const{type:r}=e;return r==="text"||r==="number"||r==="password"||r==="email"||r==="search"||r==="url"}return t==="TEXTAREA"||!!((s=e.getAttribute)!=null&&s.call(e,"contenteditable"))&&e.getAttribute("contenteditable")!=="false"},ce=e=>{const t=e.closest("[contenteditable]");return t!==null&&t.getAttribute("contenteditable")!=="false"},Y=(e,t=!0,s=!0)=>(s&&e.preventDefault(),t?e.stopImmediatePropagation():e.stopPropagation(),e),fe=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},Z=(e=0)=>new Promise(t=>setTimeout(t,e)),ue=e=>e&&typeof e.then=="function";var $=(e,t,s)=>{e.target===i(t)&&s(e)},ee=B('<div class="dialog svelte-2t3xer" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-2t3xer"><div class="dialog_wrapper svelte-2t3xer"><div class="dialog_bg svelte-2t3xer" aria-hidden="true"></div> <div class="dialog_content svelte-2t3xer" role="none"><!></div></div></div></div>');function me(e,t){G(t,!0);const s=E(t,"layout",3,"centered"),r=E(t,"index",3,0),C=E(t,"active",3,!0),T="body",A="fuz_dialog";let d=y(void 0);L(()=>{D(t.container)});const D=a=>{if(a)f(d,x(a));else{const n=document.getElementById(A);if(n)f(d,x(n));else{const o=document.querySelector(T);if(!o)throw Error(`Cannot find dialog root element with selector '${T}'`);f(d,x(document.createElement("div"))),i(d).id=A,i(d).style.display="contents",o.appendChild(i(d))}}};let _=y(void 0),b=y(void 0);const p=a=>{var n;a&&Y(a),(n=t.onclose)==null||n.call(t)},N=a=>{var n,o;if(a.key==="Escape"&&!W(a.target)){const l=(n=i(_))==null?void 0:n.parentElement,c=(o=l==null?void 0:l.parentElement)==null?void 0:o.children,u=Array.prototype.indexOf.call(c,l);(!c||u===c.length-1||u===-1)&&p(a)}};let h=y(!1);X("keydown",U,function(...a){var n;(n=C()?N:void 0)==null||n.apply(this,a)}),V(e,{get to(){return i(d)},onmove:async()=>{var a;await Z(),f(h,!0),(a=i(_))==null||a.focus()},children:(a,n)=>{var o=ee(),l=g(o),c=g(l),u=g(c);u.__mousedown=p;var v=j(u,2);v.__mousedown=[$,b,p];var R=g(v);K(R,()=>i(h),m=>{var I=q(),z=F(I);M(z,()=>t.children,()=>p),O(m,I)}),w(v),k(v,m=>f(b,m),()=>i(b)),w(c),w(l),w(o),k(o,m=>f(_,m),()=>i(_)),H(()=>{P(o,"ready",i(h)),P(o,"layout_page",s()==="page"),Q(o,"z-index",100+r())}),O(a,o)},$$slots:{default:!0}}),J()}S(["mousedown"]);export{me as D,ue as a,W as b,ce as c,fe as i,Y as s};
