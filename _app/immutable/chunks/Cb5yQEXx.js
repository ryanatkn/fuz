import{t as y,a as p,j as O,c as Q}from"./CD1Mi0SX.js";import{p as j,k as b,f as B,g as m,u as g,s as C,a2 as S,l as x,t as E,a as F,a3 as V}from"./DgHdyJao.js";import{i as I,s as P,a as U}from"./ggRqHX6r.js";import{c as W,b as X,s as D}from"./B0jpAD2V.js";import{H as Z,a as w,i as L}from"./CSZqHnxS.js";import{p as $}from"./D7b1jwlz.js";import{s as Y}from"./QeaNnfvq.js";import{p as q}from"./cgsHLfUS.js";import{b as ee}from"./CrUGrSjv.js";import{s as ae}from"./XS_lrMhg.js";import{e as te}from"./bqOb-uOs.js";import{o as se}from"./Cod2ZPgr.js";import{a as z}from"./CXTqFVq-.js";import{l as G,t as oe,D as re}from"./DlKqBhD6.js";const R=(f,a=S)=>{V();var i=O();E(()=>ae(i,a())),p(f,i)};let ne=0;var me=y("<a><!></a>"),ie=y("<!> <!>",1),le=y("<header><!></header>");function _e(f,a){j(a,!0);const[i,k]=P(),T=()=>U(q,"$page",i),l=z.get(),o="tome_header_"+ne++,r=G.get(),_=Y(l.name);r.add(o,l.name,_),se(()=>{r.remove(o)});const n=g(()=>oe(_,T().url.pathname)),c=g(()=>m(n).path),v=g(()=>m(n).path_is_selected);var h=le(),H=b(h);te(H,()=>m(v)?"h1":"h2",!1,(A,e)=>{W(A,0,"tome_header svelte-d05s6w");var s=ie(),t=B(s);{var J=d=>{R(d,()=>l.name)},K=d=>{var u=me(),N=b(u);R(N,()=>l.name),x(u),E(()=>X(u,"href",m(c))),p(d,u)};I(t,d=>{m(v)?d(J):d(K,!1)})}var M=C(t,2);Z(M,{slug:_}),p(e,s)}),x(h),p(f,h),F(),k()}var ce=y('<section class="tome_content width_md mb_xl9"><header class="mb_xl3"><!></header> <!></section>');function De(f,a){j(a,!0);const[i,k]=P(),T=()=>U(q,"$page",i),l=$(a,"library_path",3,re),o=G.get();z.set(a.tome);const r=Y(a.tome.name),_=g(()=>T().url.pathname===ee+l());var n=ce(),c=b(n),v=b(c);{var h=e=>{var s=Q(),t=B(s);D(t,()=>a.header),p(e,s)},H=e=>{_e(e,{})};I(v,e=>{a.header?e(h):e(H,!1)})}x(c),w(c,(e,s)=>{var t;return(t=L)==null?void 0:t(e,s)},()=>m(_)?null:({intersecting:e})=>{e?o.slugs_onscreen.add(r):o.slugs_onscreen.delete(r)});var A=C(c,2);D(A,()=>a.children),x(n),w(n,(e,s)=>{var t;return(t=L)==null?void 0:t(e,s)},()=>m(_)?({intersecting:e})=>{e?o.slugs_onscreen.add(r):o.slugs_onscreen.delete(r)}:null),p(f,n),F(),k()}export{De as T};
