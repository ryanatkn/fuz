import"./DsnmJJEf.js";import{b8 as q,p as B,F,ae as l,af as _,h as s,b9 as L,ba as U,f as X,d as p,s as j,r as v,t as G,b as P,e as H,a as J,g as K,c as M}from"./B7qs8f6Z.js";import{i as Q}from"./DHMuHmk0.js";import{b as V,c as W}from"./C61V10DD.js";import{b as k}from"./2LOYOryH.js";import{p as y}from"./C2A3Zqzr.js";import{T as Y}from"./CTXSauiy.js";const Z=e=>{if(!e)return!1;const{tagName:t}=e;return t==="INPUT"&&e.type!=="hidden"||t==="TEXTAREA"||e.contentEditable==="true"||e.contentEditable===""},ce=e=>{const t=e.closest("[contenteditable]");return t!==null&&t.contentEditable!=="false"},$=(e,t=!0,r=!0)=>(r&&e.preventDefault(),t?e.stopImmediatePropagation():e.stopPropagation(),e),fe=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},ee=(e=0)=>new Promise(t=>setTimeout(t,e)),ue=e=>e&&typeof e.then=="function";var te=(e,t,r,g)=>{const c=e.target;s(t)&&(s(t)===c||!s(t).contains(c)||r()&&!c.closest(r()))&&g(e)},ae=X('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-1ayz0dr"><div class="dialog_wrapper svelte-1ayz0dr" role="none"><div class="dialog_bg svelte-1ayz0dr" aria-hidden="true"></div> <div class="dialog_content svelte-1ayz0dr"><!></div></div></div></div>');function me(e,t){B(t,!0);const r=y(t,"layout",3,"centered"),g=y(t,"index",3,0),c=y(t,"active",3,!0),A=y(t,"content_selector",3,".pane"),x="body",z="fuz_dialog";let i=_(void 0);F(()=>{C(t.container)});const C=a=>{if(a)l(i,a,!0);else{const d=document.getElementById(z);if(d)l(i,d,!0);else{const o=document.querySelector(x);if(!o)throw Error(`Cannot find dialog root element with selector '${x}'`);l(i,document.createElement("div"),!0),s(i).id=z,s(i).style.display="contents",o.appendChild(s(i))}}};let u=_(void 0),w=_(void 0);const b=a=>{a&&$(a),t.onclose?.()},D=a=>{if(a.key==="Escape"&&!Z(a.target)){const d=s(u)?.parentElement,o=d?.parentElement?.children,f=Array.prototype.indexOf.call(o,d);(!o||f===o.length-1||f===-1)&&b(a)}};let h=_(!1);L("keydown",U,function(...a){(c()?D:void 0)?.apply(this,a)}),Y(e,{get to(){return s(i)},onmove:async()=>{await ee(),l(h,!0),s(u)?.focus()},children:(a,d)=>{var o=ae();let f,I;var O=p(o),E=p(O);E.__mousedown=[te,w,A,b];var T=j(p(E),2),N=p(T);{var R=n=>{var m=H(),S=J(m);K(S,()=>t.children,()=>b),P(n,m)};Q(N,n=>{s(h)&&n(R)})}v(T),k(T,n=>l(w,n),()=>s(w)),v(E),v(O),v(o),k(o,n=>l(u,n),()=>s(u)),G((n,m)=>{f=V(o,1,"dialog svelte-1ayz0dr",null,f,n),I=W(o,"",I,m)},[()=>({ready:s(h),layout_page:r()==="page"}),()=>({"z-index":100+g()})]),P(a,o)},$$slots:{default:!0}}),M()}q(["mousedown"]);export{me as D,ue as a,Z as b,ce as c,fe as i,$ as s};
