import{a9 as t,V as i,k as b,aa as E,ab as C,W as m,ac as s,N as V,z as S,ad as g}from"./DFPGRpXC.js";function A(e,l,c=l){var v=new WeakSet;t(e,"input",async r=>{var f=r?e.defaultValue:e.value;if(f=k(e)?u(f):f,c(f),s!==null&&v.add(s),await V(),f!==(f=l())){var d=e.selectionStart,o=e.selectionEnd,h=e.value.length;if(e.value=f??"",o!==null){var a=e.value.length;d===o&&o===h&&a>h?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=d,e.selectionEnd=Math.min(o,a))}}}),(b&&e.defaultValue!==e.value||S(l)==null&&e.value)&&(c(k(e)?u(e.value):e.value),s!==null&&v.add(s)),i(()=>{var r=l();if(e===document.activeElement){var f=g??s;if(v.has(f))return}k(e)&&r===u(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}const n=new Set;function W(e,l,c,v,r=v){var f=c.getAttribute("type")==="checkbox",d=e;let o=!1;if(l!==null)for(var h of l)d=d[h]??=[];d.push(c),t(c,"change",()=>{var a=c.__value;f&&(a=y(d,a,c.checked)),r(a)},()=>r(f?[]:null)),i(()=>{var a=v();if(b&&c.defaultChecked!==c.checked){o=!0;return}f?(a=a||[],c.checked=a.includes(c.__value)):c.checked=E(c.__value,a)}),C(()=>{var a=d.indexOf(c);a!==-1&&d.splice(a,1)}),n.has(d)||(n.add(d),m(()=>{d.sort((a,_)=>a.compareDocumentPosition(_)===4?-1:1),n.delete(d)})),m(()=>{if(o){var a;if(f)a=y(d,a,c.checked);else{var _=d.find(x=>x.checked);a=_?.__value}r(a)}})}function q(e,l,c=l){t(e,"change",v=>{var r=v?e.defaultChecked:e.checked;c(r)}),(b&&e.defaultChecked!==e.checked||S(l)==null)&&c(e.checked),i(()=>{var v=l();e.checked=!!v})}function y(e,l,c){for(var v=new Set,r=0;r<e.length;r+=1)e[r].checked&&v.add(e[r].__value);return c||v.delete(l),Array.from(v)}function k(e){var l=e.type;return l==="number"||l==="range"}function u(e){return e===""?null:+e}export{W as a,A as b,q as c};
