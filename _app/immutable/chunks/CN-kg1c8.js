import{k as S,m as U,t as q,a as O,c as B}from"./DoRN4M-o.js";import{p as J,U as L,J as f,a4 as _,g as a,ap as X,k as p,s as F,l as g,t as G,f as H,a as K}from"./CLNC1iHR.js";import{i as M}from"./C1oRbkCz.js";import{c as Q,d as V,s as W}from"./BbynuF1-.js";import{b as P}from"./8RlZCxH-.js";import{p as y}from"./B3lj4C7e.js";import{T as Y}from"./4G7WVVPu.js";const Z=t=>{if(!t)return!1;const{tagName:e}=t;return e==="INPUT"&&t.type!=="hidden"||e==="TEXTAREA"||t.contentEditable==="true"||t.contentEditable===""},ce=t=>{const e=t.closest("[contenteditable]");return e!==null&&e.contentEditable!=="false"},$=(t,e=!0,l=!0)=>(l&&t.preventDefault(),e?t.stopImmediatePropagation():t.stopPropagation(),t),fe=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},ee=(t=0)=>new Promise(e=>setTimeout(e,t)),ue=t=>t&&typeof t.then=="function";var te=(t,e,l,w)=>{const u=t.target;a(e)&&(a(e)===u||!a(e).contains(u)||l()&&!u.closest(l()))&&w(t)},oe=q('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-4ojjtv"><div class="dialog_wrapper svelte-4ojjtv" role="none"><div class="dialog_bg svelte-4ojjtv" aria-hidden="true"></div> <div class="dialog_content svelte-4ojjtv"><!></div></div></div></div>');function me(t,e){J(e,!0);const l=y(e,"layout",3,"centered"),w=y(e,"index",3,0),u=y(e,"active",3,!0),A=y(e,"content_selector",3,".pane"),x="body",k="fuz_dialog";let r=_(void 0);L(()=>{C(e.container)});const C=o=>{if(o)f(r,o,!0);else{const n=document.getElementById(k);if(n)f(r,n,!0);else{const s=document.querySelector(x);if(!s)throw Error(`Cannot find dialog root element with selector '${x}'`);f(r,document.createElement("div"),!0),a(r).id=k,a(r).style.display="contents",s.appendChild(a(r))}}};let v=_(void 0),h=_(void 0);const b=o=>{var n;o&&$(o),(n=e.onclose)==null||n.call(e)},D=o=>{var n,s;if(o.key==="Escape"&&!Z(o.target)){const d=(n=a(v))==null?void 0:n.parentElement,c=(s=d==null?void 0:d.parentElement)==null?void 0:s.children,m=Array.prototype.indexOf.call(c,d);(!c||m===c.length-1||m===-1)&&b(o)}};let E=_(!1);U("keydown",X,function(...o){var n;(n=u()?D:void 0)==null||n.apply(this,o)}),Y(t,{get to(){return a(r)},onmove:async()=>{var o;await ee(),f(E,!0),(o=a(v))==null||o.focus()},children:(o,n)=>{var s=oe();let d,c;var m=p(s),j=p(m);j.__mousedown=[te,h,A,b];var T=F(p(j),2),N=p(T);{var R=i=>{var I=B(),z=H(I);W(z,()=>e.children,()=>b),O(i,I)};M(N,i=>{a(E)&&i(R)})}g(T),P(T,i=>f(h,i),()=>a(h)),g(j),g(m),g(s),P(s,i=>f(v,i),()=>a(v)),G(i=>{d=Q(s,1,"dialog svelte-4ojjtv",null,d,i),c=V(s,"",c,{"z-index":100+w()})},[()=>({ready:a(E),layout_page:l()==="page"})]),O(o,s)},$$slots:{default:!0}}),K()}S(["mousedown"]);export{me as D,ue as a,Z as b,ce as c,fe as i,$ as s};
