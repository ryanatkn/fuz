import{a as i,t as u,g as K,c as M}from"./disclose-version.DkCpnmWz.js";import{p as B,a as C,c as g,g as m,r as v,d as h,f as E,t as D,s as F,a4 as N,a3 as O}from"./runtime.BsoL6_G0.js";import{i as I}from"./if.Bx1zmLIF.js";import{d as Q,c as S,s as w}from"./attributes.BGcIkhL2.js";import{H as V,a as L,i as R}from"./intersect.BqaEzIN6.js";import{p as W}from"./props.D6_ZrTZG.js";import{s as P,a as U,p as Y}from"./stores.BZvBArnL.js";import{s as j}from"./path.QeaNnfvq.js";import{b as X}from"./entry.B5Jl0eG4.js";import{s as Z}from"./render.BhLz70Cz.js";import{e as $}from"./svelte-element.B6PpBqMa.js";import{o as ee}from"./index-client.BlXxpINk.js";import{a as q}from"./tome.B_FBjfKT.js";import{l as z,t as te,D as ae}from"./library_helpers.svelte.K934zXAh.js";let se=0;var re=u("<a><!></a>"),oe=u("<!> <!>",1),ne=u("<header><!></header>");function me(b,t){B(t,!0);const x=P(),y=()=>U(Y,"$page",x),d=(l,T=O)=>{N();var c=K();D(()=>Z(c,T())),i(l,c)},a=q.get(),o="tome_header_"+((se+=1)-1),_=z.get(),s=j(a.name);_.add(o,a.name,s),ee(()=>{_.remove(o)});const n=h(()=>te(s,y().url.pathname)),k=h(()=>m(n).path),p=h(()=>m(n).path_is_selected);var e=ne(),r=g(e);$(r,()=>m(p)?"h1":"h2",!1,(l,T)=>{Q(l,null,{class:"tome_header"},"svelte-d05s6w");var c=oe(),A=E(c);I(A,()=>m(p),H=>{d(H,()=>a.name)},H=>{var f=re(),J=g(f);d(J,()=>a.name),v(f),D(()=>S(f,"href",m(k))),i(H,f)});var G=F(A,2);V(G,{slug:s}),i(T,c)}),v(e),i(b,e),C()}var ie=u('<section class="tome_content width_md mb_xl9"><header class="mb_xl3"><!></header> <!></section>');function Te(b,t){B(t,!0);const x=P(),y=()=>U(Y,"$page",x),d=W(t,"library_path",3,ae),a=z.get();q.set(t.tome);const o=j(t.tome.name),_=h(()=>y().url.pathname===X+d());var s=ie(),n=g(s),k=g(n);I(k,()=>t.header,e=>{var r=M(),l=E(r);w(l,()=>t.header),i(e,r)},e=>{me(e,{})}),v(n);var p=F(n,2);w(p,()=>t.children),v(s),L(s,(e,r)=>R(e,r),()=>m(_)?({intersecting:e})=>{e?a.slugs_onscreen.add(o):a.slugs_onscreen.delete(o)}:null),L(n,(e,r)=>R(e,r),()=>m(_)?null:({intersecting:e})=>{e?a.slugs_onscreen.add(o):a.slugs_onscreen.delete(o)}),i(b,s),C()}export{Te as T};
