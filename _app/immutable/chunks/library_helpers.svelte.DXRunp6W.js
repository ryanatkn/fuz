var x=(r,e,s)=>{if(!e.has(r))throw TypeError("Cannot "+s)};var t=(r,e,s)=>(x(r,e,"read from private field"),s?s.call(r):e.get(r)),c=(r,e,s)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,s)};var z=(r,e,s)=>(x(r,e,"access private method"),s);import{p as y}from"./if.Df50zaIY.js";import{M as h,a4 as k,g as l,l as E,m as R,aj as L}from"./runtime.CyUAaF6i.js";import{b as Y}from"./entry.Dw7UvVLZ.js";function v(r){h(r,r.v+1)}var j=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],B=["difference","intersection","symmetricDifference","union"],w=!1,f,o,u,b,I;const m=class m extends Set{constructor(s){super();c(this,b);c(this,f,new Map);c(this,o,k(0));c(this,u,k(0));if(s){for(var i of s)super.add(i);t(this,u).v=super.size}w||z(this,b,I).call(this)}has(s){var i=super.has(s),a=t(this,f),n=a.get(s);if(n===void 0){if(!i)return l(t(this,o)),!1;n=k(!0),a.set(s,n)}return l(n),i}add(s){return super.has(s)||(super.add(s),h(t(this,u),super.size),v(t(this,o))),this}delete(s){var i=super.delete(s),a=t(this,f),n=a.get(s);return n!==void 0&&(a.delete(s),h(n,!1)),i&&(h(t(this,u),super.size),v(t(this,o))),i}clear(){if(super.size!==0){super.clear();var s=t(this,f);for(var i of s.values())h(i,!1);s.clear(),h(t(this,u),0),v(t(this,o))}}keys(){return this.values()}values(){return l(t(this,o)),super.values()}entries(){return l(t(this,o)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return l(t(this,u))}};f=new WeakMap,o=new WeakMap,u=new WeakMap,b=new WeakSet,I=function(){w=!0;var s=m.prototype,i=Set.prototype;for(const a of j)s[a]=function(...n){return l(t(this,o)),i[a].apply(this,n)};for(const a of B)s[a]=function(...n){l(t(this,o));var d=i[a].apply(this,n);return new m(d)}};let g=m;const S="/library",T=(r,e,s=S)=>{const i=e.split("/").at(-1);return{path:Y+s+"/"+r,path_is_selected:i===r,path_segment:i}},A=Symbol("library_links"),H=(r=new C)=>E(A,r),N=()=>{const r=R(A);if(!r)throw Error("get_library_links called before set_library_links");return r};var p,_;class C{constructor(e=S){c(this,p,L(y([])));c(this,_,L(y(new g)));this.root_path=e}get library_links(){return l(t(this,p))}set library_links(e){h(t(this,p),y(e))}get slugs_onscreen(){return l(t(this,_))}set slugs_onscreen(e){h(t(this,_),y(e))}add(e,s,i,a){const n=this.library_links.findIndex(D=>D.id===e),d={id:e,text:s,slug:i,tag:a};n===-1?this.library_links.push(d):this.library_links[n]=d}remove(e){const s=this.library_links.findIndex(i=>i.id===e);return s===-1?!1:(this.library_links.splice(s,1),!0)}}p=new WeakMap,_=new WeakMap;export{S as D,N as g,H as s,T as t};
