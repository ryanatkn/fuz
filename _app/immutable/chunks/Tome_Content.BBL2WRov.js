import{a as p,t as k,j as z,c as J}from"./disclose-version.qccFV9AM.js";import{a as R,k as x,N as K,f as w,g as i,s as C,l as y,p as I,d as b,t as L,a4 as O,a3 as Q}from"./runtime.B2HyCRSG.js";import{s as P,i as S,a as U}from"./store.CItsiEdH.js";import{a as W,b as X,s as H}from"./attributes.LBTBdhoE.js";import{H as Z,a as D,i as E}from"./intersect.C2iU56M7.js";import{p as $}from"./props.DO01tcwN.js";import{s as j}from"./path.QeaNnfvq.js";import{p as B}from"./stores.Eo5UJ-09.js";import{b as ee}from"./entry.C0p58QK4.js";import{s as ae}from"./render.DuAIDw5y.js";import{e as te}from"./svelte-element.Bj6nyNYe.js";import{o as se}from"./index-client.DfRMKLmL.js";import{a as F}from"./tome.BRswXeJT.js";import{l as G,t as oe,D as re}from"./library_helpers.svelte.h4VTxanS.js";const N=(f,a=Q)=>{O();var m=z();L(()=>ae(m,a())),p(f,m)};let ne=0;var ie=k("<a><!></a>"),me=k("<!> <!>",1),le=k("<header><!></header>");function _e(f,a){R(a,!0);const m=P(),A=()=>U(B,"$page",m),l=F.get(),o="tome_header_"+ne++,r=G.get(),_=j(l.name);r.add(o,l.name,_),se(()=>{r.remove(o)});const n=b(()=>oe(_,A().url.pathname)),c=b(()=>i(n).path),g=b(()=>i(n).path_is_selected);var h=le(),T=x(h);te(T,()=>i(g)?"h1":"h2",!1,(v,e)=>{W(v,null,{class:"tome_header"},"svelte-d05s6w",v.namespaceURI===K,v.nodeName.includes("-"));var s=me(),t=w(s);{var M=d=>{N(d,()=>l.name)},V=d=>{var u=ie(),q=x(u);N(q,()=>l.name),y(u),L(()=>X(u,"href",i(c))),p(d,u)};S(t,d=>{i(g)?d(M):d(V,!1)})}var Y=C(t,2);Z(Y,{slug:_}),p(e,s)}),y(h),p(f,h),I()}var ce=k('<section class="tome_content width_md mb_xl9"><header class="mb_xl3"><!></header> <!></section>');function De(f,a){R(a,!0);const m=P(),A=()=>U(B,"$page",m),l=$(a,"library_path",3,re),o=G.get();F.set(a.tome);const r=j(a.tome.name),_=b(()=>A().url.pathname===ee+l());var n=ce(),c=x(n),g=x(c);{var h=e=>{var s=J(),t=w(s);H(t,()=>a.header),p(e,s)},T=e=>{_e(e,{})};S(g,e=>{a.header?e(h):e(T,!1)})}y(c),D(c,(e,s)=>{var t;return(t=E)==null?void 0:t(e,s)},()=>i(_)?null:({intersecting:e})=>{e?o.slugs_onscreen.add(r):o.slugs_onscreen.delete(r)});var v=C(c,2);H(v,()=>a.children),y(n),D(n,(e,s)=>{var t;return(t=E)==null?void 0:t(e,s)},()=>i(_)?({intersecting:e})=>{e?o.slugs_onscreen.add(r):o.slugs_onscreen.delete(r)}:null),p(f,n),I()}export{De as T};
