import{a as i,t as u,g as J,c as K}from"./disclose-version.D7hgbcr2.js";import{p as B,a as C,c as g,g as m,r as v,d as h,f as E,t as D,s as F,ai as M,ah as N}from"./runtime.CyUAaF6i.js";import{i as I}from"./if.Df50zaIY.js";import{d as O,c as Q,s as w}from"./attributes.CECX38sg.js";import{H as S,a as L,i as R}from"./intersect.BMTFiLJI.js";import{p as V}from"./props.jEArgUtm.js";import{s as P,a as U,p as Y}from"./stores.sz0D3-jd.js";import{s as j}from"./path.QeaNnfvq.js";import{b as W}from"./entry.Dw7UvVLZ.js";import{s as X}from"./render.CCgqK4Xj.js";import{e as Z}from"./svelte-element.DhBWWgQa.js";import{o as $}from"./index-client.DwVNPtAC.js";import{b as ee,s as ae}from"./tome.BuYQJ7Vl.js";import{g as q,t as te,D as se}from"./library_helpers.svelte.DXRunp6W.js";let re=0;var oe=u("<a><!></a>"),ne=u("<!> <!>",1),me=u("<header><!></header>");function ie(b,a){B(a,!0);const y=P(),x=()=>U(Y,"$page",y),c=(l,T=N)=>{M();var d=J();D(()=>X(d,T())),i(l,d)},t=ee(),o="tome_header_"+((re+=1)-1),_=q(),s=j(t.name);_.add(o,t.name,s),$(()=>{_.remove(o)});const n=h(()=>te(s,x().url.pathname)),k=h(()=>m(n).path),p=h(()=>m(n).path_is_selected);var e=me(),r=g(e);Z(r,()=>m(p)?"h1":"h2",!1,(l,T)=>{O(l,null,{class:"tome_header"},"svelte-d05s6w");var d=ne(),A=E(d);I(A,()=>m(p),H=>{c(H,()=>t.name)},H=>{var f=oe(),G=g(f);c(G,()=>t.name),v(f),D(()=>Q(f,"href",m(k))),i(H,f)});var z=F(A,2);S(z,{slug:s}),i(T,d)}),v(e),i(b,e),C()}var _e=u('<section class="tome_content width_md mb_xl9"><header class="mb_xl3"><!></header> <!></section>');function He(b,a){B(a,!0);const y=P(),x=()=>U(Y,"$page",y),c=V(a,"library_path",3,se),t=q();ae(a.tome);const o=j(a.tome.name),_=h(()=>x().url.pathname===W+c());var s=_e(),n=g(s),k=g(n);I(k,()=>a.header,e=>{var r=K(),l=E(r);w(l,()=>a.header),i(e,r)},e=>{ie(e,{})}),v(n);var p=F(n,2);w(p,()=>a.children),v(s),L(s,(e,r)=>R(e,r),()=>m(_)?({intersecting:e})=>{e?t.slugs_onscreen.add(o):t.slugs_onscreen.delete(o)}:null),L(n,(e,r)=>R(e,r),()=>m(_)?null:({intersecting:e})=>{e?t.slugs_onscreen.add(o):t.slugs_onscreen.delete(o)}),i(b,s),C()}export{He as T};
