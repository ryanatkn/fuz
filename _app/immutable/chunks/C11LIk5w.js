import{k as z,m as S,t as X,a as I,c as B}from"./C3a0MWKm.js";import{p as L,m as U,O as f,a5 as _,g as a,aq as Z,Z as g,s as F,_ as p,X as G,f as H,a as J}from"./CBcvYSsl.js";import{i as K}from"./DzvUtkRf.js";import{c as M,d as Q,s as V}from"./DxWaIpUH.js";import{b as P}from"./Cy0IVI8Z.js";import{p as y}from"./pUEIKI1Z.js";import{T as W}from"./Ltf777dU.js";const Y=t=>{if(!t)return!1;const{tagName:e}=t;return e==="INPUT"&&t.type!=="hidden"||e==="TEXTAREA"||t.contentEditable==="true"||t.contentEditable===""},ce=t=>{const e=t.closest("[contenteditable]");return e!==null&&e.contentEditable!=="false"},$=(t,e=!0,l=!0)=>(l&&t.preventDefault(),e?t.stopImmediatePropagation():t.stopPropagation(),t),fe=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},ee=(t=0)=>new Promise(e=>setTimeout(e,t)),ue=t=>t&&typeof t.then=="function";var te=(t,e,l,w)=>{const u=t.target;a(e)&&(a(e)===u||!a(e).contains(u)||l()&&!u.closest(l()))&&w(t)},oe=X('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-4ojjtv"><div class="dialog_wrapper svelte-4ojjtv" role="none"><div class="dialog_bg svelte-4ojjtv" aria-hidden="true"></div> <div class="dialog_content svelte-4ojjtv"><!></div></div></div></div>');function me(t,e){L(e,!0);const l=y(e,"layout",3,"centered"),w=y(e,"index",3,0),u=y(e,"active",3,!0),A=y(e,"content_selector",3,".pane"),x="body",O="fuz_dialog";let r=_(void 0);U(()=>{C(e.container)});const C=o=>{if(o)f(r,o,!0);else{const n=document.getElementById(O);if(n)f(r,n,!0);else{const s=document.querySelector(x);if(!s)throw Error(`Cannot find dialog root element with selector '${x}'`);f(r,document.createElement("div"),!0),a(r).id=O,a(r).style.display="contents",s.appendChild(a(r))}}};let v=_(void 0),h=_(void 0);const b=o=>{var n;o&&$(o),(n=e.onclose)==null||n.call(e)},D=o=>{var n,s;if(o.key==="Escape"&&!Y(o.target)){const d=(n=a(v))==null?void 0:n.parentElement,c=(s=d==null?void 0:d.parentElement)==null?void 0:s.children,m=Array.prototype.indexOf.call(c,d);(!c||m===c.length-1||m===-1)&&b(o)}};let E=_(!1);S("keydown",Z,function(...o){var n;(n=u()?D:void 0)==null||n.apply(this,o)}),W(t,{get to(){return a(r)},onmove:async()=>{var o;await ee(),f(E,!0),(o=a(v))==null||o.focus()},children:(o,n)=>{var s=oe();let d,c;var m=g(s),j=g(m);j.__mousedown=[te,h,A,b];var T=F(g(j),2),N=g(T);{var R=i=>{var k=B(),q=H(k);V(q,()=>e.children,()=>b),I(i,k)};K(N,i=>{a(E)&&i(R)})}p(T),P(T,i=>f(h,i),()=>a(h)),p(j),p(m),p(s),P(s,i=>f(v,i),()=>a(v)),G(i=>{d=M(s,1,"dialog svelte-4ojjtv",null,d,i),c=Q(s,"",c,{"z-index":100+w()})},[()=>({ready:a(E),layout_page:l()==="page"})]),I(o,s)},$$slots:{default:!0}}),J()}z(["mousedown"]);export{me as D,ue as a,Y as b,ce as c,fe as i,$ as s};
