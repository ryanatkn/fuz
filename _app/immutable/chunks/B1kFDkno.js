import"./DsnmJJEf.js";import{aV as S,p as X,G as q,at as d,au as v,h as s,aW as B,aX as G,f as L,d as _,s as U,r as p,t as V,b as P,e as W,a as F,g as H,c as J}from"./hvi78P_d.js";import{i as K}from"./b9UmUbIo.js";import{b as M,c as Q}from"./baBGA4xI.js";import{b as k}from"./B63KIICj.js";import{p as g}from"./Cu6gSB0G.js";import{T as Y}from"./Blb6Ag5K.js";const Z=e=>{if(!e)return!1;const{tagName:t}=e;return t==="INPUT"&&e.type!=="hidden"||t==="TEXTAREA"||e.contentEditable==="true"||e.contentEditable===""},ce=e=>{const t=e.closest("[contenteditable]");return t!==null&&t.contentEditable!=="false"},$=(e,t=!0,r=!0)=>(r&&e.preventDefault(),t?e.stopImmediatePropagation():e.stopPropagation(),e),fe=()=>{if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!1}},ee=(e=0)=>new Promise(t=>setTimeout(t,e)),ue=e=>e&&typeof e.then=="function";var te=(e,t,r,y)=>{const c=e.target;s(t)&&(s(t)===c||!s(t).contains(c)||r()&&!c.closest(r()))&&y(e)},oe=L('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-4ojjtv"><div class="dialog_wrapper svelte-4ojjtv" role="none"><div class="dialog_bg svelte-4ojjtv" aria-hidden="true"></div> <div class="dialog_content svelte-4ojjtv"><!></div></div></div></div>');function me(e,t){X(t,!0);const r=g(t,"layout",3,"centered"),y=g(t,"index",3,0),c=g(t,"active",3,!0),A=g(t,"content_selector",3,".pane"),T="body",x="fuz_dialog";let i=v(void 0);q(()=>{C(t.container)});const C=o=>{if(o)d(i,o,!0);else{const l=document.getElementById(x);if(l)d(i,l,!0);else{const a=document.querySelector(T);if(!a)throw Error(`Cannot find dialog root element with selector '${T}'`);d(i,document.createElement("div"),!0),s(i).id=x,s(i).style.display="contents",a.appendChild(s(i))}}};let u=v(void 0),w=v(void 0);const h=o=>{o&&$(o),t.onclose?.()},D=o=>{if(o.key==="Escape"&&!Z(o.target)){const l=s(u)?.parentElement,a=l?.parentElement?.children,f=Array.prototype.indexOf.call(a,l);(!a||f===a.length-1||f===-1)&&h(o)}};let b=v(!1);B("keydown",G,function(...o){(c()?D:void 0)?.apply(this,o)}),Y(e,{get to(){return s(i)},onmove:async()=>{await ee(),d(b,!0),s(u)?.focus()},children:(o,l)=>{var a=oe();let f,I;var O=_(a),E=_(O);E.__mousedown=[te,w,A,h];var j=U(_(E),2),N=_(j);{var R=n=>{var m=W(),z=F(m);H(z,()=>t.children,()=>h),P(n,m)};K(N,n=>{s(b)&&n(R)})}p(j),k(j,n=>d(w,n),()=>s(w)),p(E),p(O),p(a),k(a,n=>d(u,n),()=>s(u)),V((n,m)=>{f=M(a,1,"dialog svelte-4ojjtv",null,f,n),I=Q(a,"",I,m)},[()=>({ready:s(b),layout_page:r()==="page"}),()=>({"z-index":100+y()})]),P(o,a)},$$slots:{default:!0}}),J()}S(["mousedown"]);export{me as D,ue as a,Z as b,ce as c,fe as i,$ as s};
